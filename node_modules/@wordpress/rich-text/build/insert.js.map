{"version":3,"names":["_create","require","_normaliseFormats","insert","value","valueToInsert","startIndex","start","endIndex","end","formats","replacements","text","create","index","length","normaliseFormats","slice","concat"],"sources":["@wordpress/rich-text/src/insert.js"],"sourcesContent":["/**\n * Internal dependencies\n */\n\nimport { create } from './create';\nimport { normaliseFormats } from './normalise-formats';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Insert a Rich Text value, an HTML string, or a plain text string, into a\n * Rich Text value at the given `startIndex`. Any content between `startIndex`\n * and `endIndex` will be removed. Indices are retrieved from the selection if\n * none are provided.\n *\n * @param {RichTextValue}        value         Value to modify.\n * @param {RichTextValue|string} valueToInsert Value to insert.\n * @param {number}               [startIndex]  Start index.\n * @param {number}               [endIndex]    End index.\n *\n * @return {RichTextValue} A new value with the value inserted.\n */\nexport function insert(\n\tvalue,\n\tvalueToInsert,\n\tstartIndex = value.start,\n\tendIndex = value.end\n) {\n\tconst { formats, replacements, text } = value;\n\n\tif ( typeof valueToInsert === 'string' ) {\n\t\tvalueToInsert = create( { text: valueToInsert } );\n\t}\n\n\tconst index = startIndex + valueToInsert.text.length;\n\n\treturn normaliseFormats( {\n\t\tformats: formats\n\t\t\t.slice( 0, startIndex )\n\t\t\t.concat( valueToInsert.formats, formats.slice( endIndex ) ),\n\t\treplacements: replacements\n\t\t\t.slice( 0, startIndex )\n\t\t\t.concat(\n\t\t\t\tvalueToInsert.replacements,\n\t\t\t\treplacements.slice( endIndex )\n\t\t\t),\n\t\ttext:\n\t\t\ttext.slice( 0, startIndex ) +\n\t\t\tvalueToInsert.text +\n\t\t\ttext.slice( endIndex ),\n\t\tstart: index,\n\t\tend: index,\n\t} );\n}\n"],"mappings":";;;;;;AAIA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAD,OAAA;AALA;AACA;AACA;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASE,MAAMA,CACrBC,KAAK,EACLC,aAAa,EACbC,UAAU,GAAGF,KAAK,CAACG,KAAK,EACxBC,QAAQ,GAAGJ,KAAK,CAACK,GAAG,EACnB;EACD,MAAM;IAAEC,OAAO;IAAEC,YAAY;IAAEC;EAAK,CAAC,GAAGR,KAAK;EAE7C,IAAK,OAAOC,aAAa,KAAK,QAAQ,EAAG;IACxCA,aAAa,GAAG,IAAAQ,cAAM,EAAE;MAAED,IAAI,EAAEP;IAAc,CAAE,CAAC;EAClD;EAEA,MAAMS,KAAK,GAAGR,UAAU,GAAGD,aAAa,CAACO,IAAI,CAACG,MAAM;EAEpD,OAAO,IAAAC,kCAAgB,EAAE;IACxBN,OAAO,EAAEA,OAAO,CACdO,KAAK,CAAE,CAAC,EAAEX,UAAW,CAAC,CACtBY,MAAM,CAAEb,aAAa,CAACK,OAAO,EAAEA,OAAO,CAACO,KAAK,CAAET,QAAS,CAAE,CAAC;IAC5DG,YAAY,EAAEA,YAAY,CACxBM,KAAK,CAAE,CAAC,EAAEX,UAAW,CAAC,CACtBY,MAAM,CACNb,aAAa,CAACM,YAAY,EAC1BA,YAAY,CAACM,KAAK,CAAET,QAAS,CAC9B,CAAC;IACFI,IAAI,EACHA,IAAI,CAACK,KAAK,CAAE,CAAC,EAAEX,UAAW,CAAC,GAC3BD,aAAa,CAACO,IAAI,GAClBA,IAAI,CAACK,KAAK,CAAET,QAAS,CAAC;IACvBD,KAAK,EAAEO,KAAK;IACZL,GAAG,EAAEK;EACN,CAAE,CAAC;AACJ"}