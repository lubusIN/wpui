{"version":3,"names":["_reactNative","require","_element","_globalStylesContext","_interopRequireDefault","getValueAndUnit","value","unit","regex","splitValue","match","filter","v","valueToConvert","valueUnit","undefined","exports","convertUnitToMobile","containerSize","globalStyles","width","height","fontSize","Number","vw","Math","round","vh","useConvertUnitToMobile","styles","useContext","GlobalStylesContext","windowSizes","setWindowSizes","useState","Dimensions","get","useEffect","dimensionsChangeSubscription","addEventListener","onDimensionsChange","remove","useCallback","window","useMemo"],"sources":["@wordpress/components/src/mobile/utils/use-unit-converter-to-mobile.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Dimensions } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseContext,\n\tuseEffect,\n\tuseState,\n\tuseMemo,\n\tuseCallback,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport GlobalStylesContext from '../global-styles-context';\n\nconst getValueAndUnit = ( value, unit ) => {\n\tconst regex = /(\\d+\\.?\\d*)(.*)/;\n\n\tconst splitValue = `${ value }`\n\t\t?.match( regex )\n\t\t?.filter( ( v ) => v !== '' );\n\n\tif ( splitValue ) {\n\t\treturn {\n\t\t\tvalueToConvert: splitValue[ 1 ],\n\t\t\tvalueUnit: unit || splitValue[ 2 ],\n\t\t};\n\t}\n\treturn undefined;\n};\n\nconst convertUnitToMobile = ( containerSize, globalStyles, value, unit ) => {\n\tconst { width, height } = containerSize;\n\tconst { valueToConvert, valueUnit } = getValueAndUnit( value, unit ) || {};\n\tconst { fontSize = 16 } = globalStyles || {};\n\n\tif ( valueToConvert === undefined ) {\n\t\treturn undefined;\n\t}\n\n\tswitch ( valueUnit ) {\n\t\tcase 'rem':\n\t\tcase 'em':\n\t\t\treturn valueToConvert * fontSize;\n\t\tcase '%':\n\t\t\treturn Number( valueToConvert / 100 ) * width;\n\t\tcase 'px':\n\t\t\treturn Number( valueToConvert );\n\t\tcase 'vw':\n\t\t\tconst vw = width / 100;\n\t\t\treturn Math.round( valueToConvert * vw );\n\t\tcase 'vh':\n\t\t\tconst vh = height / 100;\n\t\t\treturn Math.round( valueToConvert * vh );\n\t\tdefault:\n\t\t\treturn Number( valueToConvert / 100 ) * width;\n\t}\n};\n\nconst useConvertUnitToMobile = ( value, unit ) => {\n\tconst { globalStyles: styles } = useContext( GlobalStylesContext );\n\tconst [ windowSizes, setWindowSizes ] = useState(\n\t\tDimensions.get( 'window' )\n\t);\n\n\tuseEffect( () => {\n\t\tconst dimensionsChangeSubscription = Dimensions.addEventListener(\n\t\t\t'change',\n\t\t\tonDimensionsChange\n\t\t);\n\n\t\treturn () => {\n\t\t\tdimensionsChangeSubscription.remove();\n\t\t};\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [] );\n\n\tconst onDimensionsChange = useCallback( ( { window } ) => {\n\t\tsetWindowSizes( window );\n\t}, [] );\n\n\treturn useMemo( () => {\n\t\tconst { valueToConvert, valueUnit } =\n\t\t\tgetValueAndUnit( value, unit ) || {};\n\n\t\treturn convertUnitToMobile(\n\t\t\twindowSizes,\n\t\t\tstyles,\n\t\t\tvalueToConvert,\n\t\t\tvalueUnit\n\t\t);\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ windowSizes, value, unit ] );\n};\n\nexport { convertUnitToMobile, useConvertUnitToMobile, getValueAndUnit };\n"],"mappings":"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"}