{"version":3,"names":["_element","require","_classnames","_interopRequireDefault","_compose","_icons","_button","_icon","_utils","noop","UnforwardedPanelBody","props","ref","buttonProps","children","className","icon","initialOpen","onToggle","opened","title","scrollAfterOpen","isOpened","setIsOpened","useControlledState","initial","undefined","fallback","nodeRef","useRef","scrollBehavior","useReducedMotion","handleOnToggle","event","preventDefault","next","scrollAfterOpenRef","current","useUpdateEffect","scrollIntoView","inline","block","behavior","classes","classnames","createElement","useMergeRefs","PanelBodyTitle","Boolean","onClick","forwardRef","default","chevronUp","chevronDown","size","PanelBody","exports","_default"],"sources":["@wordpress/components/src/panel/body.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useReducedMotion, useMergeRefs } from '@wordpress/compose';\nimport { forwardRef, useRef } from '@wordpress/element';\nimport { chevronUp, chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport type { PanelBodyProps, PanelBodyTitleProps } from './types';\nimport type { WordPressComponentProps } from '../ui/context';\nimport Button from '../button';\nimport Icon from '../icon';\nimport { useControlledState, useUpdateEffect } from '../utils';\n\nconst noop = () => {};\n\nexport function UnforwardedPanelBody(\n\tprops: PanelBodyProps,\n\tref: React.ForwardedRef< HTMLDivElement >\n) {\n\tconst {\n\t\tbuttonProps = {},\n\t\tchildren,\n\t\tclassName,\n\t\ticon,\n\t\tinitialOpen,\n\t\tonToggle = noop,\n\t\topened,\n\t\ttitle,\n\t\tscrollAfterOpen = true,\n\t} = props;\n\tconst [ isOpened, setIsOpened ] = useControlledState< boolean | undefined >(\n\t\topened,\n\t\t{\n\t\t\tinitial: initialOpen === undefined ? true : initialOpen,\n\t\t\tfallback: false,\n\t\t}\n\t);\n\tconst nodeRef = useRef< HTMLElement >( null );\n\n\t// Defaults to 'smooth' scrolling\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\n\tconst scrollBehavior = useReducedMotion() ? 'auto' : 'smooth';\n\n\tconst handleOnToggle = ( event: React.MouseEvent ) => {\n\t\tevent.preventDefault();\n\t\tconst next = ! isOpened;\n\t\tsetIsOpened( next );\n\t\tonToggle( next );\n\t};\n\n\t// Ref is used so that the effect does not re-run upon scrollAfterOpen changing value.\n\tconst scrollAfterOpenRef = useRef< boolean | undefined >();\n\tscrollAfterOpenRef.current = scrollAfterOpen;\n\t// Runs after initial render.\n\tuseUpdateEffect( () => {\n\t\tif (\n\t\t\tisOpened &&\n\t\t\tscrollAfterOpenRef.current &&\n\t\t\tnodeRef.current?.scrollIntoView\n\t\t) {\n\t\t\t/*\n\t\t\t * Scrolls the content into view when visible.\n\t\t\t * This improves the UX when there are multiple stacking <PanelBody />\n\t\t\t * components in a scrollable container.\n\t\t\t */\n\t\t\tnodeRef.current.scrollIntoView( {\n\t\t\t\tinline: 'nearest',\n\t\t\t\tblock: 'nearest',\n\t\t\t\tbehavior: scrollBehavior,\n\t\t\t} );\n\t\t}\n\t}, [ isOpened, scrollBehavior ] );\n\n\tconst classes = classnames( 'components-panel__body', className, {\n\t\t'is-opened': isOpened,\n\t} );\n\n\treturn (\n\t\t<div className={ classes } ref={ useMergeRefs( [ nodeRef, ref ] ) }>\n\t\t\t<PanelBodyTitle\n\t\t\t\ticon={ icon }\n\t\t\t\tisOpened={ Boolean( isOpened ) }\n\t\t\t\tonClick={ handleOnToggle }\n\t\t\t\ttitle={ title }\n\t\t\t\t{ ...buttonProps }\n\t\t\t/>\n\t\t\t{ typeof children === 'function'\n\t\t\t\t? children( { opened: Boolean( isOpened ) } )\n\t\t\t\t: isOpened && children }\n\t\t</div>\n\t);\n}\n\nconst PanelBodyTitle = forwardRef(\n\t(\n\t\t{\n\t\t\tisOpened,\n\t\t\ticon,\n\t\t\ttitle,\n\t\t\t...props\n\t\t}: WordPressComponentProps< PanelBodyTitleProps, 'button' >,\n\t\tref: React.ForwardedRef< any >\n\t) => {\n\t\tif ( ! title ) return null;\n\n\t\treturn (\n\t\t\t<h2 className=\"components-panel__body-title\">\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"components-panel__body-toggle\"\n\t\t\t\t\taria-expanded={ isOpened }\n\t\t\t\t\tref={ ref }\n\t\t\t\t\t{ ...props }\n\t\t\t\t>\n\t\t\t\t\t{ /*\n\t\t\t\t\tFirefox + NVDA don't announce aria-expanded because the browser\n\t\t\t\t\trepaints the whole element, so this wrapping span hides that.\n\t\t\t\t*/ }\n\t\t\t\t\t<span aria-hidden=\"true\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tclassName=\"components-panel__arrow\"\n\t\t\t\t\t\t\ticon={ isOpened ? chevronUp : chevronDown }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t\t{ title }\n\t\t\t\t\t{ icon && (\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\tclassName=\"components-panel__icon\"\n\t\t\t\t\t\t\tsize={ 20 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</Button>\n\t\t\t</h2>\n\t\t);\n\t}\n);\n\nexport const PanelBody = forwardRef( UnforwardedPanelBody );\n\nexport default PanelBody;\n"],"mappings":"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"}