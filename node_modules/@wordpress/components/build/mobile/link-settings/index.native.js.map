{"version":3,"names":["_element","require","_reactNative","_clipboard","_interopRequireDefault","_compose","_data","_url","_icons","_bottomSheet","_bottomSheetContext","_body","_textControl","_toggleControl","_footerMessageControl","_actions","_linkRel","_style","NEW_TAB_REL","LinkSettings","isVisible","onClose","setAttributes","onEmptyURL","options","withBottomSheet","actions","editorSidebarOpened","showIcon","onLinkCellPressed","urlValue","url","label","linkTarget","rel","urlInputValue","setUrlInputValue","useState","labelInputValue","setLabelInputValue","linkRelInputValue","setLinkRelInputValue","onCloseSettingsSheetConsumed","useRef","prevEditorSidebarOpenedRef","onHandleClosingBottomSheet","useContext","BottomSheetContext","useEffect","onCloseSettingsSheet","current","prevEditorSidebarOpened","isSettingSheetOpen","autoFill","getURLFromClipboard","onSetAttributes","prependHTTP","onChangeURL","useCallback","value","onChangeLabel","newURL","onChangeOpenInNewTab","newLinkTarget","undefined","updatedRel","onChangeLinkRel","clipboardText","Clipboard","getString","isURL","getSettings","createElement","Fragment","default","LinkCell","valueMask","onPress","icon","link","valuePlaceholder","placeholder","onChange","onSubmit","autoCapitalize","autoCorrect","autoFocus","Platform","OS","keyboardType","linkLabel","openInNewTab","external","checked","linkRel","LinkRelIcon","style","styles","linkSettingsPanel","footer","separatorType","_default","compose","withSelect","select","isEditorSidebarOpened","exports"],"sources":["@wordpress/components/src/mobile/link-settings/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Platform } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { isURL, prependHTTP } from '@wordpress/url';\nimport {\n\tuseEffect,\n\tuseState,\n\tuseRef,\n\tuseContext,\n\tuseCallback,\n} from '@wordpress/element';\nimport { link, external } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BottomSheet from '../bottom-sheet';\nimport { BottomSheetContext } from '../bottom-sheet/bottom-sheet-context';\nimport PanelBody from '../../panel/body';\nimport TextControl from '../../text-control';\nimport ToggleControl from '../../toggle-control';\nimport FooterMessageControl from '../../footer-message-control';\nimport PanelActions from '../../panel/actions';\nimport LinkRelIcon from './link-rel';\n\nimport styles from './style.scss';\n\nconst NEW_TAB_REL = 'noreferrer noopener';\nfunction LinkSettings( {\n\t// Control link settings `BottomSheet` visibility\n\tisVisible,\n\t// Callback that is called on closing bottom sheet\n\tonClose,\n\t// Function called to set attributes\n\tsetAttributes,\n\t// Callback that is called when url input field is empty\n\tonEmptyURL,\n\t// Object of available options along with specific, customizable properties.\n\t// Available options keys:\n\t//\t* url - uses `TextControl` component to set `attributes.url`\n\t//\t* linkLabel - uses `TextControl` component to set `attributes.label`\n\t//\t* openInNewTab - uses `ToggleControl` component to set `attributes.linkTarget` and `attributes.rel`\n\t//\t* linkRel - uses `TextControl` component to set `attributes.rel`\n\t//\t* footer - uses `FooterMessageControl` component to display message, e.g. about missing functionality\n\t// Available properties:\n\t//\t* label - control component label, e.g. `Button Link URL`\n\t//\t* placeholder - control component placeholder, e.g. `Add URL`\n\t//\t* autoFocus (url only) - whether url input should be focused on sheet opening\n\t//\t* autoFill (url only) - whether url input should be filled with url from clipboard\n\t// Example:\n\t//\tconst options = {\n\t//\t\turl: {\n\t//\t\t\tlabel: __( 'Button Link URL' ),\n\t//\t\t\tplaceholder: __( 'Add URL' ),\n\t//\t\t\tautoFocus: true,\n\t//\t\t\tautoFill: true,\n\t//\t\t}\n\t//\t}\n\toptions,\n\t// Specifies whether settings should be wrapped into `BottomSheet`\n\twithBottomSheet,\n\t// Defines buttons which will be displayed below the all options.\n\t// It's an array of objects with following properties:\n\t//\t* label - button title\n\t//\t* onPress - callback that is called on pressing button\n\t// Example:\n\t// \tconst actions = [\n\t//\t\t{\n\t//\t\t\tlabel: __( 'Remove link' ),\n\t//\t\t\tonPress: () => setAttributes({ url: '' }),\n\t//\t\t},\n\t//\t];\n\tactions,\n\t// Specifies whether general `BottomSheet` is opened\n\teditorSidebarOpened,\n\t// Specifies whether icon should be displayed next to the label\n\tshowIcon,\n\tonLinkCellPressed,\n\turlValue,\n\t// Attributes properties\n\turl,\n\tlabel = '',\n\tlinkTarget,\n\trel = '',\n} ) {\n\tconst [ urlInputValue, setUrlInputValue ] = useState( '' );\n\tconst [ labelInputValue, setLabelInputValue ] = useState( '' );\n\tconst [ linkRelInputValue, setLinkRelInputValue ] = useState( '' );\n\tconst onCloseSettingsSheetConsumed = useRef( false );\n\tconst prevEditorSidebarOpenedRef = useRef();\n\n\tconst { onHandleClosingBottomSheet } = useContext( BottomSheetContext );\n\tuseEffect( () => {\n\t\tif ( onHandleClosingBottomSheet ) {\n\t\t\tonHandleClosingBottomSheet( onCloseSettingsSheet );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ urlInputValue, labelInputValue, linkRelInputValue ] );\n\n\tuseEffect( () => {\n\t\tprevEditorSidebarOpenedRef.current = editorSidebarOpened;\n\t} );\n\tconst prevEditorSidebarOpened = prevEditorSidebarOpenedRef.current;\n\n\tuseEffect( () => {\n\t\tif ( url !== urlInputValue ) {\n\t\t\tsetUrlInputValue( url || '' );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ url ] );\n\n\tuseEffect( () => {\n\t\tsetLabelInputValue( label || '' );\n\t}, [ label ] );\n\n\tuseEffect( () => {\n\t\tsetLinkRelInputValue( rel || '' );\n\t}, [ rel ] );\n\n\tuseEffect( () => {\n\t\tconst isSettingSheetOpen = isVisible || editorSidebarOpened;\n\t\tif ( isSettingSheetOpen ) {\n\t\t\tonCloseSettingsSheetConsumed.current = false;\n\t\t}\n\n\t\tif ( options.url.autoFill && isSettingSheetOpen && ! url ) {\n\t\t\tgetURLFromClipboard();\n\t\t}\n\n\t\tif ( prevEditorSidebarOpened && ! editorSidebarOpened ) {\n\t\t\tonSetAttributes();\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ editorSidebarOpened, isVisible ] );\n\n\tuseEffect( () => {\n\t\tif ( ! urlValue && onEmptyURL ) {\n\t\t\tonEmptyURL();\n\t\t}\n\n\t\tif ( prependHTTP( urlValue ) !== url ) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: prependHTTP( urlValue ),\n\t\t\t} );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ urlValue ] );\n\n\tconst onChangeURL = useCallback(\n\t\t( value ) => {\n\t\t\tif ( ! value && onEmptyURL ) {\n\t\t\t\tonEmptyURL();\n\t\t\t}\n\t\t\tsetUrlInputValue( value );\n\t\t},\n\t\t[ onEmptyURL ]\n\t);\n\n\tconst onChangeLabel = useCallback( ( value ) => {\n\t\tsetLabelInputValue( value );\n\t}, [] );\n\n\tconst onSetAttributes = useCallback( () => {\n\t\tconst newURL = prependHTTP( urlInputValue );\n\t\tif (\n\t\t\turl !== newURL ||\n\t\t\tlabelInputValue !== label ||\n\t\t\tlinkRelInputValue !== rel\n\t\t) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: newURL,\n\t\t\t\tlabel: labelInputValue,\n\t\t\t\trel: linkRelInputValue,\n\t\t\t} );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ urlInputValue, labelInputValue, linkRelInputValue, setAttributes ] );\n\n\tconst onCloseSettingsSheet = useCallback( () => {\n\t\tif ( onCloseSettingsSheetConsumed.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tonCloseSettingsSheetConsumed.current = true;\n\n\t\tonSetAttributes();\n\n\t\tif ( onClose ) {\n\t\t\tonClose();\n\t\t}\n\t}, [ onClose, onSetAttributes ] );\n\n\tconst onChangeOpenInNewTab = useCallback(\n\t\t( value ) => {\n\t\t\tconst newLinkTarget = value ? '_blank' : undefined;\n\n\t\t\tlet updatedRel = linkRelInputValue;\n\t\t\tif ( newLinkTarget && ! linkRelInputValue ) {\n\t\t\t\tupdatedRel = NEW_TAB_REL;\n\t\t\t} else if ( ! newLinkTarget && linkRelInputValue === NEW_TAB_REL ) {\n\t\t\t\tupdatedRel = undefined;\n\t\t\t}\n\n\t\t\tsetAttributes( {\n\t\t\t\tlinkTarget: newLinkTarget,\n\t\t\t\trel: updatedRel,\n\t\t\t} );\n\t\t},\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[ linkRelInputValue ]\n\t);\n\n\tconst onChangeLinkRel = useCallback( ( value ) => {\n\t\tsetLinkRelInputValue( value );\n\t}, [] );\n\n\tasync function getURLFromClipboard() {\n\t\tconst clipboardText = await Clipboard.getString();\n\n\t\tif ( ! clipboardText ) {\n\t\t\treturn;\n\t\t}\n\t\t// Check if pasted text is URL.\n\t\tif ( ! isURL( clipboardText ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetAttributes( { url: clipboardText } );\n\t}\n\n\tfunction getSettings() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ options.url &&\n\t\t\t\t\t( onLinkCellPressed ? (\n\t\t\t\t\t\t<BottomSheet.LinkCell\n\t\t\t\t\t\t\tshowIcon={ showIcon }\n\t\t\t\t\t\t\tvalue={ url }\n\t\t\t\t\t\t\tvalueMask={ options.url.valueMask }\n\t\t\t\t\t\t\tonPress={ onLinkCellPressed }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ticon={ showIcon && link }\n\t\t\t\t\t\t\tlabel={ options.url.label }\n\t\t\t\t\t\t\tvalue={ urlInputValue }\n\t\t\t\t\t\t\tvaluePlaceholder={ options.url.placeholder }\n\t\t\t\t\t\t\tonChange={ onChangeURL }\n\t\t\t\t\t\t\tonSubmit={ onCloseSettingsSheet }\n\t\t\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-autofocus\n\t\t\t\t\t\t\tautoFocus={\n\t\t\t\t\t\t\t\tPlatform.OS === 'ios' && options.url.autoFocus\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkeyboardType=\"url\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t{ options.linkLabel && (\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ options.linkLabel.label }\n\t\t\t\t\t\tvalue={ labelInputValue }\n\t\t\t\t\t\tvaluePlaceholder={ options.linkLabel.placeholder }\n\t\t\t\t\t\tonChange={ onChangeLabel }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ !! urlInputValue && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ options.openInNewTab && (\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\ticon={ showIcon && external }\n\t\t\t\t\t\t\t\tlabel={ options.openInNewTab.label }\n\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t\t\tonChange={ onChangeOpenInNewTab }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ options.linkRel && (\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\ticon={ showIcon && LinkRelIcon }\n\t\t\t\t\t\t\t\tlabel={ options.linkRel.label }\n\t\t\t\t\t\t\t\tvalue={ linkRelInputValue }\n\t\t\t\t\t\t\t\tvaluePlaceholder={ options.linkRel.placeholder }\n\t\t\t\t\t\t\t\tonChange={ onChangeLinkRel }\n\t\t\t\t\t\t\t\tonSubmit={ onCloseSettingsSheet }\n\t\t\t\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\t\t\t\tkeyboardType=\"default\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}\n\n\tif ( ! withBottomSheet ) {\n\t\treturn getSettings();\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PanelBody style={ styles.linkSettingsPanel }>\n\t\t\t\t{ getSettings() }\n\t\t\t</PanelBody>\n\t\t\t{ options.footer && (\n\t\t\t\t<PanelBody style={ styles.linkSettingsPanel }>\n\t\t\t\t\t<FooterMessageControl\n\t\t\t\t\t\tlabel={ options.footer.label }\n\t\t\t\t\t\tseparatorType={ options.footer.separatorType }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t) }\n\t\t\t{ actions && <PanelActions actions={ actions } /> }\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\treturn {\n\t\t\teditorSidebarOpened: isEditorSidebarOpened(),\n\t\t};\n\t} ),\n] )( LinkSettings );\n"],"mappings":"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"}