{"version":3,"names":["isValueDefined","TRUNCATE_ELLIPSIS","TRUNCATE_TYPE","auto","head","middle","tail","none","TRUNCATE_DEFAULT_PROPS","ellipsis","ellipsizeMode","limit","numberOfLines","truncateMiddle","word","headLength","tailLength","wordLength","length","frontLength","backLength","truncateStr","slice","truncateContent","words","props","mergedProps","truncateHead","truncateTail","Math","floor","truncatedContent"],"sources":["@wordpress/components/src/truncate/utils.ts"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { isValueDefined } from '../utils/values';\nimport type { TruncateProps } from './types';\n\nexport const TRUNCATE_ELLIPSIS = 'â€¦';\nexport const TRUNCATE_TYPE = {\n\tauto: 'auto',\n\thead: 'head',\n\tmiddle: 'middle',\n\ttail: 'tail',\n\tnone: 'none',\n} as const;\n\nexport const TRUNCATE_DEFAULT_PROPS = {\n\tellipsis: TRUNCATE_ELLIPSIS,\n\tellipsizeMode: TRUNCATE_TYPE.auto,\n\tlimit: 0,\n\tnumberOfLines: 0,\n};\n\n// Source\n// https://github.com/kahwee/truncate-middle\nexport function truncateMiddle(\n\tword: string,\n\theadLength: number,\n\ttailLength: number,\n\tellipsis: string\n) {\n\tif ( typeof word !== 'string' ) {\n\t\treturn '';\n\t}\n\tconst wordLength = word.length;\n\t// Setting default values\n\t// eslint-disable-next-line no-bitwise\n\tconst frontLength = ~~headLength; // Will cast to integer\n\t// eslint-disable-next-line no-bitwise\n\tconst backLength = ~~tailLength;\n\t/* istanbul ignore next */\n\tconst truncateStr = isValueDefined( ellipsis )\n\t\t? ellipsis\n\t\t: TRUNCATE_ELLIPSIS;\n\n\tif (\n\t\t( frontLength === 0 && backLength === 0 ) ||\n\t\tfrontLength >= wordLength ||\n\t\tbackLength >= wordLength ||\n\t\tfrontLength + backLength >= wordLength\n\t) {\n\t\treturn word;\n\t} else if ( backLength === 0 ) {\n\t\treturn word.slice( 0, frontLength ) + truncateStr;\n\t}\n\treturn (\n\t\tword.slice( 0, frontLength ) +\n\t\ttruncateStr +\n\t\tword.slice( wordLength - backLength )\n\t);\n}\n\nexport function truncateContent(\n\twords: string = '',\n\tprops: Omit< TruncateProps, 'children' >\n) {\n\tconst mergedProps = { ...TRUNCATE_DEFAULT_PROPS, ...props };\n\tconst { ellipsis, ellipsizeMode, limit } = mergedProps;\n\n\tif ( ellipsizeMode === TRUNCATE_TYPE.none ) {\n\t\treturn words;\n\t}\n\n\tlet truncateHead: number;\n\tlet truncateTail: number;\n\n\tswitch ( ellipsizeMode ) {\n\t\tcase TRUNCATE_TYPE.head:\n\t\t\ttruncateHead = 0;\n\t\t\ttruncateTail = limit;\n\t\t\tbreak;\n\t\tcase TRUNCATE_TYPE.middle:\n\t\t\ttruncateHead = Math.floor( limit / 2 );\n\t\t\ttruncateTail = Math.floor( limit / 2 );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\ttruncateHead = limit;\n\t\t\ttruncateTail = 0;\n\t}\n\n\tconst truncatedContent =\n\t\tellipsizeMode !== TRUNCATE_TYPE.auto\n\t\t\t? truncateMiddle( words, truncateHead, truncateTail, ellipsis )\n\t\t\t: words;\n\n\treturn truncatedContent;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,cAAc,QAAQ,iBAAiB;AAGhD,OAAO,MAAMC,iBAAiB,GAAG,GAAG;AACpC,OAAO,MAAMC,aAAa,GAAG;EAC5BC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE,QAAQ;EAChBC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE;AACP,CAAU;AAEV,OAAO,MAAMC,sBAAsB,GAAG;EACrCC,QAAQ,EAAER,iBAAiB;EAC3BS,aAAa,EAAER,aAAa,CAACC,IAAI;EACjCQ,KAAK,EAAE,CAAC;EACRC,aAAa,EAAE;AAChB,CAAC;;AAED;AACA;AACA,OAAO,SAASC,cAAcA,CAC7BC,IAAY,EACZC,UAAkB,EAClBC,UAAkB,EAClBP,QAAgB,EACf;EACD,IAAK,OAAOK,IAAI,KAAK,QAAQ,EAAG;IAC/B,OAAO,EAAE;EACV;EACA,MAAMG,UAAU,GAAGH,IAAI,CAACI,MAAM;EAC9B;EACA;EACA,MAAMC,WAAW,GAAG,CAAC,CAACJ,UAAU,CAAC,CAAC;EAClC;EACA,MAAMK,UAAU,GAAG,CAAC,CAACJ,UAAU;EAC/B;EACA,MAAMK,WAAW,GAAGrB,cAAc,CAAES,QAAS,CAAC,GAC3CA,QAAQ,GACRR,iBAAiB;EAEpB,IACGkB,WAAW,KAAK,CAAC,IAAIC,UAAU,KAAK,CAAC,IACvCD,WAAW,IAAIF,UAAU,IACzBG,UAAU,IAAIH,UAAU,IACxBE,WAAW,GAAGC,UAAU,IAAIH,UAAU,EACrC;IACD,OAAOH,IAAI;EACZ,CAAC,MAAM,IAAKM,UAAU,KAAK,CAAC,EAAG;IAC9B,OAAON,IAAI,CAACQ,KAAK,CAAE,CAAC,EAAEH,WAAY,CAAC,GAAGE,WAAW;EAClD;EACA,OACCP,IAAI,CAACQ,KAAK,CAAE,CAAC,EAAEH,WAAY,CAAC,GAC5BE,WAAW,GACXP,IAAI,CAACQ,KAAK,CAAEL,UAAU,GAAGG,UAAW,CAAC;AAEvC;AAEA,OAAO,SAASG,eAAeA,CAC9BC,KAAa,GAAG,EAAE,EAClBC,KAAwC,EACvC;EACD,MAAMC,WAAW,GAAG;IAAE,GAAGlB,sBAAsB;IAAE,GAAGiB;EAAM,CAAC;EAC3D,MAAM;IAAEhB,QAAQ;IAAEC,aAAa;IAAEC;EAAM,CAAC,GAAGe,WAAW;EAEtD,IAAKhB,aAAa,KAAKR,aAAa,CAACK,IAAI,EAAG;IAC3C,OAAOiB,KAAK;EACb;EAEA,IAAIG,YAAoB;EACxB,IAAIC,YAAoB;EAExB,QAASlB,aAAa;IACrB,KAAKR,aAAa,CAACE,IAAI;MACtBuB,YAAY,GAAG,CAAC;MAChBC,YAAY,GAAGjB,KAAK;MACpB;IACD,KAAKT,aAAa,CAACG,MAAM;MACxBsB,YAAY,GAAGE,IAAI,CAACC,KAAK,CAAEnB,KAAK,GAAG,CAAE,CAAC;MACtCiB,YAAY,GAAGC,IAAI,CAACC,KAAK,CAAEnB,KAAK,GAAG,CAAE,CAAC;MACtC;IACD;MACCgB,YAAY,GAAGhB,KAAK;MACpBiB,YAAY,GAAG,CAAC;EAClB;EAEA,MAAMG,gBAAgB,GACrBrB,aAAa,KAAKR,aAAa,CAACC,IAAI,GACjCU,cAAc,CAAEW,KAAK,EAAEG,YAAY,EAAEC,YAAY,EAAEnB,QAAS,CAAC,GAC7De,KAAK;EAET,OAAOO,gBAAgB;AACxB"}