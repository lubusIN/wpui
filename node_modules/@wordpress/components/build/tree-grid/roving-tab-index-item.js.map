{"version":3,"names":["_element","require","_rovingTabIndexContext","RovingTabIndexItem","forwardRef","UnforwardedRovingTabIndexItem","children","as","Component","props","forwardedRef","localRef","useRef","ref","lastFocusedElement","setLastFocusedElement","useRovingTabIndexContext","tabIndex","current","undefined","onFocus","event","target","allProps","createElement","exports","_default","default"],"sources":["@wordpress/components/src/tree-grid/roving-tab-index-item.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef, forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useRovingTabIndexContext } from './roving-tab-index-context';\nimport type { RovingTabIndexItemProps } from './types';\n\nexport const RovingTabIndexItem = forwardRef(\n\tfunction UnforwardedRovingTabIndexItem(\n\t\t{ children, as: Component, ...props }: RovingTabIndexItemProps,\n\t\tforwardedRef: React.ForwardedRef< any >\n\t) {\n\t\tconst localRef = useRef< any >();\n\t\tconst ref = forwardedRef || localRef;\n\t\t// @ts-expect-error - We actually want to throw an error if this is undefined.\n\t\tconst { lastFocusedElement, setLastFocusedElement } =\n\t\t\tuseRovingTabIndexContext();\n\t\tlet tabIndex;\n\n\t\tif ( lastFocusedElement ) {\n\t\t\ttabIndex =\n\t\t\t\tlastFocusedElement ===\n\t\t\t\t// TODO: The original implementation simply used `ref.current` here, assuming\n\t\t\t\t// that a forwarded ref would always be an object, which is not necessarily true.\n\t\t\t\t// This workaround maintains the original runtime behavior in a type-safe way,\n\t\t\t\t// but should be revisited.\n\t\t\t\t( 'current' in ref ? ref.current : undefined )\n\t\t\t\t\t? 0\n\t\t\t\t\t: -1;\n\t\t}\n\n\t\tconst onFocus: React.FocusEventHandler< HTMLElement > = ( event ) =>\n\t\t\tsetLastFocusedElement?.( event.target );\n\t\tconst allProps = { ref, tabIndex, onFocus, ...props };\n\n\t\tif ( typeof children === 'function' ) {\n\t\t\treturn children( allProps );\n\t\t}\n\n\t\tif ( ! Component ) return null;\n\n\t\treturn <Component { ...allProps }>{ children }</Component>;\n\t}\n);\n\nexport default RovingTabIndexItem;\n"],"mappings":";;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AAKA,IAAAC,sBAAA,GAAAD,OAAA;AARA;AACA;AACA;;AAGA;AACA;AACA;;AAIO,MAAME,kBAAkB,GAAG,IAAAC,mBAAU,EAC3C,SAASC,6BAA6BA,CACrC;EAAEC,QAAQ;EAAEC,EAAE,EAAEC,SAAS;EAAE,GAAGC;AAA+B,CAAC,EAC9DC,YAAuC,EACtC;EACD,MAAMC,QAAQ,GAAG,IAAAC,eAAM,EAAQ,CAAC;EAChC,MAAMC,GAAG,GAAGH,YAAY,IAAIC,QAAQ;EACpC;EACA,MAAM;IAAEG,kBAAkB;IAAEC;EAAsB,CAAC,GAClD,IAAAC,+CAAwB,EAAC,CAAC;EAC3B,IAAIC,QAAQ;EAEZ,IAAKH,kBAAkB,EAAG;IACzBG,QAAQ,GACPH,kBAAkB;IAClB;IACA;IACA;IACA;IACE,SAAS,IAAID,GAAG,GAAGA,GAAG,CAACK,OAAO,GAAGC,SAAS,CAAE,GAC3C,CAAC,GACD,CAAC,CAAC;EACP;EAEA,MAAMC,OAA+C,GAAKC,KAAK,IAC9DN,qBAAqB,GAAIM,KAAK,CAACC,MAAO,CAAC;EACxC,MAAMC,QAAQ,GAAG;IAAEV,GAAG;IAAEI,QAAQ;IAAEG,OAAO;IAAE,GAAGX;EAAM,CAAC;EAErD,IAAK,OAAOH,QAAQ,KAAK,UAAU,EAAG;IACrC,OAAOA,QAAQ,CAAEiB,QAAS,CAAC;EAC5B;EAEA,IAAK,CAAEf,SAAS,EAAG,OAAO,IAAI;EAE9B,OAAO,IAAAR,QAAA,CAAAwB,aAAA,EAAChB,SAAS;IAAA,GAAMe;EAAQ,GAAKjB,QAAqB,CAAC;AAC3D,CACD,CAAC;AAACmB,OAAA,CAAAtB,kBAAA,GAAAA,kBAAA;AAAA,IAAAuB,QAAA,GAEavB,kBAAkB;AAAAsB,OAAA,CAAAE,OAAA,GAAAD,QAAA"}