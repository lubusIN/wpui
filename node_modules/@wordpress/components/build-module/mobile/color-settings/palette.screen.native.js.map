{"version":3,"names":["View","Text","TouchableWithoutFeedback","__","useState","useContext","usePreferredColorSchemeStyle","ColorControl","PanelBody","BottomSheetContext","useMobileGlobalStylesColors","useRoute","useNavigation","ColorPalette","ColorIndicator","NavBar","SegmentedControls","colorsUtils","styles","HIT_SLOP","top","bottom","left","right","THEME_PALETTE_NAME","PaletteScreen","route","navigation","shouldEnableBottomSheetScroll","label","onColorChange","onGradientChange","onColorCleared","colorValue","defaultSettings","hideNavigation","params","segments","isGradient","currentValue","setCurrentValue","isGradientColor","selectedSegmentIndex","allAvailableColors","currentSegment","setCurrentSegment","isGradientSegment","currentSegmentColors","colors","gradients","horizontalSeparatorStyle","horizontalSeparator","horizontalSeparatorDark","clearButtonStyle","clearButton","clearButtonDark","selectedColorTextStyle","colorText","colorTextDark","isSolidSegment","isCustomGadientShown","setColor","color","onClear","undefined","onCustomPress","navigate","screens","picker","gradientPicker","getClearButton","createElement","onPress","hitSlop","style","clearButtonContainer","getFooter","segmentHandler","selectedIndex","indexOf","addonLeft","colorIndicator","addonRight","footer","flex","maxFontSizeMultiplier","selectable","toUpperCase","selectColorText","BackButton","goBack","Heading","colorPalettes","map","palette","paletteKey","paletteSettings","allColors","enableCustomColor","name","key","activeColor","Fragment","withColorIndicator"],"sources":["@wordpress/components/src/mobile/color-settings/palette.screen.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useContext } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport {\n\tColorControl,\n\tPanelBody,\n\tBottomSheetContext,\n\tuseMobileGlobalStylesColors,\n} from '@wordpress/components';\nimport { useRoute, useNavigation } from '@react-navigation/native';\n\n/**\n * Internal dependencies\n */\nimport ColorPalette from '../../color-palette';\nimport ColorIndicator from '../../color-indicator';\nimport NavBar from '../bottom-sheet/nav-bar';\nimport SegmentedControls from '../segmented-control';\nimport { colorsUtils } from './utils';\n\nimport styles from './style.scss';\n\nconst HIT_SLOP = { top: 8, bottom: 8, left: 8, right: 8 };\nconst THEME_PALETTE_NAME = 'Theme';\n\nconst PaletteScreen = () => {\n\tconst route = useRoute();\n\tconst navigation = useNavigation();\n\tconst { shouldEnableBottomSheetScroll } = useContext( BottomSheetContext );\n\tconst {\n\t\tlabel,\n\t\tonColorChange,\n\t\tonGradientChange,\n\t\tonColorCleared,\n\t\tcolorValue,\n\t\tdefaultSettings,\n\t\thideNavigation = false,\n\t} = route.params || {};\n\tconst { segments, isGradient } = colorsUtils;\n\tconst [ currentValue, setCurrentValue ] = useState( colorValue );\n\tconst isGradientColor = isGradient( currentValue );\n\tconst selectedSegmentIndex = isGradientColor ? 1 : 0;\n\tconst allAvailableColors = useMobileGlobalStylesColors();\n\n\tconst [ currentSegment, setCurrentSegment ] = useState(\n\t\tsegments[ selectedSegmentIndex ]\n\t);\n\tconst isGradientSegment = currentSegment === colorsUtils.segments[ 1 ];\n\tconst currentSegmentColors = ! isGradientSegment\n\t\t? defaultSettings.colors\n\t\t: defaultSettings.gradients;\n\n\tconst horizontalSeparatorStyle = usePreferredColorSchemeStyle(\n\t\tstyles.horizontalSeparator,\n\t\tstyles.horizontalSeparatorDark\n\t);\n\tconst clearButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.clearButton,\n\t\tstyles.clearButtonDark\n\t);\n\tconst selectedColorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.colorText,\n\t\tstyles.colorTextDark\n\t);\n\n\tconst isSolidSegment = currentSegment === segments[ 0 ];\n\tconst isCustomGadientShown = ! isSolidSegment && isGradientColor;\n\n\tconst setColor = ( color ) => {\n\t\tsetCurrentValue( color );\n\t\tif ( isSolidSegment && onColorChange && onGradientChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( isSolidSegment && onColorChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( ! isSolidSegment && onGradientChange ) {\n\t\t\tonGradientChange( color );\n\t\t}\n\t};\n\n\tfunction onClear() {\n\t\tsetCurrentValue( undefined );\n\n\t\tif ( onColorCleared ) {\n\t\t\tonColorCleared();\n\t\t}\n\t}\n\n\tfunction onCustomPress() {\n\t\tif ( isSolidSegment ) {\n\t\t\tnavigation.navigate( colorsUtils.screens.picker, {\n\t\t\t\tcurrentValue,\n\t\t\t\tsetColor,\n\t\t\t} );\n\t\t} else {\n\t\t\tnavigation.navigate( colorsUtils.screens.gradientPicker, {\n\t\t\t\tsetColor,\n\t\t\t\tisGradientColor,\n\t\t\t\tcurrentValue,\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction getClearButton() {\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback onPress={ onClear } hitSlop={ HIT_SLOP }>\n\t\t\t\t<View style={ styles.clearButtonContainer }>\n\t\t\t\t\t<Text style={ clearButtonStyle }>{ __( 'Reset' ) }</Text>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n\n\tfunction getFooter() {\n\t\tif ( onGradientChange ) {\n\t\t\treturn (\n\t\t\t\t<SegmentedControls\n\t\t\t\t\tsegments={ segments }\n\t\t\t\t\tsegmentHandler={ setCurrentSegment }\n\t\t\t\t\tselectedIndex={ segments.indexOf( currentSegment ) }\n\t\t\t\t\taddonLeft={\n\t\t\t\t\t\tcurrentValue && (\n\t\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\taddonRight={ currentValue && getClearButton() }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<View style={ styles.footer }>\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && (\n\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t\t{ currentValue ? (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tstyle={ selectedColorTextStyle }\n\t\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t\t\tselectable\n\t\t\t\t\t>\n\t\t\t\t\t\t{ currentValue.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t) : (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tstyle={ styles.selectColorText }\n\t\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Select a color above' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && getClearButton() }\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t);\n\t}\n\treturn (\n\t\t<View>\n\t\t\t{ ! hideNavigation && (\n\t\t\t\t<NavBar>\n\t\t\t\t\t<NavBar.BackButton onPress={ navigation.goBack } />\n\t\t\t\t\t<NavBar.Heading>{ label } </NavBar.Heading>\n\t\t\t\t</NavBar>\n\t\t\t) }\n\n\t\t\t<View style={ styles.colorPalettes }>\n\t\t\t\t{ currentSegmentColors.map( ( palette, paletteKey ) => {\n\t\t\t\t\tconst paletteSettings = {\n\t\t\t\t\t\tcolors: palette.colors,\n\t\t\t\t\t\tgradients: palette.gradients,\n\t\t\t\t\t\tallColors: allAvailableColors,\n\t\t\t\t\t};\n\t\t\t\t\tconst enableCustomColor =\n\t\t\t\t\t\t! isGradientSegment &&\n\t\t\t\t\t\tpalette.name === THEME_PALETTE_NAME;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\t\tenableCustomColor={ enableCustomColor }\n\t\t\t\t\t\t\tlabel={ palette.name }\n\t\t\t\t\t\t\tkey={ paletteKey }\n\t\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\t\tcurrentSegment={ currentSegment }\n\t\t\t\t\t\t\tonCustomPress={ onCustomPress }\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefaultSettings={ paletteSettings }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</View>\n\n\t\t\t{ isCustomGadientShown && (\n\t\t\t\t<>\n\t\t\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t<ColorControl\n\t\t\t\t\t\t\tlabel={ __( 'Customize Gradient' ) }\n\t\t\t\t\t\t\tonPress={ onCustomPress }\n\t\t\t\t\t\t\twithColorIndicator={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t{ getFooter() }\n\t\t</View>\n\t);\n};\n\nexport default PaletteScreen;\n"],"mappings":"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"}