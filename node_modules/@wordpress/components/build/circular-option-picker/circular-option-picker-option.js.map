{"version":3,"names":["_element","require","_classnames","_interopRequireDefault","_compose","_icons","_circularOptionPickerContext","_button","_composite","_tooltip","hasSelectedOption","Map","UnforwardedOptionAsButton","props","forwardedRef","createElement","default","ref","OptionAsButton","forwardRef","UnforwardedOptionAsOption","id","className","isSelected","context","additionalProps","isComposite","_compositeState","compositeState","baseId","currentId","setCurrentId","useEffect","get","set","CompositeItem","as","Button","classnames","role","OptionAsOption","Option","selectedIconProps","tooltipText","compositeContext","useContext","CircularOptionPickerContext","useInstanceId","commonProps","optionControl","isPressed","text","Icon","icon","check"],"sources":["@wordpress/components/src/circular-option-picker/circular-option-picker-option.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport type { ForwardedRef } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { forwardRef, useContext, useEffect } from '@wordpress/element';\nimport { Icon, check } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { CircularOptionPickerContext } from './circular-option-picker-context';\nimport Button from '../button';\nimport { CompositeItem } from '../composite';\nimport Tooltip from '../tooltip';\nimport type {\n\tOptionProps,\n\tCircularOptionPickerCompositeState,\n\tCircularOptionPickerContextProps,\n} from './types';\n\nconst hasSelectedOption = new Map();\n\nfunction UnforwardedOptionAsButton(\n\tprops: {\n\t\tid?: string;\n\t\tclassName?: string;\n\t\tisPressed?: boolean;\n\t},\n\tforwardedRef: ForwardedRef< any >\n) {\n\treturn <Button { ...props } ref={ forwardedRef }></Button>;\n}\n\nconst OptionAsButton = forwardRef( UnforwardedOptionAsButton );\n\nfunction UnforwardedOptionAsOption(\n\tprops: {\n\t\tid: string;\n\t\tclassName?: string;\n\t\tisSelected?: boolean;\n\t\tcontext: CircularOptionPickerContextProps;\n\t},\n\tforwardedRef: ForwardedRef< any >\n) {\n\tconst { id, className, isSelected, context, ...additionalProps } = props;\n\tconst { isComposite, ..._compositeState } = context;\n\tconst compositeState =\n\t\t_compositeState as CircularOptionPickerCompositeState;\n\tconst { baseId, currentId, setCurrentId } = compositeState;\n\n\tuseEffect( () => {\n\t\t// If we call `setCurrentId` here, it doesn't update for other\n\t\t// Option renders in the same pass. So we have to store our own\n\t\t// map to make sure that we only set the first selected option.\n\t\t// We still need to check `currentId` because the control will\n\t\t// update this as the user moves around, and that state should\n\t\t// be maintained as the group gains and loses focus.\n\t\tif ( isSelected && ! currentId && ! hasSelectedOption.get( baseId ) ) {\n\t\t\thasSelectedOption.set( baseId, true );\n\t\t\tsetCurrentId( id );\n\t\t}\n\t}, [ baseId, currentId, id, isSelected, setCurrentId ] );\n\n\treturn (\n\t\t<CompositeItem\n\t\t\t{ ...additionalProps }\n\t\t\t{ ...compositeState }\n\t\t\tas={ Button }\n\t\t\tid={ id }\n\t\t\t// Ideally we'd let the underlying `Button` component\n\t\t\t// handle this by passing `isPressed` as a prop.\n\t\t\t// Unfortunately doing so also sets `aria-pressed` as\n\t\t\t// an attribute on the element, which is incompatible\n\t\t\t// with `role=\"option\"`, and there is no way at this\n\t\t\t// point to override that behaviour.\n\t\t\tclassName={ classnames( className, {\n\t\t\t\t'is-pressed': isSelected,\n\t\t\t} ) }\n\t\t\trole=\"option\"\n\t\t\taria-selected={ !! isSelected }\n\t\t\tref={ forwardedRef }\n\t\t/>\n\t);\n}\n\nconst OptionAsOption = forwardRef( UnforwardedOptionAsOption );\n\nexport function Option( {\n\tclassName,\n\tisSelected,\n\tselectedIconProps = {},\n\ttooltipText,\n\t...additionalProps\n}: OptionProps ) {\n\tconst compositeContext = useContext( CircularOptionPickerContext );\n\tconst { isComposite, baseId } = compositeContext;\n\tconst id = useInstanceId(\n\t\tOption,\n\t\tbaseId || 'components-circular-option-picker__option'\n\t);\n\n\tconst commonProps = {\n\t\tid,\n\t\tclassName: 'components-circular-option-picker__option',\n\t\t...additionalProps,\n\t};\n\n\tconst optionControl = isComposite ? (\n\t\t<OptionAsOption\n\t\t\t{ ...commonProps }\n\t\t\tcontext={ compositeContext }\n\t\t\tisSelected={ isSelected }\n\t\t/>\n\t) : (\n\t\t<OptionAsButton { ...commonProps } isPressed={ isSelected } />\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\tclassName,\n\t\t\t\t'components-circular-option-picker__option-wrapper'\n\t\t\t) }\n\t\t>\n\t\t\t{ tooltipText ? (\n\t\t\t\t<Tooltip text={ tooltipText }>{ optionControl }</Tooltip>\n\t\t\t) : (\n\t\t\t\toptionControl\n\t\t\t) }\n\t\t\t{ isSelected && <Icon icon={ check } { ...selectedIconProps } /> }\n\t\t</div>\n\t);\n}\n"],"mappings":"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"}