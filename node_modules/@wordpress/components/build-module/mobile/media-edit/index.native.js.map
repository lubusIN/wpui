{"version":3,"names":["Component","__","Picker","requestMediaEditor","mediaSources","MEDIA_TYPE_IMAGE","MEDIA_EDITOR","editOption","id","value","label","requiresModal","types","replaceOption","deviceLibrary","MediaEdit","constructor","props","onPickerPresent","bind","onPickerSelect","getMediaOptionsItems","getDestructiveButtonIndex","pickerOptions","openReplaceMediaOptions","source","uri","filter","Boolean","options","destructiveButtonIndex","findIndex","option","destructiveButton","undefined","picker","presentPicker","onSelect","multiple","media","optionSelected","find","onPress","render","mediaOptions","createElement","hideCancelButton","ref","instance","leftAlign","onChange","title","open"],"sources":["@wordpress/components/src/mobile/media-edit/index.native.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Picker } from '@wordpress/components';\nimport {\n\trequestMediaEditor,\n\tmediaSources,\n} from '@wordpress/react-native-bridge';\n\nexport const MEDIA_TYPE_IMAGE = 'image';\n\nexport const MEDIA_EDITOR = 'MEDIA_EDITOR';\n\nconst editOption = {\n\tid: MEDIA_EDITOR,\n\tvalue: MEDIA_EDITOR,\n\tlabel: __( 'Edit' ),\n\trequiresModal: true,\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nconst replaceOption = {\n\tid: mediaSources.deviceLibrary,\n\tvalue: mediaSources.deviceLibrary,\n\tlabel: __( 'Replace' ),\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nexport class MediaEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onPickerPresent = this.onPickerPresent.bind( this );\n\t\tthis.onPickerSelect = this.onPickerSelect.bind( this );\n\t\tthis.getMediaOptionsItems = this.getMediaOptionsItems.bind( this );\n\t\tthis.getDestructiveButtonIndex =\n\t\t\tthis.getDestructiveButtonIndex.bind( this );\n\t}\n\n\tgetMediaOptionsItems() {\n\t\tconst { pickerOptions, openReplaceMediaOptions, source } = this.props;\n\n\t\treturn [\n\t\t\tsource?.uri && editOption,\n\t\t\topenReplaceMediaOptions && replaceOption,\n\t\t\t...( pickerOptions ? pickerOptions : [] ),\n\t\t].filter( Boolean );\n\t}\n\n\tgetDestructiveButtonIndex() {\n\t\tconst options = this.getMediaOptionsItems();\n\t\tconst destructiveButtonIndex = options.findIndex(\n\t\t\t( option ) => option?.destructiveButton\n\t\t);\n\n\t\treturn destructiveButtonIndex !== -1\n\t\t\t? destructiveButtonIndex + 1\n\t\t\t: undefined;\n\t}\n\n\tonPickerPresent() {\n\t\tif ( this.picker ) {\n\t\t\tthis.picker.presentPicker();\n\t\t}\n\t}\n\n\tonPickerSelect( value ) {\n\t\tconst {\n\t\t\tonSelect,\n\t\t\tpickerOptions,\n\t\t\tmultiple = false,\n\t\t\topenReplaceMediaOptions,\n\t\t} = this.props;\n\n\t\tswitch ( value ) {\n\t\t\tcase MEDIA_EDITOR:\n\t\t\t\trequestMediaEditor( this.props.source.uri, ( media ) => {\n\t\t\t\t\tif ( ( multiple && media ) || ( media && media.id ) ) {\n\t\t\t\t\t\tonSelect( media );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconst optionSelected =\n\t\t\t\t\tpickerOptions &&\n\t\t\t\t\tpickerOptions.find( ( option ) => option.id === value );\n\n\t\t\t\tif ( optionSelected && optionSelected.onPress ) {\n\t\t\t\t\toptionSelected.onPress();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( openReplaceMediaOptions ) {\n\t\t\t\t\topenReplaceMediaOptions();\n\t\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst mediaOptions = () => (\n\t\t\t<Picker\n\t\t\t\thideCancelButton\n\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\n\t\t\t\toptions={ this.getMediaOptionsItems() }\n\t\t\t\tleftAlign={ true }\n\t\t\t\tonChange={ this.onPickerSelect }\n\t\t\t\t// translators: %s: block title e.g: \"Paragraph\".\n\t\t\t\ttitle={ __( 'Media options' ) }\n\t\t\t\tdestructiveButtonIndex={ this.getDestructiveButtonIndex() }\n\t\t\t/>\n\t\t);\n\n\t\treturn this.props.render( {\n\t\t\topen: this.onPickerPresent,\n\t\t\tmediaOptions,\n\t\t} );\n\t}\n}\n\nexport default MediaEdit;\n"],"mappings":"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"}