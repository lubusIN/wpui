{"version":3,"names":["matcherHint","printExpected","printReceived","supportedMatchers","createErrorMessage","spyInfo","spy","pass","calls","matcherName","methodName","expected","hint","message","map","getMockName","createSpyInfo","mock","JSON","stringify","includes","length","createToHaveBeenCalledMatcher","received","assertionsNumber","createToHaveBeenCalledWith","expect","extend","Object","entries","reduce","result","matcherNameWith"],"sources":["@wordpress/jest-console/src/matchers.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { matcherHint, printExpected, printReceived } from 'jest-matcher-utils';\n\n/**\n * Internal dependencies\n */\nimport supportedMatchers from './supported-matchers';\n\nconst createErrorMessage = ( spyInfo ) => {\n\tconst { spy, pass, calls, matcherName, methodName, expected } = spyInfo;\n\tconst hint = pass ? `.not${ matcherName }` : matcherName;\n\tconst message = pass\n\t\t? `Expected mock function not to be called but it was called with:\\n${ calls.map(\n\t\t\t\tprintReceived\n\t\t  ) }`\n\t\t: `Expected mock function to be called${\n\t\t\t\texpected ? ` with:\\n${ printExpected( expected ) }\\n` : '.'\n\t\t  }\\nbut it was called with:\\n${ calls.map( printReceived ) }`;\n\n\treturn () =>\n\t\t`${ matcherHint( hint, spy.getMockName() ) }` +\n\t\t'\\n\\n' +\n\t\tmessage +\n\t\t'\\n\\n' +\n\t\t`console.${ methodName }() should not be used unless explicitly expected\\n` +\n\t\t'See https://www.npmjs.com/package/@wordpress/jest-console for details.';\n};\n\nconst createSpyInfo = ( spy, matcherName, methodName, expected ) => {\n\tconst calls = spy.mock.calls;\n\n\tconst pass = expected\n\t\t? JSON.stringify( calls ).includes( JSON.stringify( expected ) )\n\t\t: calls.length > 0;\n\n\tconst message = createErrorMessage( {\n\t\tspy,\n\t\tpass,\n\t\tcalls,\n\t\tmatcherName,\n\t\tmethodName,\n\t\texpected,\n\t} );\n\n\treturn {\n\t\tpass,\n\t\tmessage,\n\t};\n};\n\nconst createToHaveBeenCalledMatcher =\n\t( matcherName, methodName ) => ( received ) => {\n\t\tconst spy = received[ methodName ];\n\t\tconst spyInfo = createSpyInfo( spy, matcherName, methodName );\n\n\t\tspy.assertionsNumber += 1;\n\n\t\treturn spyInfo;\n\t};\n\nconst createToHaveBeenCalledWith = ( matcherName, methodName ) =>\n\tfunction ( received, ...expected ) {\n\t\tconst spy = received[ methodName ];\n\t\tconst spyInfo = createSpyInfo( spy, matcherName, methodName, expected );\n\n\t\tspy.assertionsNumber += 1;\n\n\t\treturn spyInfo;\n\t};\n\nexpect.extend(\n\tObject.entries( supportedMatchers ).reduce(\n\t\t( result, [ methodName, matcherName ] ) => {\n\t\t\tconst matcherNameWith = `${ matcherName }With`;\n\n\t\t\treturn {\n\t\t\t\t...result,\n\t\t\t\t[ matcherName ]: createToHaveBeenCalledMatcher(\n\t\t\t\t\t`.${ matcherName }`,\n\t\t\t\t\tmethodName\n\t\t\t\t),\n\t\t\t\t[ matcherNameWith ]: createToHaveBeenCalledWith(\n\t\t\t\t\t`.${ matcherNameWith }`,\n\t\t\t\t\tmethodName\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t{}\n\t)\n);\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,EAAEC,aAAa,EAAEC,aAAa,QAAQ,oBAAoB;;AAE9E;AACA;AACA;AACA,OAAOC,iBAAiB,MAAM,sBAAsB;AAEpD,MAAMC,kBAAkB,GAAKC,OAAO,IAAM;EACzC,MAAM;IAAEC,GAAG;IAAEC,IAAI;IAAEC,KAAK;IAAEC,WAAW;IAAEC,UAAU;IAAEC;EAAS,CAAC,GAAGN,OAAO;EACvE,MAAMO,IAAI,GAAGL,IAAI,GAAI,OAAOE,WAAa,EAAC,GAAGA,WAAW;EACxD,MAAMI,OAAO,GAAGN,IAAI,GAChB,oEAAoEC,KAAK,CAACM,GAAG,CAC9EZ,aACA,CAAG,EAAC,GACH,sCACDS,QAAQ,GAAI,WAAWV,aAAa,CAAEU,QAAS,CAAG,IAAG,GAAG,GACvD,8BAA8BH,KAAK,CAACM,GAAG,CAAEZ,aAAc,CAAG,EAAC;EAE/D,OAAO,MACL,GAAGF,WAAW,CAAEY,IAAI,EAAEN,GAAG,CAACS,WAAW,CAAC,CAAE,CAAG,EAAC,GAC7C,MAAM,GACNF,OAAO,GACP,MAAM,GACL,WAAWH,UAAY,oDAAmD,GAC3E,wEAAwE;AAC1E,CAAC;AAED,MAAMM,aAAa,GAAGA,CAAEV,GAAG,EAAEG,WAAW,EAAEC,UAAU,EAAEC,QAAQ,KAAM;EACnE,MAAMH,KAAK,GAAGF,GAAG,CAACW,IAAI,CAACT,KAAK;EAE5B,MAAMD,IAAI,GAAGI,QAAQ,GAClBO,IAAI,CAACC,SAAS,CAAEX,KAAM,CAAC,CAACY,QAAQ,CAAEF,IAAI,CAACC,SAAS,CAAER,QAAS,CAAE,CAAC,GAC9DH,KAAK,CAACa,MAAM,GAAG,CAAC;EAEnB,MAAMR,OAAO,GAAGT,kBAAkB,CAAE;IACnCE,GAAG;IACHC,IAAI;IACJC,KAAK;IACLC,WAAW;IACXC,UAAU;IACVC;EACD,CAAE,CAAC;EAEH,OAAO;IACNJ,IAAI;IACJM;EACD,CAAC;AACF,CAAC;AAED,MAAMS,6BAA6B,GAClCA,CAAEb,WAAW,EAAEC,UAAU,KAAQa,QAAQ,IAAM;EAC9C,MAAMjB,GAAG,GAAGiB,QAAQ,CAAEb,UAAU,CAAE;EAClC,MAAML,OAAO,GAAGW,aAAa,CAAEV,GAAG,EAAEG,WAAW,EAAEC,UAAW,CAAC;EAE7DJ,GAAG,CAACkB,gBAAgB,IAAI,CAAC;EAEzB,OAAOnB,OAAO;AACf,CAAC;AAEF,MAAMoB,0BAA0B,GAAGA,CAAEhB,WAAW,EAAEC,UAAU,KAC3D,UAAWa,QAAQ,EAAE,GAAGZ,QAAQ,EAAG;EAClC,MAAML,GAAG,GAAGiB,QAAQ,CAAEb,UAAU,CAAE;EAClC,MAAML,OAAO,GAAGW,aAAa,CAAEV,GAAG,EAAEG,WAAW,EAAEC,UAAU,EAAEC,QAAS,CAAC;EAEvEL,GAAG,CAACkB,gBAAgB,IAAI,CAAC;EAEzB,OAAOnB,OAAO;AACf,CAAC;AAEFqB,MAAM,CAACC,MAAM,CACZC,MAAM,CAACC,OAAO,CAAE1B,iBAAkB,CAAC,CAAC2B,MAAM,CACzC,CAAEC,MAAM,EAAE,CAAErB,UAAU,EAAED,WAAW,CAAE,KAAM;EAC1C,MAAMuB,eAAe,GAAI,GAAGvB,WAAa,MAAK;EAE9C,OAAO;IACN,GAAGsB,MAAM;IACT,CAAEtB,WAAW,GAAIa,6BAA6B,CAC5C,IAAIb,WAAa,EAAC,EACnBC,UACD,CAAC;IACD,CAAEsB,eAAe,GAAIP,0BAA0B,CAC7C,IAAIO,eAAiB,EAAC,EACvBtB,UACD;EACD,CAAC;AACF,CAAC,EACD,CAAC,CACF,CACD,CAAC"}