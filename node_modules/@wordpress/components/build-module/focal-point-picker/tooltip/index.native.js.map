{"version":3,"names":["Animated","Easing","PanResponder","Text","View","createContext","useEffect","useRef","useState","useContext","styles","TooltipContext","Tooltip","children","onPress","style","visible","panResponder","create","onStartShouldSetPanResponderCapture","current","createElement","Provider","value","panHandlers","Label","align","text","xOffset","yOffset","animationValue","Value","dimensions","setDimensions","Error","startAnimation","timing","toValue","duration","useNativeDriver","delay","easing","out","quad","start","tooltipTransforms","translateX","width","translateY","height","tooltipStyles","tooltip","shadowColor","tooltipShadow","color","shadowOffset","shadowOpacity","shadowRadius","elevation","transform","tooltipLeftAlign","arrowStyles","arrow","arrowLeftAlign","opacity","interpolate","inputRange","outputRange","onLayout","nativeEvent","layout","defaultProps"],"sources":["@wordpress/components/src/focal-point-picker/tooltip/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Animated, Easing, PanResponder, Text, View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tcreateContext,\n\tuseEffect,\n\tuseRef,\n\tuseState,\n\tuseContext,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst TooltipContext = createContext();\n\nfunction Tooltip( { children, onPress, style, visible } ) {\n\tconst panResponder = useRef(\n\t\tPanResponder.create( {\n\t\t\t/**\n\t\t\t * To allow dimissing the tooltip on press while also avoiding blocking\n\t\t\t * interactivity within the child context, we place this `onPress` side\n\t\t\t * effect within the `onStartShouldSetPanResponderCapture` callback.\n\t\t\t *\n\t\t\t * This is a bit unorthodox, but may be the simplest approach to achieving\n\t\t\t * this outcome. This is effectively a gesture responder that never\n\t\t\t * becomes the controlling responder. https://bit.ly/2J3ugKF\n\t\t\t */\n\t\t\tonStartShouldSetPanResponderCapture: () => {\n\t\t\t\tif ( onPress ) {\n\t\t\t\t\tonPress();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t} )\n\t).current;\n\n\treturn (\n\t\t<TooltipContext.Provider value={ visible }>\n\t\t\t<View\n\t\t\t\t{ ...( visible ? panResponder.panHandlers : {} ) }\n\t\t\t\tstyle={ style }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</View>\n\t\t</TooltipContext.Provider>\n\t);\n}\n\nfunction Label( { align, text, xOffset, yOffset } ) {\n\tconst animationValue = useRef( new Animated.Value( 0 ) ).current;\n\tconst [ dimensions, setDimensions ] = useState( null );\n\tconst visible = useContext( TooltipContext );\n\n\tif ( typeof visible === 'undefined' ) {\n\t\tthrow new Error(\n\t\t\t'Tooltip.Label cannot be rendered outside of the Tooltip component'\n\t\t);\n\t}\n\n\tuseEffect( () => {\n\t\tconst startAnimation = () => {\n\t\t\tAnimated.timing( animationValue, {\n\t\t\t\ttoValue: visible ? 1 : 0,\n\t\t\t\tduration: visible ? 300 : 150,\n\t\t\t\tuseNativeDriver: true,\n\t\t\t\tdelay: visible ? 500 : 0,\n\t\t\t\teasing: Easing.out( Easing.quad ),\n\t\t\t} ).start();\n\t\t};\n\t\tstartAnimation();\n\t}, [ animationValue, visible ] );\n\n\t// Transforms rely upon onLayout to enable custom offsets additions.\n\tlet tooltipTransforms;\n\tif ( dimensions ) {\n\t\ttooltipTransforms = [\n\t\t\t{\n\t\t\t\ttranslateX:\n\t\t\t\t\t( align === 'center' ? -dimensions.width / 2 : 0 ) +\n\t\t\t\t\txOffset,\n\t\t\t},\n\t\t\t{ translateY: -dimensions.height + yOffset },\n\t\t];\n\t}\n\n\tconst tooltipStyles = [\n\t\tstyles.tooltip,\n\t\t{\n\t\t\tshadowColor: styles.tooltipShadow?.color,\n\t\t\tshadowOffset: {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 2,\n\t\t\t},\n\t\t\tshadowOpacity: 0.25,\n\t\t\tshadowRadius: 2,\n\t\t\televation: 2,\n\t\t\ttransform: tooltipTransforms,\n\t\t},\n\t\talign === 'left' && styles.tooltipLeftAlign,\n\t];\n\tconst arrowStyles = [\n\t\tstyles.arrow,\n\t\talign === 'left' && styles.arrowLeftAlign,\n\t];\n\n\treturn (\n\t\t<Animated.View\n\t\t\tstyle={ {\n\t\t\t\topacity: animationValue,\n\t\t\t\ttransform: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttranslateY: animationValue.interpolate( {\n\t\t\t\t\t\t\tinputRange: [ 0, 1 ],\n\t\t\t\t\t\t\toutputRange: [ visible ? 4 : -8, -8 ],\n\t\t\t\t\t\t} ),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t} }\n\t\t>\n\t\t\t<View\n\t\t\t\tonLayout={ ( { nativeEvent } ) => {\n\t\t\t\t\tconst { height, width } = nativeEvent.layout;\n\t\t\t\t\tsetDimensions( { height, width } );\n\t\t\t\t} }\n\t\t\t\tstyle={ tooltipStyles }\n\t\t\t>\n\t\t\t\t<Text style={ styles.text }>{ text }</Text>\n\t\t\t\t<View style={ arrowStyles } />\n\t\t\t</View>\n\t\t</Animated.View>\n\t);\n}\n\nLabel.defaultProps = {\n\talign: 'center',\n\txOffset: 0,\n\tyOffset: 0,\n};\n\nTooltip.Label = Label;\n\nexport default Tooltip;\n"],"mappings":"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"}