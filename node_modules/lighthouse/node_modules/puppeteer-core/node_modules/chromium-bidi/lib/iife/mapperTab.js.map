{"version":3,"file":"mapperTab.js","sources":["../../node_modules/zod/lib/helpers/util.js","../../node_modules/zod/lib/ZodError.js","../../node_modules/zod/lib/locales/en.js","../../node_modules/zod/lib/errors.js","../../node_modules/zod/lib/helpers/parseUtil.js","../../node_modules/zod/lib/helpers/typeAliases.js","../../node_modules/zod/lib/helpers/errorUtil.js","../../node_modules/zod/lib/types.js","../../node_modules/zod/lib/external.js","../../node_modules/zod/lib/index.js","../cjs/protocol/protocol.js","../cjs/protocol-parser/protocol-parser.js","../cjs/utils/EventEmitter.js","../../node_modules/mitt/dist/mitt.js","../cjs/utils/log.js","../cjs/utils/processingQueue.js","../cjs/utils/assert.js","../cjs/utils/Mutex.js","../cjs/bidiMapper/domains/input/InputSource.js","../cjs/bidiMapper/domains/input/InputState.js","../cjs/bidiMapper/domains/input/InputStateManager.js","../cjs/bidiMapper/domains/input/USKeyboardLayout.js","../cjs/bidiMapper/domains/input/keyUtils.js","../cjs/bidiMapper/domains/input/ActionDispatcher.js","../cjs/bidiMapper/domains/context/PreloadScriptStorage.js","../cjs/utils/unitConversions.js","../cjs/utils/deferred.js","../cjs/utils/uuid.js","../cjs/bidiMapper/domains/script/channelProxy.js","../cjs/bidiMapper/domains/script/scriptEvaluator.js","../cjs/bidiMapper/domains/script/realm.js","../cjs/bidiMapper/domains/context/browsingContextImpl.js","../cjs/bidiMapper/domains/log/logHelper.js","../cjs/bidiMapper/domains/log/logManager.js","../cjs/utils/DefaultMap.js","../cjs/bidiMapper/domains/network/networkRequest.js","../cjs/bidiMapper/domains/network/networkProcessor.js","../cjs/bidiMapper/domains/context/cdpTarget.js","../cjs/bidiMapper/domains/context/bidiPreloadScript.js","../cjs/bidiMapper/domains/context/browsingContextProcessor.js","../cjs/bidiMapper/OutgoingBidiMessage.js","../cjs/bidiMapper/CommandProcessor.js","../cjs/bidiMapper/domains/context/browsingContextStorage.js","../cjs/utils/buffer.js","../cjs/utils/idWrapper.js","../cjs/bidiMapper/domains/events/SubscriptionManager.js","../cjs/bidiMapper/domains/events/EventManager.js","../cjs/bidiMapper/domains/script/realmStorage.js","../cjs/bidiMapper/BidiServer.js","../cjs/bidiMapper/bidiMapper.js","../cjs/cdp/cdpClient.js","../cjs/cdp/cdpConnection.js","../cjs/bidiTab/mapperTabPage.js","../cjs/bidiTab/bidiTab.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getParsedType = exports.ZodParsedType = exports.objectUtil = exports.util = void 0;\nvar util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\"\n        ? (obj) => Object.keys(obj)\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val)\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util = exports.util || (exports.util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second,\n        };\n    };\n})(objectUtil = exports.objectUtil || (exports.objectUtil = {}));\nexports.ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return exports.ZodParsedType.undefined;\n        case \"string\":\n            return exports.ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? exports.ZodParsedType.nan : exports.ZodParsedType.number;\n        case \"boolean\":\n            return exports.ZodParsedType.boolean;\n        case \"function\":\n            return exports.ZodParsedType.function;\n        case \"bigint\":\n            return exports.ZodParsedType.bigint;\n        case \"symbol\":\n            return exports.ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return exports.ZodParsedType.array;\n            }\n            if (data === null) {\n                return exports.ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return exports.ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return exports.ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return exports.ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return exports.ZodParsedType.date;\n            }\n            return exports.ZodParsedType.object;\n        default:\n            return exports.ZodParsedType.unknown;\n    }\n};\nexports.getParsedType = getParsedType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ZodError = exports.quotelessJson = exports.ZodIssueCode = void 0;\nconst util_1 = require(\"./helpers/util\");\nexports.ZodIssueCode = util_1.util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexports.quotelessJson = quotelessJson;\nclass ZodError extends Error {\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    get errors() {\n        return this.issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util_1.util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nexports.ZodError = ZodError;\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../helpers/util\");\nconst ZodError_1 = require(\"../ZodError\");\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodError_1.ZodIssueCode.invalid_type:\n            if (issue.received === util_1.ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodError_1.ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util_1.util.jsonStringifyReplacer)}`;\n            break;\n        case ZodError_1.ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util_1.util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util_1.util.joinValues(issue.options)}`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util_1.util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util_1.util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodError_1.ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodError_1.ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `smaller than or equal to`\n                        : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodError_1.ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodError_1.ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodError_1.ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodError_1.ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util_1.util.assertNever(issue);\n    }\n    return { message };\n};\nexports.default = errorMap;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getErrorMap = exports.setErrorMap = exports.defaultErrorMap = void 0;\nconst en_1 = __importDefault(require(\"./locales/en\"));\nexports.defaultErrorMap = en_1.default;\nlet overrideErrorMap = en_1.default;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexports.setErrorMap = setErrorMap;\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\nexports.getErrorMap = getErrorMap;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isAsync = exports.isValid = exports.isDirty = exports.isAborted = exports.OK = exports.DIRTY = exports.INVALID = exports.ParseStatus = exports.addIssueToContext = exports.EMPTY_PATH = exports.makeIssue = void 0;\nconst errors_1 = require(\"../errors\");\nconst en_1 = __importDefault(require(\"../locales/en\"));\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: issueData.message || errorMessage,\n    };\n};\nexports.makeIssue = makeIssue;\nexports.EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const issue = (0, exports.makeIssue)({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap,\n            ctx.schemaErrorMap,\n            (0, errors_1.getErrorMap)(),\n            en_1.default,\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexports.addIssueToContext = addIssueToContext;\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return exports.INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            syncPairs.push({\n                key: await pair.key,\n                value: await pair.value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return exports.INVALID;\n            if (value.status === \"aborted\")\n                return exports.INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (typeof value.value !== \"undefined\" || pair.alwaysSet) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexports.ParseStatus = ParseStatus;\nexports.INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nexports.DIRTY = DIRTY;\nconst OK = (value) => ({ status: \"valid\", value });\nexports.OK = OK;\nconst isAborted = (x) => x.status === \"aborted\";\nexports.isAborted = isAborted;\nconst isDirty = (x) => x.status === \"dirty\";\nexports.isDirty = isDirty;\nconst isValid = (x) => x.status === \"valid\";\nexports.isValid = isValid;\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\nexports.isAsync = isAsync;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.errorUtil = void 0;\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil = exports.errorUtil || (exports.errorUtil = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.discriminatedUnion = exports.date = exports.boolean = exports.bigint = exports.array = exports.any = exports.coerce = exports.ZodFirstPartyTypeKind = exports.late = exports.ZodSchema = exports.Schema = exports.custom = exports.ZodPipeline = exports.ZodBranded = exports.BRAND = exports.ZodNaN = exports.ZodCatch = exports.ZodDefault = exports.ZodNullable = exports.ZodOptional = exports.ZodTransformer = exports.ZodEffects = exports.ZodPromise = exports.ZodNativeEnum = exports.ZodEnum = exports.ZodLiteral = exports.ZodLazy = exports.ZodFunction = exports.ZodSet = exports.ZodMap = exports.ZodRecord = exports.ZodTuple = exports.ZodIntersection = exports.ZodDiscriminatedUnion = exports.ZodUnion = exports.ZodObject = exports.ZodArray = exports.ZodVoid = exports.ZodNever = exports.ZodUnknown = exports.ZodAny = exports.ZodNull = exports.ZodUndefined = exports.ZodSymbol = exports.ZodDate = exports.ZodBoolean = exports.ZodBigInt = exports.ZodNumber = exports.ZodString = exports.ZodType = void 0;\nexports.NEVER = exports.void = exports.unknown = exports.union = exports.undefined = exports.tuple = exports.transformer = exports.symbol = exports.string = exports.strictObject = exports.set = exports.record = exports.promise = exports.preprocess = exports.pipeline = exports.ostring = exports.optional = exports.onumber = exports.oboolean = exports.object = exports.number = exports.nullable = exports.null = exports.never = exports.nativeEnum = exports.nan = exports.map = exports.literal = exports.lazy = exports.intersection = exports.instanceof = exports.function = exports.enum = exports.effect = void 0;\nconst errors_1 = require(\"./errors\");\nconst errorUtil_1 = require(\"./helpers/errorUtil\");\nconst parseUtil_1 = require(\"./helpers/parseUtil\");\nconst util_1 = require(\"./helpers/util\");\nconst ZodError_1 = require(\"./ZodError\");\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (this._key instanceof Array) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if ((0, parseUtil_1.isValid)(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError_1.ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        if (typeof ctx.data === \"undefined\") {\n            return { message: required_error !== null && required_error !== void 0 ? required_error : ctx.defaultError };\n        }\n        return { message: invalid_type_error !== null && invalid_type_error !== void 0 ? invalid_type_error : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    constructor(def) {\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n    }\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return (0, util_1.getParsedType)(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: (0, util_1.getParsedType)(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new parseUtil_1.ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: (0, util_1.getParsedType)(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if ((0, parseUtil_1.isAsync)(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: (0, util_1.getParsedType)(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: (0, util_1.getParsedType)(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await ((0, parseUtil_1.isAsync)(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodError_1.ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this, this._def);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nexports.ZodType = ZodType;\nexports.Schema = ZodType;\nexports.ZodSchema = ZodType;\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[a-z][a-z0-9]*$/;\nconst ulidRegex = /[0-9A-HJKMNP-TV-Z]{26}/;\nconst uuidRegex = /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\nconst emojiRegex = /^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$/u;\nconst ipv4Regex = /^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/;\nconst ipv6Regex = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst datetimeRegex = (args) => {\n    if (args.precision) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}Z$`);\n        }\n    }\n    else if (args.precision === 0) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}Z$`);\n        }\n    }\n    else {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?Z$`);\n        }\n    }\n};\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._regex = (regex, validation, message) => this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodError_1.ZodIssueCode.invalid_string,\n            ...errorUtil_1.errorUtil.errToObj(message),\n        });\n        this.nonempty = (message) => this.min(1, errorUtil_1.errorUtil.errToObj(message));\n        this.trim = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n        this.toLowerCase = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n        this.toUpperCase = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const status = new parseUtil_1.ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        (0, parseUtil_1.addIssueToContext)(ctx, {\n                            code: ZodError_1.ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        (0, parseUtil_1.addIssueToContext)(ctx, {\n                            code: ZodError_1.ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"email\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"emoji\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"uuid\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"cuid\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"ulid\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"url\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"regex\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        validation: \"ip\",\n                        code: ZodError_1.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util_1.util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil_1.errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil_1.errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil_1.errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil_1.errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil_1.errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil_1.errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil_1.errorUtil.errToObj(message) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil_1.errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        var _a;\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n            ...errorUtil_1.errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil_1.errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options === null || options === void 0 ? void 0 : options.position,\n            ...errorUtil_1.errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil_1.errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil_1.errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil_1.errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil_1.errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil_1.errorUtil.errToObj(message),\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nexports.ZodString = ZodString;\nZodString.create = (params) => {\n    var _a;\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        let ctx = undefined;\n        const status = new parseUtil_1.ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util_1.util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util_1.util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil_1.errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil_1.errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil_1.errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil_1.errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil_1.errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil_1.errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" ||\n            (ch.kind === \"multipleOf\" && util_1.util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null, min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" ||\n                ch.kind === \"int\" ||\n                ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nexports.ZodNumber = ZodNumber;\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = BigInt(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.bigint) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.bigint,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        let ctx = undefined;\n        const status = new parseUtil_1.ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util_1.util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil_1.errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil_1.errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil_1.errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil_1.errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil_1.errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nexports.ZodBigInt = ZodBigInt;\nZodBigInt.create = (params) => {\n    var _a;\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return (0, parseUtil_1.OK)(input.data);\n    }\n}\nexports.ZodBoolean = ZodBoolean;\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_date,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const status = new parseUtil_1.ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util_1.util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil_1.errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nexports.ZodDate = ZodDate;\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return (0, parseUtil_1.OK)(input.data);\n    }\n}\nexports.ZodSymbol = ZodSymbol;\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return (0, parseUtil_1.OK)(input.data);\n    }\n}\nexports.ZodUndefined = ZodUndefined;\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return (0, parseUtil_1.OK)(input.data);\n    }\n}\nexports.ZodNull = ZodNull;\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._any = true;\n    }\n    _parse(input) {\n        return (0, parseUtil_1.OK)(input.data);\n    }\n}\nexports.ZodAny = ZodAny;\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._unknown = true;\n    }\n    _parse(input) {\n        return (0, parseUtil_1.OK)(input.data);\n    }\n}\nexports.ZodUnknown = ZodUnknown;\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        (0, parseUtil_1.addIssueToContext)(ctx, {\n            code: ZodError_1.ZodIssueCode.invalid_type,\n            expected: util_1.ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return parseUtil_1.INVALID;\n    }\n}\nexports.ZodNever = ZodNever;\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return (0, parseUtil_1.OK)(input.data);\n    }\n}\nexports.ZodVoid = ZodVoid;\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== util_1.ZodParsedType.array) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                (0, parseUtil_1.addIssueToContext)(ctx, {\n                    code: tooBig ? ZodError_1.ZodIssueCode.too_big : ZodError_1.ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                (0, parseUtil_1.addIssueToContext)(ctx, {\n                    code: ZodError_1.ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                (0, parseUtil_1.addIssueToContext)(ctx, {\n                    code: ZodError_1.ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return parseUtil_1.ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return parseUtil_1.ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil_1.errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil_1.errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil_1.errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nexports.ZodArray = ZodArray;\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        this.nonstrict = this.passthrough;\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util_1.util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    (0, parseUtil_1.addIssueToContext)(ctx, {\n                        code: ZodError_1.ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    syncPairs.push({\n                        key,\n                        value: await pair.value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return parseUtil_1.ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return parseUtil_1.ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil_1.errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil_1.errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util_1.util.objectKeys(mask).forEach((key) => {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util_1.util.objectKeys(this.shape).forEach((key) => {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        util_1.util.objectKeys(this.shape).forEach((key) => {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        util_1.util.objectKeys(this.shape).forEach((key) => {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util_1.util.objectKeys(this.shape));\n    }\n}\nexports.ZodObject = ZodObject;\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            const unionErrors = results.map((result) => new ZodError_1.ZodError(result.ctx.common.issues));\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return parseUtil_1.INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError_1.ZodError(issues));\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return parseUtil_1.INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nexports.ZodUnion = ZodUnion;\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        return Object.keys(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else {\n        return null;\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.object) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return parseUtil_1.INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    static create(discriminator, options, params) {\n        const optionsMap = new Map();\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nexports.ZodDiscriminatedUnion = ZodDiscriminatedUnion;\nfunction mergeValues(a, b) {\n    const aType = (0, util_1.getParsedType)(a);\n    const bType = (0, util_1.getParsedType)(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === util_1.ZodParsedType.object && bType === util_1.ZodParsedType.object) {\n        const bKeys = util_1.util.objectKeys(b);\n        const sharedKeys = util_1.util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === util_1.ZodParsedType.array && bType === util_1.ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === util_1.ZodParsedType.date &&\n        bType === util_1.ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if ((0, parseUtil_1.isAborted)(parsedLeft) || (0, parseUtil_1.isAborted)(parsedRight)) {\n                return parseUtil_1.INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                (0, parseUtil_1.addIssueToContext)(ctx, {\n                    code: ZodError_1.ZodIssueCode.invalid_intersection_types,\n                });\n                return parseUtil_1.INVALID;\n            }\n            if ((0, parseUtil_1.isDirty)(parsedLeft) || (0, parseUtil_1.isDirty)(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nexports.ZodIntersection = ZodIntersection;\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.array) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return parseUtil_1.INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x);\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return parseUtil_1.ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return parseUtil_1.ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nexports.ZodTuple = ZodTuple;\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.object) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n            });\n        }\n        if (ctx.common.async) {\n            return parseUtil_1.ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return parseUtil_1.ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexports.ZodRecord = ZodRecord;\nclass ZodMap extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.map) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return parseUtil_1.INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return parseUtil_1.INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nexports.ZodMap = ZodMap;\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.set) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                (0, parseUtil_1.addIssueToContext)(ctx, {\n                    code: ZodError_1.ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                (0, parseUtil_1.addIssueToContext)(ctx, {\n                    code: ZodError_1.ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return parseUtil_1.INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil_1.errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil_1.errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nexports.ZodSet = ZodSet;\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.function) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return (0, parseUtil_1.makeIssue)({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    (0, errors_1.getErrorMap)(),\n                    errors_1.defaultErrorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodError_1.ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return (0, parseUtil_1.makeIssue)({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    (0, errors_1.getErrorMap)(),\n                    errors_1.defaultErrorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodError_1.ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            return (0, parseUtil_1.OK)(async (...args) => {\n                const error = new ZodError_1.ZodError([]);\n                const parsedArgs = await this._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await fn(...parsedArgs);\n                const parsedReturns = await this._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            return (0, parseUtil_1.OK)((...args) => {\n                const parsedArgs = this._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError_1.ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = fn(...parsedArgs.data);\n                const parsedReturns = this._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError_1.ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexports.ZodFunction = ZodFunction;\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nexports.ZodLazy = ZodLazy;\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                received: ctx.data,\n                code: ZodError_1.ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nexports.ZodLiteral = ZodLiteral;\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                expected: util_1.util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodError_1.ZodIssueCode.invalid_type,\n            });\n            return parseUtil_1.INVALID;\n        }\n        if (this._def.values.indexOf(input.data) === -1) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                received: ctx.data,\n                code: ZodError_1.ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return (0, parseUtil_1.OK)(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values) {\n        return ZodEnum.create(values);\n    }\n    exclude(values) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)));\n    }\n}\nexports.ZodEnum = ZodEnum;\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util_1.util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.string &&\n            ctx.parsedType !== util_1.ZodParsedType.number) {\n            const expectedValues = util_1.util.objectValues(nativeEnumValues);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                expected: util_1.util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodError_1.ZodIssueCode.invalid_type,\n            });\n            return parseUtil_1.INVALID;\n        }\n        if (nativeEnumValues.indexOf(input.data) === -1) {\n            const expectedValues = util_1.util.objectValues(nativeEnumValues);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                received: ctx.data,\n                code: ZodError_1.ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return (0, parseUtil_1.OK)(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nexports.ZodNativeEnum = ZodNativeEnum;\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== util_1.ZodParsedType.promise &&\n            ctx.common.async === false) {\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        const promisified = ctx.parsedType === util_1.ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return (0, parseUtil_1.OK)(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nexports.ZodPromise = ZodPromise;\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then((processed) => {\n                    return this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                });\n            }\n            else {\n                return this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n        const checkCtx = {\n            addIssue: (arg) => {\n                (0, parseUtil_1.addIssueToContext)(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return parseUtil_1.INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return parseUtil_1.INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!(0, parseUtil_1.isValid)(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!(0, parseUtil_1.isValid)(base))\n                        return base;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util_1.util.assertNever(effect);\n    }\n}\nexports.ZodEffects = ZodEffects;\nexports.ZodTransformer = ZodEffects;\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === util_1.ZodParsedType.undefined) {\n            return (0, parseUtil_1.OK)(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nexports.ZodOptional = ZodOptional;\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === util_1.ZodParsedType.null) {\n            return (0, parseUtil_1.OK)(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nexports.ZodNullable = ZodNullable;\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === util_1.ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nexports.ZodDefault = ZodDefault;\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\"\n            ? params.default\n            : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if ((0, parseUtil_1.isAsync)(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError_1.ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError_1.ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nexports.ZodCatch = ZodCatch;\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== util_1.ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            (0, parseUtil_1.addIssueToContext)(ctx, {\n                code: ZodError_1.ZodIssueCode.invalid_type,\n                expected: util_1.ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return parseUtil_1.INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nexports.ZodNaN = ZodNaN;\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexports.BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexports.ZodBranded = ZodBranded;\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return parseUtil_1.INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return (0, parseUtil_1.DIRTY)(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return parseUtil_1.INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexports.ZodPipeline = ZodPipeline;\nconst custom = (check, params = {}, fatal) => {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            var _a, _b;\n            if (!check(data)) {\n                const p = typeof params === \"function\"\n                    ? params(data)\n                    : typeof params === \"string\"\n                        ? { message: params }\n                        : params;\n                const _fatal = (_b = (_a = p.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                const p2 = typeof p === \"string\" ? { message: p } : p;\n                ctx.addIssue({ code: \"custom\", ...p2, fatal: _fatal });\n            }\n        });\n    return ZodAny.create();\n};\nexports.custom = custom;\nexports.late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n})(ZodFirstPartyTypeKind = exports.ZodFirstPartyTypeKind || (exports.ZodFirstPartyTypeKind = {}));\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (cls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => (0, exports.custom)((data) => data instanceof cls, params);\nexports.instanceof = instanceOfType;\nconst stringType = ZodString.create;\nexports.string = stringType;\nconst numberType = ZodNumber.create;\nexports.number = numberType;\nconst nanType = ZodNaN.create;\nexports.nan = nanType;\nconst bigIntType = ZodBigInt.create;\nexports.bigint = bigIntType;\nconst booleanType = ZodBoolean.create;\nexports.boolean = booleanType;\nconst dateType = ZodDate.create;\nexports.date = dateType;\nconst symbolType = ZodSymbol.create;\nexports.symbol = symbolType;\nconst undefinedType = ZodUndefined.create;\nexports.undefined = undefinedType;\nconst nullType = ZodNull.create;\nexports.null = nullType;\nconst anyType = ZodAny.create;\nexports.any = anyType;\nconst unknownType = ZodUnknown.create;\nexports.unknown = unknownType;\nconst neverType = ZodNever.create;\nexports.never = neverType;\nconst voidType = ZodVoid.create;\nexports.void = voidType;\nconst arrayType = ZodArray.create;\nexports.array = arrayType;\nconst objectType = ZodObject.create;\nexports.object = objectType;\nconst strictObjectType = ZodObject.strictCreate;\nexports.strictObject = strictObjectType;\nconst unionType = ZodUnion.create;\nexports.union = unionType;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nexports.discriminatedUnion = discriminatedUnionType;\nconst intersectionType = ZodIntersection.create;\nexports.intersection = intersectionType;\nconst tupleType = ZodTuple.create;\nexports.tuple = tupleType;\nconst recordType = ZodRecord.create;\nexports.record = recordType;\nconst mapType = ZodMap.create;\nexports.map = mapType;\nconst setType = ZodSet.create;\nexports.set = setType;\nconst functionType = ZodFunction.create;\nexports.function = functionType;\nconst lazyType = ZodLazy.create;\nexports.lazy = lazyType;\nconst literalType = ZodLiteral.create;\nexports.literal = literalType;\nconst enumType = ZodEnum.create;\nexports.enum = enumType;\nconst nativeEnumType = ZodNativeEnum.create;\nexports.nativeEnum = nativeEnumType;\nconst promiseType = ZodPromise.create;\nexports.promise = promiseType;\nconst effectsType = ZodEffects.create;\nexports.effect = effectsType;\nexports.transformer = effectsType;\nconst optionalType = ZodOptional.create;\nexports.optional = optionalType;\nconst nullableType = ZodNullable.create;\nexports.nullable = nullableType;\nconst preprocessType = ZodEffects.createWithPreprocess;\nexports.preprocess = preprocessType;\nconst pipelineType = ZodPipeline.create;\nexports.pipeline = pipelineType;\nconst ostring = () => stringType().optional();\nexports.ostring = ostring;\nconst onumber = () => numberType().optional();\nexports.onumber = onumber;\nconst oboolean = () => booleanType().optional();\nexports.oboolean = oboolean;\nexports.coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexports.NEVER = parseUtil_1.INVALID;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./errors\"), exports);\n__exportStar(require(\"./helpers/parseUtil\"), exports);\n__exportStar(require(\"./helpers/typeAliases\"), exports);\n__exportStar(require(\"./helpers/util\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./ZodError\"), exports);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.z = void 0;\nconst z = __importStar(require(\"./external\"));\nexports.z = z;\n__exportStar(require(\"./external\"), exports);\nexports.default = z;\n","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Input = exports.Network = exports.Log = exports.BrowsingContext = exports.Script = exports.Message = void 0;\n// keep-sorted end\nvar Message;\n(function (Message) {\n    // keep-sorted end\n    let ErrorCode;\n    (function (ErrorCode) {\n        // keep-sorted start\n        ErrorCode[\"InvalidArgument\"] = \"invalid argument\";\n        ErrorCode[\"InvalidSessionId\"] = \"invalid session id\";\n        ErrorCode[\"MoveTargetOutOfBounds\"] = \"move target out of bounds\";\n        ErrorCode[\"NoSuchAlert\"] = \"no such alert\";\n        ErrorCode[\"NoSuchElement\"] = \"no such element\";\n        ErrorCode[\"NoSuchFrame\"] = \"no such frame\";\n        ErrorCode[\"NoSuchHandle\"] = \"no such handle\";\n        ErrorCode[\"NoSuchNode\"] = \"no such node\";\n        ErrorCode[\"NoSuchScript\"] = \"no such script\";\n        ErrorCode[\"SessionNotCreated\"] = \"session not created\";\n        ErrorCode[\"UnknownCommand\"] = \"unknown command\";\n        ErrorCode[\"UnknownError\"] = \"unknown error\";\n        ErrorCode[\"UnsupportedOperation\"] = \"unsupported operation\";\n        // keep-sorted end\n    })(ErrorCode = Message.ErrorCode || (Message.ErrorCode = {}));\n    class ErrorResponse {\n        error;\n        message;\n        stacktrace;\n        constructor(error, message, stacktrace) {\n            this.error = error;\n            this.message = message;\n            this.stacktrace = stacktrace;\n        }\n        toErrorResponse(commandId) {\n            return {\n                id: commandId,\n                error: this.error,\n                message: this.message,\n                stacktrace: this.stacktrace,\n            };\n        }\n    }\n    Message.ErrorResponse = ErrorResponse;\n    class InvalidArgumentException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.InvalidArgument, message, stacktrace);\n        }\n    }\n    Message.InvalidArgumentException = InvalidArgumentException;\n    class MoveTargetOutOfBoundsException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.MoveTargetOutOfBounds, message, stacktrace);\n        }\n    }\n    Message.MoveTargetOutOfBoundsException = MoveTargetOutOfBoundsException;\n    class NoSuchHandleException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.NoSuchHandle, message, stacktrace);\n        }\n    }\n    Message.NoSuchHandleException = NoSuchHandleException;\n    class InvalidSessionIdException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.InvalidSessionId, message, stacktrace);\n        }\n    }\n    Message.InvalidSessionIdException = InvalidSessionIdException;\n    class NoSuchAlertException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.NoSuchAlert, message, stacktrace);\n        }\n    }\n    Message.NoSuchAlertException = NoSuchAlertException;\n    class NoSuchFrameException extends ErrorResponse {\n        constructor(message) {\n            super(ErrorCode.NoSuchFrame, message);\n        }\n    }\n    Message.NoSuchFrameException = NoSuchFrameException;\n    class NoSuchNodeException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.NoSuchNode, message, stacktrace);\n        }\n    }\n    Message.NoSuchNodeException = NoSuchNodeException;\n    class NoSuchElementException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.NoSuchElement, message, stacktrace);\n        }\n    }\n    Message.NoSuchElementException = NoSuchElementException;\n    class NoSuchScriptException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.NoSuchScript, message, stacktrace);\n        }\n    }\n    Message.NoSuchScriptException = NoSuchScriptException;\n    class SessionNotCreatedException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.SessionNotCreated, message, stacktrace);\n        }\n    }\n    Message.SessionNotCreatedException = SessionNotCreatedException;\n    class UnknownCommandException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.UnknownCommand, message, stacktrace);\n        }\n    }\n    Message.UnknownCommandException = UnknownCommandException;\n    class UnknownErrorException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.UnknownError, message, stacktrace);\n        }\n    }\n    Message.UnknownErrorException = UnknownErrorException;\n    class UnsupportedOperationException extends ErrorResponse {\n        constructor(message, stacktrace) {\n            super(ErrorCode.UnsupportedOperation, message, stacktrace);\n        }\n    }\n    Message.UnsupportedOperationException = UnsupportedOperationException;\n})(Message = exports.Message || (exports.Message = {}));\n/** @see https://w3c.github.io/webdriver-bidi/#module-script */\nvar Script;\n(function (Script) {\n    let EventNames;\n    (function (EventNames) {\n        // keep-sorted start\n        EventNames[\"MessageEvent\"] = \"script.message\";\n        EventNames[\"RealmCreated\"] = \"script.realmCreated\";\n        EventNames[\"RealmDestroyed\"] = \"script.realmDestroyed\";\n        // keep-sorted end\n    })(EventNames = Script.EventNames || (Script.EventNames = {}));\n    Script.AllEvents = 'script';\n})(Script = exports.Script || (exports.Script = {}));\n// https://w3c.github.io/webdriver-bidi/#module-browsingContext\nvar BrowsingContext;\n(function (BrowsingContext) {\n    let EventNames;\n    (function (EventNames) {\n        // keep-sorted start\n        EventNames[\"ContextCreatedEvent\"] = \"browsingContext.contextCreated\";\n        EventNames[\"ContextDestroyedEvent\"] = \"browsingContext.contextDestroyed\";\n        EventNames[\"DomContentLoadedEvent\"] = \"browsingContext.domContentLoaded\";\n        EventNames[\"FragmentNavigated\"] = \"browsingContext.fragmentNavigated\";\n        EventNames[\"LoadEvent\"] = \"browsingContext.load\";\n        EventNames[\"NavigationStarted\"] = \"browsingContext.navigationStarted\";\n        // keep-sorted end\n    })(EventNames = BrowsingContext.EventNames || (BrowsingContext.EventNames = {}));\n    BrowsingContext.AllEvents = 'browsingContext';\n})(BrowsingContext = exports.BrowsingContext || (exports.BrowsingContext = {}));\n/** @see https://w3c.github.io/webdriver-bidi/#module-log */\nvar Log;\n(function (Log) {\n    Log.AllEvents = 'log';\n    let EventNames;\n    (function (EventNames) {\n        EventNames[\"LogEntryAddedEvent\"] = \"log.entryAdded\";\n    })(EventNames = Log.EventNames || (Log.EventNames = {}));\n})(Log = exports.Log || (exports.Log = {}));\nvar Network;\n(function (Network) {\n    Network.AllEvents = 'network';\n    let EventNames;\n    (function (EventNames) {\n        EventNames[\"BeforeRequestSentEvent\"] = \"network.beforeRequestSent\";\n        EventNames[\"FetchErrorEvent\"] = \"network.fetchError\";\n        EventNames[\"ResponseStartedEvent\"] = \"network.responseStarted\";\n        EventNames[\"ResponseCompletedEvent\"] = \"network.responseCompleted\";\n    })(EventNames = Network.EventNames || (Network.EventNames = {}));\n})(Network = exports.Network || (exports.Network = {}));\n/** @see https://w3c.github.io/webdriver-bidi/#module-input */\nvar Input;\n(function (Input) {\n    let SourceActionsType;\n    (function (SourceActionsType) {\n        SourceActionsType[\"None\"] = \"none\";\n        SourceActionsType[\"Key\"] = \"key\";\n        SourceActionsType[\"Pointer\"] = \"pointer\";\n        SourceActionsType[\"Wheel\"] = \"wheel\";\n    })(SourceActionsType = Input.SourceActionsType || (Input.SourceActionsType = {}));\n    let PointerType;\n    (function (PointerType) {\n        PointerType[\"Mouse\"] = \"mouse\";\n        PointerType[\"Pen\"] = \"pen\";\n        PointerType[\"Touch\"] = \"touch\";\n    })(PointerType = Input.PointerType || (Input.PointerType = {}));\n    let ActionType;\n    (function (ActionType) {\n        ActionType[\"Pause\"] = \"pause\";\n        ActionType[\"KeyDown\"] = \"keyDown\";\n        ActionType[\"KeyUp\"] = \"keyUp\";\n        ActionType[\"PointerUp\"] = \"pointerUp\";\n        ActionType[\"PointerDown\"] = \"pointerDown\";\n        ActionType[\"PointerMove\"] = \"pointerMove\";\n        ActionType[\"Scroll\"] = \"scroll\";\n    })(ActionType = Input.ActionType || (Input.ActionType = {}));\n})(Input = exports.Input || (exports.Input = {}));\n//# sourceMappingURL=protocol.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Input = exports.Session = exports.Cdp = exports.BrowsingContext = exports.Script = exports.CommonDataTypes = exports.parseObject = void 0;\n/**\n * @fileoverview Provides parsing and validator for WebDriver BiDi protocol.\n * Parser types should match the `../protocol` types.\n */\nconst zod_1 = require(\"zod\");\nconst protocol_js_1 = require(\"../protocol/protocol.js\");\nconst MAX_INT = 9007199254740991;\nfunction parseObject(obj, schema) {\n    const parseResult = schema.safeParse(obj);\n    if (parseResult.success) {\n        return parseResult.data;\n    }\n    const errorMessage = parseResult.error.errors\n        .map((e) => `${e.message} in ` +\n        `${e.path.map((p) => JSON.stringify(p)).join('/')}.`)\n        .join(' ');\n    throw new protocol_js_1.Message.InvalidArgumentException(errorMessage);\n}\nexports.parseObject = parseObject;\nconst UnicodeCharacterSchema = zod_1.z.string().refine((value) => {\n    // The spread is a little hack so JS gives us an array of unicode characters\n    // to measure.\n    return [...value].length === 1;\n});\nvar CommonDataTypes;\n(function (CommonDataTypes) {\n    CommonDataTypes.SharedReferenceSchema = zod_1.z.object({\n        sharedId: zod_1.z.string().min(1),\n        handle: zod_1.z.string().optional(),\n    });\n    CommonDataTypes.RemoteReferenceSchema = zod_1.z.object({\n        handle: zod_1.z.string().min(1),\n    });\n    // UndefinedValue = {\n    //   type: \"undefined\",\n    // }\n    const UndefinedValueSchema = zod_1.z.object({ type: zod_1.z.literal('undefined') });\n    // NullValue = {\n    //   type: \"null\",\n    // }\n    const NullValueSchema = zod_1.z.object({ type: zod_1.z.literal('null') });\n    // StringValue = {\n    //   type: \"string\",\n    //   value: text,\n    // }\n    const StringValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('string'),\n        value: zod_1.z.string(),\n    });\n    // SpecialNumber = \"NaN\" / \"-0\" / \"Infinity\" / \"-Infinity\";\n    const SpecialNumberSchema = zod_1.z.enum(['NaN', '-0', 'Infinity', '-Infinity']);\n    // NumberValue = {\n    //   type: \"number\",\n    //   value: number / SpecialNumber,\n    // }\n    const NumberValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('number'),\n        value: zod_1.z.union([SpecialNumberSchema, zod_1.z.number()]),\n    });\n    // BooleanValue = {\n    //   type: \"boolean\",\n    //   value: bool,\n    // }\n    const BooleanValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('boolean'),\n        value: zod_1.z.boolean(),\n    });\n    // BigIntValue = {\n    //   type: \"bigint\",\n    //   value: text,\n    // }\n    const BigIntValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('bigint'),\n        value: zod_1.z.string(),\n    });\n    const PrimitiveProtocolValueSchema = zod_1.z.union([\n        UndefinedValueSchema,\n        NullValueSchema,\n        StringValueSchema,\n        NumberValueSchema,\n        BooleanValueSchema,\n        BigIntValueSchema,\n    ]);\n    CommonDataTypes.LocalValueSchema = zod_1.z.lazy(() => zod_1.z.union([\n        PrimitiveProtocolValueSchema,\n        ArrayLocalValueSchema,\n        DateLocalValueSchema,\n        MapLocalValueSchema,\n        ObjectLocalValueSchema,\n        RegExpLocalValueSchema,\n        SetLocalValueSchema,\n    ]));\n    // Order is important, as `parse` is processed in the same order.\n    // `SharedReferenceSchema`->`RemoteReferenceSchema`->`LocalValueSchema`.\n    const LocalOrRemoteValueSchema = zod_1.z.union([\n        CommonDataTypes.SharedReferenceSchema,\n        CommonDataTypes.RemoteReferenceSchema,\n        CommonDataTypes.LocalValueSchema,\n    ]);\n    // ListLocalValue = [*LocalValue];\n    const ListLocalValueSchema = zod_1.z.array(LocalOrRemoteValueSchema);\n    // ArrayLocalValue = {\n    //   type: \"array\",\n    //   value: ListLocalValue,\n    // }\n    const ArrayLocalValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('array'),\n        value: ListLocalValueSchema,\n    });\n    // DateLocalValue = {\n    //   type: \"date\",\n    //   value: text\n    // }\n    const DateLocalValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('date'),\n        value: zod_1.z.string().min(1),\n    });\n    // MappingLocalValue = [*[(LocalValue / text), LocalValue]];\n    const MappingLocalValueSchema = zod_1.z.tuple([\n        zod_1.z.union([zod_1.z.string(), LocalOrRemoteValueSchema]),\n        LocalOrRemoteValueSchema,\n    ]);\n    // MapLocalValue = {\n    //   type: \"map\",\n    //   value: MappingLocalValue,\n    // }\n    const MapLocalValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('map'),\n        value: zod_1.z.array(MappingLocalValueSchema),\n    });\n    // ObjectLocalValue = {\n    //   type: \"object\",\n    //   value: MappingLocalValue,\n    // }\n    const ObjectLocalValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('object'),\n        value: zod_1.z.array(MappingLocalValueSchema),\n    });\n    // RegExpLocalValue = {\n    //   type: \"regexp\",\n    //   value: RegExpValue,\n    // }\n    const RegExpLocalValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('regexp'),\n        value: zod_1.z.object({\n            pattern: zod_1.z.string(),\n            flags: zod_1.z.string().optional(),\n        }),\n    });\n    // SetLocalValue = {\n    //   type: \"set\",\n    //   value: ListLocalValue,\n    // }\n    const SetLocalValueSchema = zod_1.z.lazy(() => zod_1.z.object({\n        type: zod_1.z.literal('set'),\n        value: ListLocalValueSchema,\n    }));\n    // BrowsingContext = text;\n    CommonDataTypes.BrowsingContextSchema = zod_1.z.string();\n    CommonDataTypes.MaxDepthSchema = zod_1.z.number().int().nonnegative().max(MAX_INT);\n})(CommonDataTypes = exports.CommonDataTypes || (exports.CommonDataTypes = {}));\n/** @see https://w3c.github.io/webdriver-bidi/#module-script */\nvar Script;\n(function (Script) {\n    const RealmTypeSchema = zod_1.z.enum([\n        'window',\n        'dedicated-worker',\n        'shared-worker',\n        'service-worker',\n        'worker',\n        'paint-worklet',\n        'audio-worklet',\n        'worklet',\n    ]);\n    Script.GetRealmsParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema.optional(),\n        type: RealmTypeSchema.optional(),\n    });\n    function parseGetRealmsParams(params) {\n        return parseObject(params, Script.GetRealmsParametersSchema);\n    }\n    Script.parseGetRealmsParams = parseGetRealmsParams;\n    // ContextTarget = {\n    //   context: BrowsingContext,\n    //   ?sandbox: text\n    // }\n    const ContextTargetSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n        sandbox: zod_1.z.string().optional(),\n    });\n    // RealmTarget = {realm: Realm};\n    const RealmTargetSchema = zod_1.z.object({\n        realm: zod_1.z.string().min(1),\n    });\n    // Target = (\n    //   RealmTarget //\n    //   ContextTarget\n    // );\n    // Order is important, as `parse` is processed in the same order.\n    // `RealmTargetSchema` has higher priority.\n    const TargetSchema = zod_1.z.union([RealmTargetSchema, ContextTargetSchema]);\n    // ResultOwnership = \"root\" / \"none\"\n    const ResultOwnershipSchema = zod_1.z.enum(['root', 'none']);\n    // SerializationOptions = {\n    //   ?maxDomDepth: (js-uint / null) .default 0,\n    //   ?maxObjectDepth: (js-uint / null) .default null,\n    //   ?includeShadowTree: (\"none\" / \"open\" / \"all\") .default \"none\",\n    // }\n    const SerializationOptionsSchema = zod_1.z.object({\n        maxDomDepth: zod_1.z\n            .union([zod_1.z.null(), zod_1.z.number().int().nonnegative()])\n            .optional(),\n        maxObjectDepth: zod_1.z\n            .union([zod_1.z.null(), zod_1.z.number().int().nonnegative().max(MAX_INT)])\n            .optional(),\n        includeShadowTree: zod_1.z.enum(['none', 'open', 'all']).optional(),\n    });\n    // script.EvaluateParameters = {\n    //   expression: text,\n    //   target: script.Target,\n    //   awaitPromise: bool,\n    //   ?resultOwnership: script.ResultOwnership,\n    //   ?serializationOptions: script.SerializationOptions,\n    // }\n    const EvaluateParametersSchema = zod_1.z.object({\n        expression: zod_1.z.string(),\n        awaitPromise: zod_1.z.boolean(),\n        target: TargetSchema,\n        resultOwnership: ResultOwnershipSchema.optional(),\n        serializationOptions: SerializationOptionsSchema.optional(),\n    });\n    function parseEvaluateParams(params) {\n        return parseObject(params, EvaluateParametersSchema);\n    }\n    Script.parseEvaluateParams = parseEvaluateParams;\n    // DisownParameters = {\n    //   handles: [Handle]\n    //   target: script.Target;\n    // }\n    const DisownParametersSchema = zod_1.z.object({\n        target: TargetSchema,\n        handles: zod_1.z.array(zod_1.z.string()),\n    });\n    function parseDisownParams(params) {\n        return parseObject(params, DisownParametersSchema);\n    }\n    Script.parseDisownParams = parseDisownParams;\n    const ChannelSchema = zod_1.z.string();\n    const ChannelPropertiesSchema = zod_1.z.object({\n        channel: ChannelSchema,\n        serializationOptions: SerializationOptionsSchema.optional(),\n        ownership: ResultOwnershipSchema.optional(),\n    });\n    Script.ChannelValueSchema = zod_1.z.object({\n        type: zod_1.z.literal('channel'),\n        value: ChannelPropertiesSchema,\n    });\n    Script.PreloadScriptSchema = zod_1.z.string();\n    Script.AddPreloadScriptParametersSchema = zod_1.z.object({\n        functionDeclaration: zod_1.z.string(),\n        arguments: zod_1.z.array(Script.ChannelValueSchema).optional(),\n        sandbox: zod_1.z.string().optional(),\n        context: CommonDataTypes.BrowsingContextSchema.optional(),\n    });\n    function parseAddPreloadScriptParams(params) {\n        return parseObject(params, Script.AddPreloadScriptParametersSchema);\n    }\n    Script.parseAddPreloadScriptParams = parseAddPreloadScriptParams;\n    Script.RemovePreloadScriptParametersSchema = zod_1.z.object({\n        script: Script.PreloadScriptSchema,\n    });\n    function parseRemovePreloadScriptParams(params) {\n        return parseObject(params, Script.RemovePreloadScriptParametersSchema);\n    }\n    Script.parseRemovePreloadScriptParams = parseRemovePreloadScriptParams;\n    // ArgumentValue = (\n    //   RemoteReference //\n    //   LocalValue //\n    //   script.Channel\n    // );\n    const ArgumentValueSchema = zod_1.z.union([\n        CommonDataTypes.RemoteReferenceSchema,\n        CommonDataTypes.SharedReferenceSchema,\n        CommonDataTypes.LocalValueSchema,\n        Script.ChannelValueSchema,\n    ]);\n    // CallFunctionParameters = {\n    //   functionDeclaration: text,\n    //   awaitPromise: bool,\n    //   target: script.Target,\n    //   ?arguments: [*script.ArgumentValue],\n    //   ?resultOwnership: script.ResultOwnership,\n    //   ?serializationOptions: script.SerializationOptions,\n    //   ?this: script.ArgumentValue,\n    // }\n    const CallFunctionParametersSchema = zod_1.z.object({\n        functionDeclaration: zod_1.z.string(),\n        awaitPromise: zod_1.z.boolean(),\n        target: TargetSchema,\n        arguments: zod_1.z.array(ArgumentValueSchema).optional(),\n        resultOwnership: ResultOwnershipSchema.optional(),\n        serializationOptions: SerializationOptionsSchema.optional(),\n        this: ArgumentValueSchema.optional(),\n    });\n    function parseCallFunctionParams(params) {\n        return parseObject(params, CallFunctionParametersSchema);\n    }\n    Script.parseCallFunctionParams = parseCallFunctionParams;\n})(Script = exports.Script || (exports.Script = {}));\n/** @see https://w3c.github.io/webdriver-bidi/#module-browsingContext */\nvar BrowsingContext;\n(function (BrowsingContext) {\n    // GetTreeParameters = {\n    //   ?maxDepth: js-uint,\n    //   ?root: browsingContext.BrowsingContext,\n    // }\n    const GetTreeParametersSchema = zod_1.z.object({\n        maxDepth: CommonDataTypes.MaxDepthSchema.optional(),\n        root: CommonDataTypes.BrowsingContextSchema.optional(),\n    });\n    function parseGetTreeParams(params) {\n        return parseObject(params, GetTreeParametersSchema);\n    }\n    BrowsingContext.parseGetTreeParams = parseGetTreeParams;\n    // ReadinessState = \"none\" / \"interactive\" / \"complete\"\n    const ReadinessStateSchema = zod_1.z.enum(['none', 'interactive', 'complete']);\n    // BrowsingContextNavigateParameters = {\n    //   context: BrowsingContext,\n    //   url: text,\n    //   ?wait: ReadinessState,\n    // }\n    // ReadinessState = \"none\" / \"interactive\" / \"complete\"\n    const NavigateParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n        url: zod_1.z.string().url(),\n        wait: ReadinessStateSchema.optional(),\n    });\n    function parseNavigateParams(params) {\n        return parseObject(params, NavigateParametersSchema);\n    }\n    BrowsingContext.parseNavigateParams = parseNavigateParams;\n    const ReloadParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n        ignoreCache: zod_1.z.boolean().optional(),\n        wait: ReadinessStateSchema.optional(),\n    });\n    function parseReloadParams(params) {\n        return parseObject(params, ReloadParametersSchema);\n    }\n    BrowsingContext.parseReloadParams = parseReloadParams;\n    // BrowsingContextCreateType = \"tab\" / \"window\"\n    // BrowsingContextCreateParameters = {\n    //   type: BrowsingContextCreateType\n    // }\n    const CreateParametersSchema = zod_1.z.object({\n        type: zod_1.z.enum(['tab', 'window']),\n        referenceContext: CommonDataTypes.BrowsingContextSchema.optional(),\n    });\n    function parseCreateParams(params) {\n        return parseObject(params, CreateParametersSchema);\n    }\n    BrowsingContext.parseCreateParams = parseCreateParams;\n    // BrowsingContextCloseParameters = {\n    //   context: BrowsingContext\n    // }\n    const CloseParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n    });\n    function parseCloseParams(params) {\n        return parseObject(params, CloseParametersSchema);\n    }\n    BrowsingContext.parseCloseParams = parseCloseParams;\n    // browsingContext.CaptureScreenshotParameters = {\n    //   context: browsingContext.BrowsingContext\n    // }\n    const CaptureScreenshotParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n    });\n    function parseCaptureScreenshotParams(params) {\n        return parseObject(params, CaptureScreenshotParametersSchema);\n    }\n    BrowsingContext.parseCaptureScreenshotParams = parseCaptureScreenshotParams;\n    // All units are in cm.\n    // PrintPageParameters = {\n    //   ?height: (float .ge 0.0) .default 27.94,\n    //   ?width: (float .ge 0.0) .default 21.59,\n    // }\n    const PrintPageParametersSchema = zod_1.z.object({\n        height: zod_1.z.number().nonnegative().optional(),\n        width: zod_1.z.number().nonnegative().optional(),\n    });\n    // All units are in cm.\n    // PrintMarginParameters = {\n    //   ?bottom: (float .ge 0.0) .default 1.0,\n    //   ?left: (float .ge 0.0) .default 1.0,\n    //   ?right: (float .ge 0.0) .default 1.0,\n    //   ?top: (float .ge 0.0) .default 1.0,\n    // }\n    const PrintMarginParametersSchema = zod_1.z.object({\n        bottom: zod_1.z.number().nonnegative().optional(),\n        left: zod_1.z.number().nonnegative().optional(),\n        right: zod_1.z.number().nonnegative().optional(),\n        top: zod_1.z.number().nonnegative().optional(),\n    });\n    /** @see https://w3c.github.io/webdriver/#dfn-parse-a-page-range */\n    const PrintPageRangesSchema = zod_1.z\n        .array(zod_1.z.union([zod_1.z.string().min(1), zod_1.z.number().int().nonnegative()]))\n        .refine((pageRanges) => {\n        return pageRanges.every((pageRange) => {\n            const match = String(pageRange).match(\n            // matches: '2' | '2-' | '-2' | '2-4'\n            /^(?:(?:\\d+)|(?:\\d+[-])|(?:[-]\\d+)|(?:(?<start>\\d+)[-](?<end>\\d+)))$/);\n            // If a page range is specified, validate start <= end.\n            const { start, end } = match?.groups ?? {};\n            if (start && end && Number(start) > Number(end)) {\n                return false;\n            }\n            return match;\n        });\n    });\n    // PrintParameters = {\n    //   context: browsingContext.BrowsingContext,\n    //   ?background: bool .default false,\n    //   ?margin: browsingContext.PrintMarginParameters,\n    //   ?orientation: (\"portrait\" / \"landscape\") .default \"portrait\",\n    //   ?page: browsingContext.PrintPageParameters,\n    //   ?pageRanges: [*(js-uint / text)],\n    //   ?scale: 0.1..2.0 .default 1.0,\n    //   ?shrinkToFit: bool .default true,\n    // }\n    const PrintParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n        background: zod_1.z.boolean().optional(),\n        margin: PrintMarginParametersSchema.optional(),\n        orientation: zod_1.z.enum(['portrait', 'landscape']).optional(),\n        page: PrintPageParametersSchema.optional(),\n        pageRanges: PrintPageRangesSchema.optional(),\n        scale: zod_1.z.number().min(0.1).max(2.0).optional(),\n        shrinkToFit: zod_1.z.boolean().optional(),\n    });\n    function parsePrintParams(params) {\n        return parseObject(params, PrintParametersSchema);\n    }\n    BrowsingContext.parsePrintParams = parsePrintParams;\n    // browsingContext.Viewport = {\n    //   width: js-uint,\n    //   height: js-uint,\n    // }\n    const ViewportSchema = zod_1.z.object({\n        width: zod_1.z.number().int().nonnegative(),\n        height: zod_1.z.number().int().nonnegative(),\n    });\n    // browsingContext.SetViewportParameters = {\n    //   context: browsingContext.BrowsingContext,\n    //   viewport: emulation.Viewport / null\n    // }\n    const SetViewportActionSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n        viewport: zod_1.z.union([zod_1.z.null(), ViewportSchema]),\n    });\n    function parseSetViewportParams(params) {\n        return parseObject(params, SetViewportActionSchema);\n    }\n    BrowsingContext.parseSetViewportParams = parseSetViewportParams;\n})(BrowsingContext = exports.BrowsingContext || (exports.BrowsingContext = {}));\nvar Cdp;\n(function (Cdp) {\n    const SendCommandParamsSchema = zod_1.z.object({\n        // Allowing any cdpMethod, and casting to proper type later on.\n        method: zod_1.z.string(),\n        // `passthrough` allows object to have any fields.\n        // https://github.com/colinhacks/zod#passthrough\n        params: zod_1.z.object({}).passthrough().optional(),\n        session: zod_1.z.string().optional(),\n    });\n    function parseSendCommandParams(params) {\n        return parseObject(params, SendCommandParamsSchema);\n    }\n    Cdp.parseSendCommandParams = parseSendCommandParams;\n    const GetSessionParamsSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n    });\n    function parseGetSessionParams(params) {\n        return parseObject(params, GetSessionParamsSchema);\n    }\n    Cdp.parseGetSessionParams = parseGetSessionParams;\n})(Cdp = exports.Cdp || (exports.Cdp = {}));\n/** @see https://w3c.github.io/webdriver-bidi/#module-session */\nvar Session;\n(function (Session) {\n    const BiDiSubscriptionRequestParametersEventsSchema = zod_1.z.enum([\n        protocol_js_1.BrowsingContext.AllEvents,\n        ...Object.values(protocol_js_1.BrowsingContext.EventNames),\n        protocol_js_1.Log.AllEvents,\n        ...Object.values(protocol_js_1.Log.EventNames),\n        protocol_js_1.Network.AllEvents,\n        ...Object.values(protocol_js_1.Network.EventNames),\n        protocol_js_1.Script.AllEvents,\n        ...Object.values(protocol_js_1.Script.EventNames),\n    ]);\n    // BiDi+ events\n    const CdpSubscriptionRequestParametersEventsSchema = zod_1.z.custom((value) => {\n        return typeof value === 'string' && value.startsWith('cdp.');\n    }, 'Not a CDP event');\n    const SubscriptionRequestParametersEventsSchema = zod_1.z.union([\n        BiDiSubscriptionRequestParametersEventsSchema,\n        CdpSubscriptionRequestParametersEventsSchema,\n    ]);\n    // SessionSubscriptionRequest = {\n    //   events: [*text],\n    //   ?contexts: [*BrowsingContext],\n    // }\n    const SubscriptionRequestParametersSchema = zod_1.z.object({\n        events: zod_1.z.array(SubscriptionRequestParametersEventsSchema),\n        contexts: zod_1.z.array(CommonDataTypes.BrowsingContextSchema).optional(),\n    });\n    function parseSubscribeParams(params) {\n        return parseObject(params, SubscriptionRequestParametersSchema);\n    }\n    Session.parseSubscribeParams = parseSubscribeParams;\n})(Session = exports.Session || (exports.Session = {}));\n/** @see https://w3c.github.io/webdriver-bidi/#module-input */\nvar Input;\n(function (Input) {\n    // input.ElementOrigin = {\n    //   type: \"element\",\n    //   element: script.SharedReference\n    // }\n    const ElementOriginSchema = zod_1.z.object({\n        type: zod_1.z.literal('element'),\n        element: CommonDataTypes.SharedReferenceSchema,\n    });\n    // input.Origin = \"viewport\" / \"pointer\" / input.ElementOrigin\n    const OriginSchema = zod_1.z.union([\n        zod_1.z.literal('viewport'),\n        zod_1.z.literal('pointer'),\n        ElementOriginSchema,\n    ]);\n    // input.PauseAction = {\n    //   type: \"pause\",\n    //   ? duration: js-uint\n    // }\n    const PauseActionSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.ActionType.Pause),\n        duration: zod_1.z.number().nonnegative().int().optional(),\n    });\n    // input.KeyDownAction = {\n    //   type: \"keyDown\",\n    //   value: text\n    // }\n    const KeyDownActionSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.ActionType.KeyDown),\n        value: UnicodeCharacterSchema,\n    });\n    // input.KeyUpAction = {\n    //   type: \"keyUp\",\n    //   value: text\n    // }\n    const KeyUpActionSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.ActionType.KeyUp),\n        value: UnicodeCharacterSchema,\n    });\n    // input.TiltProperties = (\n    //   ? tiltX: -90..90 .default 0,\n    //   ? tiltY: -90..90 .default 0,\n    // )\n    const TiltPropertiesSchema = zod_1.z.object({\n        tiltX: zod_1.z.number().min(-90).max(90).int().default(0).optional(),\n        tiltY: zod_1.z.number().min(-90).max(90).int().default(0).optional(),\n    });\n    // input.AngleProperties = (\n    //   ? altitudeAngle: float .default 0.0,\n    //   ? azimuthAngle: float .default 0.0,\n    // )\n    const AnglePropertiesSchema = zod_1.z.object({\n        altitudeAngle: zod_1.z\n            .number()\n            .nonnegative()\n            .max(Math.PI / 2)\n            .default(0.0)\n            .optional(),\n        azimuthAngle: zod_1.z\n            .number()\n            .nonnegative()\n            .max(2 * Math.PI)\n            .default(0.0)\n            .optional(),\n    });\n    // input.PointerCommonProperties = (\n    //   ? width: js-uint .default 1,\n    //   ? height: js-uint .default 1,\n    //   ? pressure: float .default 0.0,\n    //   ? tangentialPressure: float .default 0.0,\n    //   ? twist: 0..359 .default 0,\n    //   (input.TiltProperties // input.AngleProperties)\n    // )\n    const PointerCommonPropertiesSchema = zod_1.z\n        .object({\n        width: zod_1.z.number().nonnegative().int().default(1),\n        height: zod_1.z.number().nonnegative().int().default(1),\n        pressure: zod_1.z.number().min(0.0).max(1.0).default(0.0),\n        tangentialPressure: zod_1.z.number().min(-1.0).max(1.0).default(0.0),\n        twist: zod_1.z.number().nonnegative().max(359).int().default(0),\n    })\n        .and(zod_1.z.union([TiltPropertiesSchema, AnglePropertiesSchema]));\n    // input.PointerUpAction = {\n    //   type: \"pointerUp\",\n    //   button: js-uint,\n    //   input.PointerCommonProperties\n    // }\n    const PointerUpActionSchema = zod_1.z\n        .object({\n        type: zod_1.z.literal(protocol_js_1.Input.ActionType.PointerUp),\n        button: zod_1.z.number().nonnegative().int(),\n    })\n        .and(PointerCommonPropertiesSchema);\n    // input.PointerDownAction = {\n    //   type: \"pointerDown\",\n    //   button: js-uint,\n    //   input.PointerCommonProperties\n    // }\n    const PointerDownActionSchema = zod_1.z\n        .object({\n        type: zod_1.z.literal(protocol_js_1.Input.ActionType.PointerDown),\n        button: zod_1.z.number().nonnegative().int(),\n    })\n        .and(PointerCommonPropertiesSchema);\n    // input.PointerMoveAction = {\n    //   type: \"pointerMove\",\n    //   x: js-int,\n    //   y: js-int,\n    //   ? duration: js-uint,\n    //   ? origin: input.Origin,\n    //   input.PointerCommonProperties\n    // }\n    const PointerMoveActionSchema = zod_1.z\n        .object({\n        type: zod_1.z.literal(protocol_js_1.Input.ActionType.PointerMove),\n        x: zod_1.z.number().int(),\n        y: zod_1.z.number().int(),\n        duration: zod_1.z.number().nonnegative().int().optional(),\n        origin: OriginSchema.optional().default('viewport'),\n    })\n        .and(PointerCommonPropertiesSchema);\n    // input.WheelScrollAction = {\n    //   type: \"scroll\",\n    //   x: js-int,\n    //   y: js-int,\n    //   deltaX: js-int,\n    //   deltaY: js-int,\n    //   ? duration: js-uint,\n    //   ? origin: input.Origin .default \"viewport\",\n    // }\n    const WheelScrollActionSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.ActionType.Scroll),\n        x: zod_1.z.number().int(),\n        y: zod_1.z.number().int(),\n        deltaX: zod_1.z.number().int(),\n        deltaY: zod_1.z.number().int(),\n        duration: zod_1.z.number().nonnegative().int().optional(),\n        origin: OriginSchema.optional().default('viewport'),\n    });\n    // input.WheelSourceAction = (\n    //   input.PauseAction //\n    //   input.WheelScrollAction\n    // )\n    const WheelSourceActionSchema = zod_1.z.discriminatedUnion('type', [\n        PauseActionSchema,\n        WheelScrollActionSchema,\n    ]);\n    // input.WheelSourceActions = {\n    //   type: \"wheel\",\n    //   id: text,\n    //   actions: [*input.WheelSourceAction]\n    // }\n    const WheelSourceActionsSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.SourceActionsType.Wheel),\n        id: zod_1.z.string(),\n        actions: zod_1.z.array(WheelSourceActionSchema),\n    });\n    // input.PointerSourceAction = (\n    //   input.PauseAction //\n    //   input.PointerDownAction //\n    //   input.PointerUpAction //\n    //   input.PointerMoveAction\n    // )\n    const PointerSourceActionSchema = zod_1.z.union([\n        PauseActionSchema,\n        PointerDownActionSchema,\n        PointerUpActionSchema,\n        PointerMoveActionSchema,\n    ]);\n    // input.PointerType = \"mouse\" / \"pen\" / \"touch\"\n    const PointerTypeSchema = zod_1.z.nativeEnum(protocol_js_1.Input.PointerType);\n    // input.PointerParameters = {\n    //   ? pointerType: input.PointerType .default \"mouse\"\n    // }\n    const PointerParametersSchema = zod_1.z.object({\n        pointerType: PointerTypeSchema.optional().default(protocol_js_1.Input.PointerType.Mouse),\n    });\n    // input.PointerSourceActions = {\n    //   type: \"pointer\",\n    //   id: text,\n    //   ? parameters: input.PointerParameters,\n    //   actions: [*input.PointerSourceAction]\n    // }\n    const PointerSourceActionsSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.SourceActionsType.Pointer),\n        id: zod_1.z.string(),\n        parameters: PointerParametersSchema.optional(),\n        actions: zod_1.z.array(PointerSourceActionSchema),\n    });\n    // input.KeySourceAction = (\n    //   input.PauseAction //\n    //   input.KeyDownAction //\n    //   input.KeyUpAction\n    // )\n    const KeySourceActionSchema = zod_1.z.discriminatedUnion('type', [\n        PauseActionSchema,\n        KeyDownActionSchema,\n        KeyUpActionSchema,\n    ]);\n    // input.KeySourceActions = {\n    //   type: \"key\",\n    //   id: text,\n    //   actions: [*input.KeySourceAction]\n    // }\n    const KeySourceActionsSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.SourceActionsType.Key),\n        id: zod_1.z.string(),\n        actions: zod_1.z.array(KeySourceActionSchema),\n    });\n    // input.NoneSourceAction = input.PauseAction\n    const NoneSourceActionSchema = PauseActionSchema;\n    // input.NoneSourceActions = {\n    //   type: \"none\",\n    //   id: text,\n    //   actions: [*input.NoneSourceAction]\n    // }\n    const NoneSourceActionsSchema = zod_1.z.object({\n        type: zod_1.z.literal(protocol_js_1.Input.SourceActionsType.None),\n        id: zod_1.z.string(),\n        actions: zod_1.z.array(NoneSourceActionSchema),\n    });\n    // input.SourceActions = (\n    //   input.NoneSourceActions //\n    //   input.KeySourceActions //\n    //   input.PointerSourceActions //\n    //   input.WheelSourceActions\n    // )\n    const SourceActionsSchema = zod_1.z.discriminatedUnion('type', [\n        NoneSourceActionsSchema,\n        KeySourceActionsSchema,\n        PointerSourceActionsSchema,\n        WheelSourceActionsSchema,\n    ]);\n    // input.PerformActionsParameters = {\n    //   context: browsingContext.BrowsingContext,\n    //   actions: [*input.SourceActions]\n    // }\n    const PerformActionsParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n        actions: zod_1.z.array(SourceActionsSchema),\n    });\n    function parsePerformActionsParams(params) {\n        return parseObject(params, PerformActionsParametersSchema);\n    }\n    Input.parsePerformActionsParams = parsePerformActionsParams;\n    // input.ReleaseActionsParameters = {\n    //   context: browsingContext.BrowsingContext,\n    // }\n    const ReleaseActionsParametersSchema = zod_1.z.object({\n        context: CommonDataTypes.BrowsingContextSchema,\n    });\n    function parseReleaseActionsParams(params) {\n        return parseObject(params, ReleaseActionsParametersSchema);\n    }\n    Input.parseReleaseActionsParams = parseReleaseActionsParams;\n})(Input = exports.Input || (exports.Input = {}));\n//# sourceMappingURL=protocol-parser.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst mitt_1 = __importDefault(require(\"mitt\"));\nclass EventEmitter {\n    #emitter = (0, mitt_1.default)();\n    on(type, handler) {\n        this.#emitter.on(type, handler);\n        return this;\n    }\n    /**\n     * Like `on` but the listener will only be fired once and then it will be removed.\n     * @param event The event you'd like to listen to\n     * @param handler The handler function to run when the event occurs\n     * @return `this` to enable chaining method calls.\n     */\n    once(event, handler) {\n        const onceHandler = (eventData) => {\n            handler(eventData);\n            this.off(event, onceHandler);\n        };\n        return this.on(event, onceHandler);\n    }\n    off(type, handler) {\n        this.#emitter.off(type, handler);\n        return this;\n    }\n    /**\n     * Emits an event and call any associated listeners.\n     *\n     * @param event The event to emit.\n     * @param eventData Any data to emit with the event.\n     * @return `true` if there are any listeners, `false` otherwise.\n     */\n    emit(event, eventData) {\n        this.#emitter.emit(event, eventData);\n    }\n}\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map","module.exports=function(n){return{all:n=n||new Map,on:function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},off:function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var i=n.get(e);i&&i.slice().map(function(n){n(t)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(e,t)})}}};\n//# sourceMappingURL=mitt.js.map\n","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogType = void 0;\nvar LogType;\n(function (LogType) {\n    // keep-sorted start\n    LogType[\"bidi\"] = \"BiDi Messages\";\n    LogType[\"browsingContexts\"] = \"Browsing Contexts\";\n    LogType[\"cdp\"] = \"CDP\";\n    LogType[\"system\"] = \"System\";\n    // keep-sorted end\n})(LogType = exports.LogType || (exports.LogType = {}));\n//# sourceMappingURL=log.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProcessingQueue = void 0;\nconst log_js_1 = require(\"./log.js\");\nclass ProcessingQueue {\n    #logger;\n    #processor;\n    #queue = [];\n    // Flag to keep only 1 active processor.\n    #isProcessing = false;\n    constructor(processor, logger) {\n        this.#processor = processor;\n        this.#logger = logger;\n    }\n    add(entry) {\n        this.#queue.push(entry);\n        // No need in waiting. Just initialise processor if needed.\n        void this.#processIfNeeded();\n    }\n    async #processIfNeeded() {\n        if (this.#isProcessing) {\n            return;\n        }\n        this.#isProcessing = true;\n        while (this.#queue.length > 0) {\n            const entryPromise = this.#queue.shift();\n            if (entryPromise !== undefined) {\n                await entryPromise\n                    .then((entry) => this.#processor(entry))\n                    .catch((e) => {\n                    this.#logger?.(log_js_1.LogType.system, 'Event was not processed:', e);\n                });\n            }\n        }\n        this.#isProcessing = false;\n    }\n}\nexports.ProcessingQueue = ProcessingQueue;\n//# sourceMappingURL=processingQueue.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assert = void 0;\nfunction assert(predicate) {\n    if (!predicate) {\n        throw new Error('Internal assertion failed.');\n    }\n}\nexports.assert = assert;\n//# sourceMappingURL=assert.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n * Copyright 2022 The Chromium Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Mutex = void 0;\n/**\n * Use Mutex class to coordinate local concurrent operations.\n * Once `acquire` promise resolves, you hold the lock and must\n * call `release` function returned by `acquire` to release the\n * lock. Failing to `release` the lock may lead to deadlocks.\n */\nclass Mutex {\n    #locked = false;\n    #acquirers = [];\n    // This is FIFO.\n    acquire() {\n        const state = { resolved: false };\n        if (this.#locked) {\n            return new Promise((resolve) => {\n                this.#acquirers.push(() => resolve(this.#release.bind(this, state)));\n            });\n        }\n        this.#locked = true;\n        return Promise.resolve(this.#release.bind(this, state));\n    }\n    #release(state) {\n        if (state.resolved) {\n            throw new Error('Cannot release more than once.');\n        }\n        state.resolved = true;\n        const resolve = this.#acquirers.shift();\n        if (!resolve) {\n            this.#locked = false;\n            return;\n        }\n        resolve();\n    }\n    async run(action) {\n        const release = await this.acquire();\n        try {\n            // Note we need to await here because we want the await to release AFTER\n            // that await happens. Returning action() will trigger the release\n            // immediately which is counter to what we want.\n            const result = await action();\n            return result;\n        }\n        finally {\n            release();\n        }\n    }\n}\nexports.Mutex = Mutex;\n//# sourceMappingURL=Mutex.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WheelSource = exports.PointerSource = exports.KeySource = exports.NoneSource = exports.SourceType = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nexports.SourceType = protocol_js_1.Input.SourceActionsType;\nclass NoneSource {\n    type = exports.SourceType.None;\n}\nexports.NoneSource = NoneSource;\nclass KeySource {\n    type = exports.SourceType.Key;\n    pressed = new Set();\n    // This is a bitfield that matches the modifiers parameter of\n    // https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchKeyEvent\n    #modifiers = 0;\n    get modifiers() {\n        return this.#modifiers;\n    }\n    get alt() {\n        return (this.#modifiers & 1) === 1;\n    }\n    set alt(value) {\n        this.#setModifier(value, 1);\n    }\n    get ctrl() {\n        return (this.#modifiers & 2) === 2;\n    }\n    set ctrl(value) {\n        this.#setModifier(value, 2);\n    }\n    get meta() {\n        return (this.#modifiers & 4) === 4;\n    }\n    set meta(value) {\n        this.#setModifier(value, 4);\n    }\n    get shift() {\n        return (this.#modifiers & 8) === 8;\n    }\n    set shift(value) {\n        this.#setModifier(value, 8);\n    }\n    #setModifier(value, bit) {\n        if (value) {\n            this.#modifiers |= bit;\n        }\n        else {\n            this.#modifiers &= ~bit;\n        }\n    }\n}\nexports.KeySource = KeySource;\nclass PointerSource {\n    type = exports.SourceType.Pointer;\n    subtype;\n    pointerId;\n    pressed = new Set();\n    x = 0;\n    y = 0;\n    constructor(id, subtype) {\n        this.pointerId = id;\n        this.subtype = subtype;\n    }\n    // This is a bitfield that matches the buttons parameter of\n    // https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchMouseEvent\n    get buttons() {\n        let buttons = 0;\n        for (const button of this.pressed) {\n            switch (button) {\n                case 0:\n                    buttons |= 1;\n                    break;\n                case 1:\n                    buttons |= 4;\n                    break;\n                case 2:\n                    buttons |= 2;\n                    break;\n                case 3:\n                    buttons |= 8;\n                    break;\n                case 4:\n                    buttons |= 16;\n                    break;\n            }\n        }\n        return buttons;\n    }\n    // --- Platform-specific state starts here ---\n    // Input.dispatchMouseEvent doesn't know the concept of double click, so we\n    // need to create it like for OSes:\n    // https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:ui/events/event.cc;l=479\n    static #DOUBLE_CLICK_TIME_MS = 500;\n    static #MAX_DOUBLE_CLICK_RADIUS = 2;\n    #clickCount = 0;\n    #lastClick;\n    setClickCount(context) {\n        if (!this.#lastClick ||\n            // The click needs to be within a certain amount of ms.\n            context.timeStamp - this.#lastClick.timeStamp >\n                PointerSource.#DOUBLE_CLICK_TIME_MS ||\n            // The click needs to be within a square radius.\n            Math.abs(this.#lastClick.x - context.x) >\n                PointerSource.#MAX_DOUBLE_CLICK_RADIUS ||\n            Math.abs(this.#lastClick.y - context.y) >\n                PointerSource.#MAX_DOUBLE_CLICK_RADIUS) {\n            this.#clickCount = 0;\n        }\n        ++this.#clickCount;\n        this.#lastClick = context;\n    }\n    get clickCount() {\n        return this.#clickCount;\n    }\n}\nexports.PointerSource = PointerSource;\nclass WheelSource {\n    type = exports.SourceType.Wheel;\n}\nexports.WheelSource = WheelSource;\n//# sourceMappingURL=InputSource.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InputState = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst Mutex_js_1 = require(\"../../../utils/Mutex.js\");\nconst InputSource_js_1 = require(\"./InputSource.js\");\nclass InputState {\n    cancelList = [];\n    #sources = new Map();\n    #mutex = new Mutex_js_1.Mutex();\n    getOrCreate(id, type, subtype) {\n        let source = this.#sources.get(id);\n        if (!source) {\n            switch (type) {\n                case InputSource_js_1.SourceType.None:\n                    source = new InputSource_js_1.NoneSource();\n                    break;\n                case InputSource_js_1.SourceType.Key:\n                    source = new InputSource_js_1.KeySource();\n                    break;\n                case InputSource_js_1.SourceType.Pointer: {\n                    let pointerId = subtype === protocol_js_1.Input.PointerType.Mouse ? 0 : 2;\n                    const pointerIds = new Set();\n                    for (const [, source] of this.#sources) {\n                        if (source.type === InputSource_js_1.SourceType.Pointer) {\n                            pointerIds.add(source.pointerId);\n                        }\n                    }\n                    while (pointerIds.has(pointerId)) {\n                        ++pointerId;\n                    }\n                    source = new InputSource_js_1.PointerSource(pointerId, subtype);\n                    break;\n                }\n                case InputSource_js_1.SourceType.Wheel:\n                    source = new InputSource_js_1.WheelSource();\n                    break;\n                default:\n                    throw new protocol_js_1.Message.InvalidArgumentException(`Expected \"${InputSource_js_1.SourceType.None}\", \"${InputSource_js_1.SourceType.Key}\", \"${InputSource_js_1.SourceType.Pointer}\", or \"${InputSource_js_1.SourceType.Wheel}\". Found unknown source type ${type}.`);\n            }\n            this.#sources.set(id, source);\n            return source;\n        }\n        if (source.type !== type) {\n            throw new protocol_js_1.Message.InvalidArgumentException(`Input source type of ${id} is ${source.type}, but received ${type}.`);\n        }\n        return source;\n    }\n    get(id) {\n        const source = this.#sources.get(id);\n        if (!source) {\n            throw new protocol_js_1.Message.UnknownErrorException(`Internal error.`);\n        }\n        return source;\n    }\n    getGlobalKeyState() {\n        const state = new InputSource_js_1.KeySource();\n        for (const [, source] of this.#sources) {\n            if (source.type !== InputSource_js_1.SourceType.Key) {\n                continue;\n            }\n            for (const pressed of source.pressed) {\n                state.pressed.add(pressed);\n            }\n            state.alt ||= source.alt;\n            state.ctrl ||= source.ctrl;\n            state.meta ||= source.meta;\n            state.shift ||= source.shift;\n        }\n        return state;\n    }\n    get queue() {\n        return this.#mutex;\n    }\n}\nexports.InputState = InputState;\n//# sourceMappingURL=InputState.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InputStateManager = void 0;\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst InputState_js_1 = require(\"./InputState.js\");\nclass InputStateManager {\n    // We use a weak map here as specified here:\n    // https://www.w3.org/TR/webdriver/#dfn-browsing-context-input-state-map\n    #states = new WeakMap();\n    get(context) {\n        (0, assert_js_1.assert)(context.isTopLevelContext());\n        let state = this.#states.get(context);\n        if (!state) {\n            state = new InputState_js_1.InputState();\n            this.#states.set(context, state);\n        }\n        return state;\n    }\n    delete(context) {\n        this.#states.delete(context);\n    }\n}\nexports.InputStateManager = InputStateManager;\n//# sourceMappingURL=InputStateManager.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeyToKeyCode = void 0;\n// TODO: Remove this once https://crrev.com/c/4548290 is stably in Chromium.\n// `Input.dispatchKeyboardEvent` will automatically handle these conversions.\nexports.KeyToKeyCode = {\n    '0': 48,\n    '1': 49,\n    '2': 50,\n    '3': 51,\n    '4': 52,\n    '5': 53,\n    '6': 54,\n    '7': 55,\n    '8': 56,\n    '9': 57,\n    Abort: 3,\n    Help: 6,\n    Backspace: 8,\n    Tab: 9,\n    Numpad5: 12,\n    NumpadEnter: 13,\n    Enter: 13,\n    '\\\\r': 13,\n    '\\\\n': 13,\n    ShiftLeft: 16,\n    ShiftRight: 16,\n    ControlLeft: 17,\n    ControlRight: 17,\n    AltLeft: 18,\n    AltRight: 18,\n    Pause: 19,\n    CapsLock: 20,\n    Escape: 27,\n    Convert: 28,\n    NonConvert: 29,\n    Space: 32,\n    Numpad9: 33,\n    PageUp: 33,\n    Numpad3: 34,\n    PageDown: 34,\n    End: 35,\n    Numpad1: 35,\n    Home: 36,\n    Numpad7: 36,\n    ArrowLeft: 37,\n    Numpad4: 37,\n    Numpad8: 38,\n    ArrowUp: 38,\n    ArrowRight: 39,\n    Numpad6: 39,\n    Numpad2: 40,\n    ArrowDown: 40,\n    Select: 41,\n    Open: 43,\n    PrintScreen: 44,\n    Insert: 45,\n    Numpad0: 45,\n    Delete: 46,\n    NumpadDecimal: 46,\n    Digit0: 48,\n    Digit1: 49,\n    Digit2: 50,\n    Digit3: 51,\n    Digit4: 52,\n    Digit5: 53,\n    Digit6: 54,\n    Digit7: 55,\n    Digit8: 56,\n    Digit9: 57,\n    KeyA: 65,\n    KeyB: 66,\n    KeyC: 67,\n    KeyD: 68,\n    KeyE: 69,\n    KeyF: 70,\n    KeyG: 71,\n    KeyH: 72,\n    KeyI: 73,\n    KeyJ: 74,\n    KeyK: 75,\n    KeyL: 76,\n    KeyM: 77,\n    KeyN: 78,\n    KeyO: 79,\n    KeyP: 80,\n    KeyQ: 81,\n    KeyR: 82,\n    KeyS: 83,\n    KeyT: 84,\n    KeyU: 85,\n    KeyV: 86,\n    KeyW: 87,\n    KeyX: 88,\n    KeyY: 89,\n    KeyZ: 90,\n    MetaLeft: 91,\n    MetaRight: 92,\n    ContextMenu: 93,\n    NumpadMultiply: 106,\n    NumpadAdd: 107,\n    NumpadSubtract: 109,\n    NumpadDivide: 111,\n    F1: 112,\n    F2: 113,\n    F3: 114,\n    F4: 115,\n    F5: 116,\n    F6: 117,\n    F7: 118,\n    F8: 119,\n    F9: 120,\n    F10: 121,\n    F11: 122,\n    F12: 123,\n    F13: 124,\n    F14: 125,\n    F15: 126,\n    F16: 127,\n    F17: 128,\n    F18: 129,\n    F19: 130,\n    F20: 131,\n    F21: 132,\n    F22: 133,\n    F23: 134,\n    F24: 135,\n    NumLock: 144,\n    ScrollLock: 145,\n    AudioVolumeMute: 173,\n    AudioVolumeDown: 174,\n    AudioVolumeUp: 175,\n    MediaTrackNext: 176,\n    MediaTrackPrevious: 177,\n    MediaStop: 178,\n    MediaPlayPause: 179,\n    Semicolon: 186,\n    Equal: 187,\n    NumpadEqual: 187,\n    Comma: 188,\n    Minus: 189,\n    Period: 190,\n    Slash: 191,\n    Backquote: 192,\n    BracketLeft: 219,\n    Backslash: 220,\n    BracketRight: 221,\n    Quote: 222,\n    AltGraph: 225,\n    Props: 247,\n    Cancel: 3,\n    Clear: 12,\n    Shift: 16,\n    Control: 17,\n    Alt: 18,\n    Accept: 30,\n    ModeChange: 31,\n    ' ': 32,\n    Print: 42,\n    Execute: 43,\n    '\\\\u0000': 46,\n    a: 65,\n    b: 66,\n    c: 67,\n    d: 68,\n    e: 69,\n    f: 70,\n    g: 71,\n    h: 72,\n    i: 73,\n    j: 74,\n    k: 75,\n    l: 76,\n    m: 77,\n    n: 78,\n    o: 79,\n    p: 80,\n    q: 81,\n    r: 82,\n    s: 83,\n    t: 84,\n    u: 85,\n    v: 86,\n    w: 87,\n    x: 88,\n    y: 89,\n    z: 90,\n    Meta: 91,\n    '*': 106,\n    '+': 107,\n    '-': 109,\n    '/': 111,\n    ';': 186,\n    '=': 187,\n    ',': 188,\n    '.': 190,\n    '`': 192,\n    '[': 219,\n    '\\\\\\\\': 220,\n    ']': 221,\n    \"'\": 222,\n    Attn: 246,\n    CrSel: 247,\n    ExSel: 248,\n    EraseEof: 249,\n    Play: 250,\n    ZoomOut: 251,\n    ')': 48,\n    '!': 49,\n    '@': 50,\n    '#': 51,\n    $: 52,\n    '%': 53,\n    '^': 54,\n    '&': 55,\n    '(': 57,\n    A: 65,\n    B: 66,\n    C: 67,\n    D: 68,\n    E: 69,\n    F: 70,\n    G: 71,\n    H: 72,\n    I: 73,\n    J: 74,\n    K: 75,\n    L: 76,\n    M: 77,\n    N: 78,\n    O: 79,\n    P: 80,\n    Q: 81,\n    R: 82,\n    S: 83,\n    T: 84,\n    U: 85,\n    V: 86,\n    W: 87,\n    X: 88,\n    Y: 89,\n    Z: 90,\n    ':': 186,\n    '<': 188,\n    _: 189,\n    '>': 190,\n    '?': 191,\n    '~': 192,\n    '{': 219,\n    '|': 220,\n    '}': 221,\n    '\"': 222,\n    Camera: 44,\n    EndCall: 95,\n    VolumeDown: 182,\n    VolumeUp: 183,\n};\n//# sourceMappingURL=USKeyboardLayout.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getKeyLocation = exports.getKeyCode = exports.getNormalizedKey = void 0;\nfunction getNormalizedKey(value) {\n    switch (value) {\n        case '\\uE000':\n            return 'Unidentified';\n        case '\\uE001':\n            return 'Cancel';\n        case '\\uE002':\n            return 'Help';\n        case '\\uE003':\n            return 'Backspace';\n        case '\\uE004':\n            return 'Tab';\n        case '\\uE005':\n            return 'Clear';\n        case '\\uE006':\n            return 'Return';\n        case '\\uE007':\n            return 'Enter';\n        case '\\uE008':\n            return 'Shift';\n        case '\\uE009':\n            return 'Control';\n        case '\\uE00A':\n            return 'Alt';\n        case '\\uE00B':\n            return 'Pause';\n        case '\\uE00C':\n            return 'Escape';\n        case '\\uE00D':\n            return ' ';\n        case '\\uE00E':\n            return 'PageUp';\n        case '\\uE00F':\n            return 'PageDown';\n        case '\\uE010':\n            return 'End';\n        case '\\uE011':\n            return 'Home';\n        case '\\uE012':\n            return 'ArrowLeft';\n        case '\\uE013':\n            return 'ArrowUp';\n        case '\\uE014':\n            return 'ArrowRight';\n        case '\\uE015':\n            return 'ArrowDown';\n        case '\\uE016':\n            return 'Insert';\n        case '\\uE017':\n            return 'Delete';\n        case '\\uE018':\n            return ';';\n        case '\\uE019':\n            return '=';\n        case '\\uE01A':\n            return '0';\n        case '\\uE01B':\n            return '1';\n        case '\\uE01C':\n            return '2';\n        case '\\uE01D':\n            return '3';\n        case '\\uE01E':\n            return '4';\n        case '\\uE01F':\n            return '5';\n        case '\\uE020':\n            return '6';\n        case '\\uE021':\n            return '7';\n        case '\\uE022':\n            return '8';\n        case '\\uE023':\n            return '9';\n        case '\\uE024':\n            return '*';\n        case '\\uE025':\n            return '+';\n        case '\\uE026':\n            return ',';\n        case '\\uE027':\n            return '-';\n        case '\\uE028':\n            return '.';\n        case '\\uE029':\n            return '/';\n        case '\\uE031':\n            return 'F1';\n        case '\\uE032':\n            return 'F2';\n        case '\\uE033':\n            return 'F3';\n        case '\\uE034':\n            return 'F4';\n        case '\\uE035':\n            return 'F5';\n        case '\\uE036':\n            return 'F6';\n        case '\\uE037':\n            return 'F7';\n        case '\\uE038':\n            return 'F8';\n        case '\\uE039':\n            return 'F9';\n        case '\\uE03A':\n            return 'F10';\n        case '\\uE03B':\n            return 'F11';\n        case '\\uE03C':\n            return 'F12';\n        case '\\uE03D':\n            return 'Meta';\n        case '\\uE040':\n            return 'ZenkakuHankaku';\n        case '\\uE050':\n            return 'Shift';\n        case '\\uE051':\n            return 'Control';\n        case '\\uE052':\n            return 'Alt';\n        case '\\uE053':\n            return 'Meta';\n        case '\\uE054':\n            return 'PageUp';\n        case '\\uE055':\n            return 'PageDown';\n        case '\\uE056':\n            return 'End';\n        case '\\uE057':\n            return 'Home';\n        case '\\uE058':\n            return 'ArrowLeft';\n        case '\\uE059':\n            return 'ArrowUp';\n        case '\\uE05A':\n            return 'ArrowRight';\n        case '\\uE05B':\n            return 'ArrowDown';\n        case '\\uE05C':\n            return 'Insert';\n        case '\\uE05D':\n            return 'Delete';\n        default:\n            return value;\n    }\n}\nexports.getNormalizedKey = getNormalizedKey;\nfunction getKeyCode(key) {\n    switch (key) {\n        case '`':\n        case '~':\n            return 'Backquote';\n        case '\\\\':\n        case '|':\n            return 'Backslash';\n        case '\\uE003':\n            return 'Backspace';\n        case '[':\n        case '{':\n            return 'BracketLeft';\n        case ']':\n        case '}':\n            return 'BracketRight';\n        case ',':\n        case '<':\n            return 'Comma';\n        case '0':\n        case ')':\n            return 'Digit0';\n        case '1':\n        case '!':\n            return 'Digit1';\n        case '2':\n        case '@':\n            return 'Digit2';\n        case '3':\n        case '#':\n            return 'Digit3';\n        case '4':\n        case '$':\n            return 'Digit4';\n        case '5':\n        case '%':\n            return 'Digit5';\n        case '6':\n        case '^':\n            return 'Digit6';\n        case '7':\n        case '&':\n            return 'Digit7';\n        case '8':\n        case '*':\n            return 'Digit8';\n        case '9':\n        case '(':\n            return 'Digit9';\n        case '=':\n        case '+':\n            return 'Equal';\n        case 'a':\n        case 'A':\n            return 'KeyA';\n        case 'b':\n        case 'B':\n            return 'KeyB';\n        case 'c':\n        case 'C':\n            return 'KeyC';\n        case 'd':\n        case 'D':\n            return 'KeyD';\n        case 'e':\n        case 'E':\n            return 'KeyE';\n        case 'f':\n        case 'F':\n            return 'KeyF';\n        case 'g':\n        case 'G':\n            return 'KeyG';\n        case 'h':\n        case 'H':\n            return 'KeyH';\n        case 'i':\n        case 'I':\n            return 'KeyI';\n        case 'j':\n        case 'J':\n            return 'KeyJ';\n        case 'k':\n        case 'K':\n            return 'KeyK';\n        case 'l':\n        case 'L':\n            return 'KeyL';\n        case 'm':\n        case 'M':\n            return 'KeyM';\n        case 'n':\n        case 'N':\n            return 'KeyN';\n        case 'o':\n        case 'O':\n            return 'KeyO';\n        case 'p':\n        case 'P':\n            return 'KeyP';\n        case 'q':\n        case 'Q':\n            return 'KeyQ';\n        case 'r':\n        case 'R':\n            return 'KeyR';\n        case 's':\n        case 'S':\n            return 'KeyS';\n        case 't':\n        case 'T':\n            return 'KeyT';\n        case 'u':\n        case 'U':\n            return 'KeyU';\n        case 'v':\n        case 'V':\n            return 'KeyV';\n        case 'w':\n        case 'W':\n            return 'KeyW';\n        case 'x':\n        case 'X':\n            return 'KeyX';\n        case 'y':\n        case 'Y':\n            return 'KeyY';\n        case 'z':\n        case 'Z':\n            return 'KeyZ';\n        case '-':\n        case '_':\n            return 'Minus';\n        case '.':\n            return 'Period';\n        case \"'\":\n        case '\"':\n            return 'Quote';\n        case ';':\n        case ':':\n            return 'Semicolon';\n        case '/':\n        case '?':\n            return 'Slash';\n        case '\\uE00A':\n            return 'AltLeft';\n        case '\\uE052':\n            return 'AltRight';\n        case '\\uE009':\n            return 'ControlLeft';\n        case '\\uE051':\n            return 'ControlRight';\n        case '\\uE006':\n            return 'Enter';\n        case '\\uE03D':\n            return 'MetaLeft';\n        case '\\uE053':\n            return 'MetaRight';\n        case '\\uE008':\n            return 'ShiftLeft';\n        case '\\uE050':\n            return 'ShiftRight';\n        case ' ':\n        case '\\uE00D':\n            return 'Space';\n        case '\\uE004':\n            return 'Tab';\n        case '\\uE017':\n            return 'Delete';\n        case '\\uE010':\n            return 'End';\n        case '\\uE002':\n            return 'Help';\n        case '\\uE011':\n            return 'Home';\n        case '\\uE016':\n            return 'Insert';\n        case '\\uE00F':\n            return 'PageDown';\n        case '\\uE00E':\n            return 'PageUp';\n        case '\\uE015':\n            return 'ArrowDown';\n        case '\\uE012':\n            return 'ArrowLeft';\n        case '\\uE014':\n            return 'ArrowRight';\n        case '\\uE013':\n            return 'ArrowUp';\n        case '\\uE00C':\n            return 'Escape';\n        case '\\uE031':\n            return 'F1';\n        case '\\uE032':\n            return 'F2';\n        case '\\uE033':\n            return 'F3';\n        case '\\uE034':\n            return 'F4';\n        case '\\uE035':\n            return 'F5';\n        case '\\uE036':\n            return 'F6';\n        case '\\uE037':\n            return 'F7';\n        case '\\uE038':\n            return 'F8';\n        case '\\uE039':\n            return 'F9';\n        case '\\uE03A':\n            return 'F10';\n        case '\\uE03B':\n            return 'F11';\n        case '\\uE03C':\n            return 'F12';\n        case '\\uE01A':\n        case '\\uE05C':\n            return 'Numpad0';\n        case '\\uE01B':\n        case '\\uE056':\n            return 'Numpad1';\n        case '\\uE01C':\n        case '\\uE05B':\n            return 'Numpad2';\n        case '\\uE01D':\n        case '\\uE055':\n            return 'Numpad3';\n        case '\\uE01E':\n        case '\\uE058':\n            return 'Numpad4';\n        case '\\uE01F':\n            return 'Numpad5';\n        case '\\uE020':\n        case '\\uE05A':\n            return 'Numpad6';\n        case '\\uE021':\n        case '\\uE057':\n            return 'Numpad7';\n        case '\\uE022':\n        case '\\uE059':\n            return 'Numpad8';\n        case '\\uE023':\n        case '\\uE054':\n            return 'Numpad9';\n        case '\\uE025':\n            return 'NumpadAdd';\n        case '\\uE026':\n            return 'NumpadComma';\n        case '\\uE028':\n        case '\\uE05D':\n            return 'NumpadDecimal';\n        case '\\uE029':\n            return 'NumpadDivide';\n        case '\\uE007':\n            return 'NumpadEnter';\n        case '\\uE024':\n            return 'NumpadMultiply';\n        case '\\uE027':\n            return 'NumpadSubtract';\n        default:\n            return;\n    }\n}\nexports.getKeyCode = getKeyCode;\nfunction getKeyLocation(key) {\n    switch (key) {\n        case '\\uE007':\n        case '\\uE008':\n        case '\\uE009':\n        case '\\uE00A':\n        case '\\uE03D':\n            return 1;\n        case '\\uE01A':\n        case '\\uE01B':\n        case '\\uE01C':\n        case '\\uE01D':\n        case '\\uE01E':\n        case '\\uE01F':\n        case '\\uE020':\n        case '\\uE021':\n        case '\\uE022':\n        case '\\uE023':\n        case '\\uE024':\n        case '\\uE025':\n        case '\\uE026':\n        case '\\uE027':\n        case '\\uE028':\n        case '\\uE029':\n        case '\\uE054':\n        case '\\uE055':\n        case '\\uE056':\n        case '\\uE057':\n        case '\\uE058':\n        case '\\uE059':\n        case '\\uE05A':\n        case '\\uE05B':\n        case '\\uE05C':\n        case '\\uE05D':\n            return 3;\n        case '\\uE050':\n        case '\\uE051':\n        case '\\uE052':\n        case '\\uE053':\n            return 2;\n        default:\n            return 0;\n    }\n}\nexports.getKeyLocation = getKeyLocation;\n//# sourceMappingURL=keyUtils.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ActionDispatcher = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst assert_js_1 = require(\"../../../utils/assert.js\");\nconst USKeyboardLayout_js_1 = require(\"./USKeyboardLayout.js\");\nconst keyUtils_js_1 = require(\"./keyUtils.js\");\n/** https://w3c.github.io/webdriver/#dfn-center-point */\nconst CALCULATE_IN_VIEW_CENTER_PT_DECL = ((i) => {\n    const t = i.getClientRects()[0], e = Math.max(0, Math.min(t.x, t.x + t.width)), n = Math.min(window.innerWidth, Math.max(t.x, t.x + t.width)), h = Math.max(0, Math.min(t.y, t.y + t.height)), m = Math.min(window.innerHeight, Math.max(t.y, t.y + t.height));\n    return [e + ((n - e) >> 1), h + ((m - h) >> 1)];\n}).toString();\nconst IS_MAC_DECL = (() => {\n    return navigator.platform.toLowerCase().includes('mac');\n}).toString();\nasync function getElementCenter(context, element) {\n    const { result } = await (await context.getOrCreateSandbox(undefined)).callFunction(CALCULATE_IN_VIEW_CENTER_PT_DECL, { type: 'undefined' }, [element], false, 'none', {});\n    if (result.type === 'exception') {\n        throw new protocol_js_1.Message.NoSuchElementException(`Origin element ${element.sharedId} was not found`);\n    }\n    (0, assert_js_1.assert)(result.result.type === 'array');\n    (0, assert_js_1.assert)(result.result.value?.[0]?.type === 'number');\n    (0, assert_js_1.assert)(result.result.value?.[1]?.type === 'number');\n    const { result: { value: [{ value: x }, { value: y }], }, } = result;\n    return { x: x, y: y };\n}\nclass ActionDispatcher {\n    static isMacOS = async (context) => {\n        const { result } = await (await context.getOrCreateSandbox(undefined)).callFunction(IS_MAC_DECL, { type: 'undefined' }, [], false, 'none', {});\n        (0, assert_js_1.assert)(result.type !== 'exception');\n        (0, assert_js_1.assert)(result.result.type === 'boolean');\n        return result.result.value;\n    };\n    #tickStart = 0;\n    #tickDuration = 0;\n    #inputState;\n    #context;\n    #isMacOS;\n    constructor(inputState, context, isMacOS) {\n        this.#inputState = inputState;\n        this.#context = context;\n        this.#isMacOS = isMacOS;\n    }\n    async dispatchActions(optionsByTick) {\n        await this.#inputState.queue.run(async () => {\n            for (const options of optionsByTick) {\n                await this.dispatchTickActions(options);\n            }\n        });\n    }\n    async dispatchTickActions(options) {\n        this.#tickStart = performance.now();\n        this.#tickDuration = 0;\n        for (const { action } of options) {\n            if ('duration' in action && action.duration !== undefined) {\n                this.#tickDuration = Math.max(this.#tickDuration, action.duration);\n            }\n        }\n        const promises = [\n            new Promise((resolve) => setTimeout(resolve, this.#tickDuration)),\n        ];\n        for (const option of options) {\n            promises.push(this.#dispatchAction(option));\n        }\n        await Promise.all(promises);\n    }\n    async #dispatchAction({ id, action }) {\n        const source = this.#inputState.get(id);\n        const keyState = this.#inputState.getGlobalKeyState();\n        switch (action.type) {\n            case protocol_js_1.Input.ActionType.KeyDown: {\n                // SAFETY: The source is validated before.\n                await this.#dispatchKeyDownAction(source, action);\n                this.#inputState.cancelList.push({\n                    id,\n                    action: {\n                        ...action,\n                        type: protocol_js_1.Input.ActionType.KeyUp,\n                    },\n                });\n                break;\n            }\n            case protocol_js_1.Input.ActionType.KeyUp: {\n                // SAFETY: The source is validated before.\n                await this.#dispatchKeyUpAction(source, action);\n                break;\n            }\n            case protocol_js_1.Input.ActionType.Pause: {\n                // TODO: Implement waiting on the input source.\n                break;\n            }\n            case protocol_js_1.Input.ActionType.PointerDown: {\n                // SAFETY: The source is validated before.\n                await this.#dispatchPointerDownAction(source, keyState, action);\n                this.#inputState.cancelList.push({\n                    id,\n                    action: {\n                        ...action,\n                        type: protocol_js_1.Input.ActionType.PointerUp,\n                    },\n                });\n                break;\n            }\n            case protocol_js_1.Input.ActionType.PointerMove: {\n                // SAFETY: The source is validated before.\n                await this.#dispatchPointerMoveAction(source, keyState, action);\n                break;\n            }\n            case protocol_js_1.Input.ActionType.PointerUp: {\n                // SAFETY: The source is validated before.\n                await this.#dispatchPointerUpAction(source, keyState, action);\n                break;\n            }\n            case protocol_js_1.Input.ActionType.Scroll: {\n                // SAFETY: The source is validated before.\n                await this.#dispatchScrollAction(source, keyState, action);\n                break;\n            }\n        }\n    }\n    #dispatchPointerDownAction(source, keyState, action) {\n        const { button } = action;\n        if (source.pressed.has(button)) {\n            return;\n        }\n        source.pressed.add(button);\n        const { x, y, subtype: pointerType } = source;\n        const { width, height, pressure, twist, tangentialPressure } = action;\n        const { tiltX, tiltY } = 'tiltX' in action ? action : {};\n        // TODO: Implement azimuth/altitude angle.\n        // --- Platform-specific code begins here ---\n        const { modifiers } = keyState;\n        switch (pointerType) {\n            case protocol_js_1.Input.PointerType.Mouse:\n            case protocol_js_1.Input.PointerType.Pen:\n                source.setClickCount({ x, y, timeStamp: performance.now() });\n                // TODO: Implement width and height when available.\n                return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                    type: 'mousePressed',\n                    x,\n                    y,\n                    modifiers,\n                    button: (() => {\n                        switch (button) {\n                            case 0:\n                                return 'left';\n                            case 1:\n                                return 'middle';\n                            case 2:\n                                return 'right';\n                            case 3:\n                                return 'back';\n                            case 4:\n                                return 'forward';\n                            default:\n                                return 'none';\n                        }\n                    })(),\n                    buttons: source.buttons,\n                    clickCount: source.clickCount,\n                    pointerType,\n                    tangentialPressure,\n                    tiltX,\n                    tiltY,\n                    twist,\n                    force: pressure,\n                });\n            case protocol_js_1.Input.PointerType.Touch:\n                return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchTouchEvent', {\n                    type: 'touchStart',\n                    touchPoints: [\n                        {\n                            x,\n                            y,\n                            radiusX: width,\n                            radiusY: height,\n                            tangentialPressure,\n                            tiltX,\n                            tiltY,\n                            twist,\n                            force: pressure,\n                            id: source.pointerId,\n                        },\n                    ],\n                    modifiers,\n                });\n        }\n        // --- Platform-specific code ends here ---\n    }\n    #dispatchPointerUpAction(source, keyState, action) {\n        const { button } = action;\n        if (!source.pressed.has(button)) {\n            return;\n        }\n        source.pressed.delete(button);\n        const { x, y, subtype: pointerType } = source;\n        // --- Platform-specific code begins here ---\n        const { modifiers } = keyState;\n        switch (pointerType) {\n            case protocol_js_1.Input.PointerType.Mouse:\n            case protocol_js_1.Input.PointerType.Pen:\n                // TODO: Implement width and height when available.\n                return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                    type: 'mouseReleased',\n                    x,\n                    y,\n                    modifiers,\n                    button: (() => {\n                        switch (button) {\n                            case 0:\n                                return 'left';\n                            case 1:\n                                return 'middle';\n                            case 2:\n                                return 'right';\n                            case 3:\n                                return 'back';\n                            case 4:\n                                return 'forward';\n                            default:\n                                return 'none';\n                        }\n                    })(),\n                    buttons: source.buttons,\n                    clickCount: source.clickCount,\n                    pointerType,\n                });\n            case protocol_js_1.Input.PointerType.Touch:\n                return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchTouchEvent', {\n                    type: 'touchEnd',\n                    touchPoints: [\n                        {\n                            x,\n                            y,\n                            id: source.pointerId,\n                        },\n                    ],\n                    modifiers,\n                });\n        }\n        // --- Platform-specific code ends here ---\n    }\n    async #dispatchPointerMoveAction(source, keyState, action) {\n        const { x: startX, y: startY, subtype: pointerType } = source;\n        const { width, height, pressure, twist, tangentialPressure, x: offsetX, y: offsetY, origin = 'viewport', duration = this.#tickDuration, } = action;\n        const { tiltX, tiltY } = 'tiltX' in action ? action : {};\n        // TODO: Implement azimuth/altitude angle.\n        const { targetX, targetY } = await this.#getCoordinateFromOrigin(origin, offsetX, offsetY, startX, startY);\n        if (targetX < 0 || targetY < 0) {\n            throw new protocol_js_1.Message.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${targetX}, y: ${targetY})`);\n        }\n        let last;\n        do {\n            const ratio = duration > 0 ? (performance.now() - this.#tickStart) / duration : 1;\n            last = ratio >= 1;\n            let x;\n            let y;\n            if (last) {\n                x = targetX;\n                y = targetY;\n            }\n            else {\n                x = Math.round(ratio * (targetX - startX) + startX);\n                y = Math.round(ratio * (targetY - startY) + startY);\n            }\n            if (source.x !== x || source.y !== y) {\n                // --- Platform-specific code begins here ---\n                const { modifiers } = keyState;\n                switch (pointerType) {\n                    case protocol_js_1.Input.PointerType.Mouse:\n                    case protocol_js_1.Input.PointerType.Pen:\n                        // TODO: Implement width and height when available.\n                        await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                            type: 'mouseMoved',\n                            x,\n                            y,\n                            modifiers,\n                            clickCount: 0,\n                            buttons: source.buttons,\n                            pointerType,\n                            tangentialPressure,\n                            tiltX,\n                            tiltY,\n                            twist,\n                            force: pressure,\n                        });\n                        break;\n                    case protocol_js_1.Input.PointerType.Touch:\n                        await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchTouchEvent', {\n                            type: 'touchMove',\n                            touchPoints: [\n                                {\n                                    x,\n                                    y,\n                                    radiusX: width,\n                                    radiusY: height,\n                                    tangentialPressure,\n                                    tiltX,\n                                    tiltY,\n                                    twist,\n                                    force: pressure,\n                                    id: source.pointerId,\n                                },\n                            ],\n                            modifiers,\n                        });\n                        break;\n                }\n                // --- Platform-specific code ends here ---\n                source.x = x;\n                source.y = y;\n            }\n        } while (!last);\n    }\n    async #getCoordinateFromOrigin(origin, offsetX, offsetY, startX, startY) {\n        let targetX;\n        let targetY;\n        switch (origin) {\n            case 'viewport':\n                targetX = offsetX;\n                targetY = offsetY;\n                break;\n            case 'pointer':\n                targetX = startX + offsetX;\n                targetY = startY + offsetY;\n                break;\n            default: {\n                const { x: posX, y: posY } = await getElementCenter(this.#context, origin.element);\n                // SAFETY: These can never be special numbers.\n                targetX = posX + offsetX;\n                targetY = posY + offsetY;\n                break;\n            }\n        }\n        return { targetX, targetY };\n    }\n    async #dispatchScrollAction(_source, keyState, action) {\n        const { deltaX: targetDeltaX, deltaY: targetDeltaY, x: offsetX, y: offsetY, origin = 'viewport', duration = this.#tickDuration, } = action;\n        if (origin === 'pointer') {\n            throw new protocol_js_1.Message.InvalidArgumentException('\"pointer\" origin is invalid for scrolling.');\n        }\n        const { targetX, targetY } = await this.#getCoordinateFromOrigin(origin, offsetX, offsetY, 0, 0);\n        if (targetX < 0 || targetY < 0) {\n            throw new protocol_js_1.Message.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${targetX}, y: ${targetY})`);\n        }\n        let currentDeltaX = 0;\n        let currentDeltaY = 0;\n        let last;\n        do {\n            const ratio = duration > 0 ? (performance.now() - this.#tickStart) / duration : 1;\n            last = ratio >= 1;\n            let deltaX;\n            let deltaY;\n            if (last) {\n                deltaX = targetDeltaX - currentDeltaX;\n                deltaY = targetDeltaY - currentDeltaY;\n            }\n            else {\n                deltaX = Math.round(ratio * targetDeltaX - currentDeltaX);\n                deltaY = Math.round(ratio * targetDeltaY - currentDeltaY);\n            }\n            if (deltaX !== 0 || deltaY !== 0) {\n                // --- Platform-specific code begins here ---\n                const { modifiers } = keyState;\n                await this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchMouseEvent', {\n                    type: 'mouseWheel',\n                    deltaX,\n                    deltaY,\n                    x: targetX,\n                    y: targetY,\n                    modifiers,\n                });\n                // --- Platform-specific code ends here ---\n                currentDeltaX += deltaX;\n                currentDeltaY += deltaY;\n            }\n        } while (!last);\n    }\n    #dispatchKeyDownAction(source, action) {\n        const rawKey = action.value;\n        const key = (0, keyUtils_js_1.getNormalizedKey)(rawKey);\n        const repeat = source.pressed.has(key);\n        const code = (0, keyUtils_js_1.getKeyCode)(rawKey);\n        const location = (0, keyUtils_js_1.getKeyLocation)(rawKey);\n        switch (key) {\n            case 'Alt':\n                source.alt = true;\n                break;\n            case 'Shift':\n                source.shift = true;\n                break;\n            case 'Control':\n                source.ctrl = true;\n                break;\n            case 'Meta':\n                source.meta = true;\n                break;\n        }\n        source.pressed.add(key);\n        const { modifiers } = source;\n        // --- Platform-specific code begins here ---\n        // The spread is a little hack so JS gives us an array of unicode characters\n        // to measure.\n        const unmodifiedText = getKeyEventUnmodifiedText(key, source);\n        const text = getKeyEventText(code ?? '', source) ?? unmodifiedText;\n        let command;\n        // The following commands need to be declared because Chromium doesn't\n        // handle them. See\n        // https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:third_party/blink/renderer/core/editing/editing_behavior.cc;l=169;drc=b8143cf1dfd24842890fcd831c4f5d909bef4fc4;bpv=0;bpt=1.\n        if (this.#isMacOS && source.meta) {\n            switch (code) {\n                case 'KeyA':\n                    command = 'SelectAll';\n                    break;\n                case 'KeyC':\n                    command = 'Copy';\n                    break;\n                case 'KeyV':\n                    command = source.shift ? 'PasteAndMatchStyle' : 'Paste';\n                    break;\n                case 'KeyX':\n                    command = 'Cut';\n                    break;\n                case 'KeyZ':\n                    command = source.shift ? 'Redo' : 'Undo';\n                    break;\n                default:\n            }\n        }\n        return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchKeyEvent', {\n            type: text ? 'keyDown' : 'rawKeyDown',\n            windowsVirtualKeyCode: USKeyboardLayout_js_1.KeyToKeyCode[key],\n            key,\n            code,\n            text,\n            unmodifiedText,\n            autoRepeat: repeat,\n            isSystemKey: source.alt || undefined,\n            location: location < 3 ? location : undefined,\n            isKeypad: location === 3,\n            modifiers,\n            commands: command ? [command] : undefined,\n        });\n        // --- Platform-specific code ends here ---\n    }\n    #dispatchKeyUpAction(source, action) {\n        const rawKey = action.value;\n        const key = (0, keyUtils_js_1.getNormalizedKey)(rawKey);\n        if (!source.pressed.has(key)) {\n            return;\n        }\n        const code = (0, keyUtils_js_1.getKeyCode)(rawKey);\n        const location = (0, keyUtils_js_1.getKeyLocation)(rawKey);\n        switch (key) {\n            case 'Alt':\n                source.alt = false;\n                break;\n            case 'Shift':\n                source.shift = false;\n                break;\n            case 'Control':\n                source.ctrl = false;\n                break;\n            case 'Meta':\n                source.meta = false;\n                break;\n        }\n        source.pressed.delete(key);\n        const { modifiers } = source;\n        // --- Platform-specific code begins here ---\n        // The spread is a little hack so JS gives us an array of unicode characters\n        // to measure.\n        const unmodifiedText = getKeyEventUnmodifiedText(key, source);\n        const text = getKeyEventText(code ?? '', source) ?? unmodifiedText;\n        return this.#context.cdpTarget.cdpClient.sendCommand('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            windowsVirtualKeyCode: USKeyboardLayout_js_1.KeyToKeyCode[key],\n            key,\n            code,\n            text,\n            unmodifiedText,\n            location: location < 3 ? location : undefined,\n            isSystemKey: source.alt || undefined,\n            isKeypad: location === 3,\n            modifiers,\n        });\n        // --- Platform-specific code ends here ---\n    }\n}\nexports.ActionDispatcher = ActionDispatcher;\nconst getKeyEventUnmodifiedText = (key, source) => {\n    if (key === 'Enter') {\n        return '\\r';\n    }\n    return [...key].length === 1\n        ? source.shift\n            ? key.toLocaleUpperCase('en-US')\n            : key\n        : undefined;\n};\nconst getKeyEventText = (code, source) => {\n    if (source.ctrl) {\n        switch (code) {\n            case 'Digit2':\n                if (source.shift) {\n                    return '\\x00';\n                }\n                break;\n            case 'KeyA':\n                return '\\x01';\n            case 'KeyB':\n                return '\\x02';\n            case 'KeyC':\n                return '\\x03';\n            case 'KeyD':\n                return '\\x04';\n            case 'KeyE':\n                return '\\x05';\n            case 'KeyF':\n                return '\\x06';\n            case 'KeyG':\n                return '\\x07';\n            case 'KeyH':\n                return '\\x08';\n            case 'KeyI':\n                return '\\x09';\n            case 'KeyJ':\n                return '\\x0A';\n            case 'KeyK':\n                return '\\x0B';\n            case 'KeyL':\n                return '\\x0C';\n            case 'KeyM':\n                return '\\x0D';\n            case 'KeyN':\n                return '\\x0E';\n            case 'KeyO':\n                return '\\x0F';\n            case 'KeyP':\n                return '\\x10';\n            case 'KeyQ':\n                return '\\x11';\n            case 'KeyR':\n                return '\\x12';\n            case 'KeyS':\n                return '\\x13';\n            case 'KeyT':\n                return '\\x14';\n            case 'KeyU':\n                return '\\x15';\n            case 'KeyV':\n                return '\\x16';\n            case 'KeyW':\n                return '\\x17';\n            case 'KeyX':\n                return '\\x18';\n            case 'KeyY':\n                return '\\x19';\n            case 'KeyZ':\n                return '\\x1A';\n            case 'BracketLeft':\n                return '\\x1B';\n            case 'Backslash':\n                return '\\x1C';\n            case 'BracketRight':\n                return '\\x1D';\n            case 'Digit6':\n                if (source.shift) {\n                    return '\\x1E';\n                }\n                break;\n            case 'Minus':\n                return '\\x1F';\n        }\n        return '';\n    }\n    if (source.alt) {\n        return '';\n    }\n    return;\n};\n//# sourceMappingURL=ActionDispatcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PreloadScriptStorage = void 0;\n/**\n * Container class for preload scripts.\n */\nclass PreloadScriptStorage {\n    /** Tracks all BiDi preload scripts.  */\n    #scripts = new Set();\n    /** Finds all entries that match the given filter. */\n    findPreloadScripts(filter) {\n        if (!filter) {\n            return [...this.#scripts];\n        }\n        return [...this.#scripts].filter((script) => {\n            if (filter.id !== undefined && filter.id !== script.id) {\n                return false;\n            }\n            if (filter.contextId !== undefined &&\n                filter.contextId !== script.contextId) {\n                return false;\n            }\n            if (filter.contextIds !== undefined &&\n                !filter.contextIds.includes(script.contextId)) {\n                return false;\n            }\n            if (filter.targetId !== undefined &&\n                !script.targetIds.has(filter.targetId)) {\n                return false;\n            }\n            return true;\n        });\n    }\n    addPreloadScript(preloadScript) {\n        this.#scripts.add(preloadScript);\n    }\n    /** Deletes all BiDi preload script entries that match the given filter. */\n    removeBiDiPreloadScripts(filter) {\n        for (const preloadScript of this.findPreloadScripts(filter)) {\n            this.#scripts.delete(preloadScript);\n        }\n    }\n}\nexports.PreloadScriptStorage = PreloadScriptStorage;\n//# sourceMappingURL=PreloadScriptStorage.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inchesFromCm = void 0;\n/** @return Given an input in cm, convert it to inches. */\nfunction inchesFromCm(cm) {\n    return cm / 2.54;\n}\nexports.inchesFromCm = inchesFromCm;\n//# sourceMappingURL=unitConversions.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Deferred = void 0;\nclass Deferred {\n    #isFinished = false;\n    #promise;\n    #resolve;\n    #reject;\n    get isFinished() {\n        return this.#isFinished;\n    }\n    constructor() {\n        this.#promise = new Promise((resolve, reject) => {\n            this.#resolve = resolve;\n            this.#reject = reject;\n        });\n        // Needed to avoid `Uncaught (in promise)`. The promises returned by `then`\n        // and `catch` will be rejected anyway.\n        this.#promise.catch((_error) => {\n            // Intentionally empty.\n        });\n    }\n    then(onFulfilled, onRejected) {\n        return this.#promise.then(onFulfilled, onRejected);\n    }\n    catch(onRejected) {\n        return this.#promise.catch(onRejected);\n    }\n    resolve(value) {\n        this.#isFinished = true;\n        this.#resolve?.(value);\n    }\n    reject(reason) {\n        this.#isFinished = true;\n        this.#reject?.(reason);\n    }\n    finally(onFinally) {\n        return this.#promise.finally(onFinally);\n    }\n    [Symbol.toStringTag] = 'Promise';\n}\nexports.Deferred = Deferred;\n//# sourceMappingURL=deferred.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uuidv4 = void 0;\n/**\n * Generates a random v4 UUID, as specified in RFC4122.\n *\n * Uses the native Web Crypto API if available, otherwise falls back to a\n * polyfill.\n *\n * Example: '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'\n */\nfunction uuidv4() {\n    // Available only in secure contexts\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API\n    if ('crypto' in globalThis && 'randomUUID' in globalThis.crypto) {\n        // Node with\n        // https://nodejs.org/dist/latest-v20.x/docs/api/globals.html#crypto_1 or\n        // secure browser context.\n        return globalThis.crypto.randomUUID();\n    }\n    const randomValues = new Uint8Array(16);\n    if ('crypto' in globalThis && 'getRandomValues' in globalThis.crypto) {\n        // Node with\n        // https://nodejs.org/dist/latest-v20.x/docs/api/globals.html#crypto_1 or\n        // browser.\n        globalThis.crypto.getRandomValues(randomValues);\n    }\n    else {\n        // Node without\n        // https://nodejs.org/dist/latest-v20.x/docs/api/globals.html#crypto_1.\n        // eslint-disable-next-line @typescript-eslint/no-var-requires\n        require('crypto').webcrypto.getRandomValues(randomValues);\n    }\n    // Set version (4) and variant (RFC4122) bits.\n    randomValues[6] = (randomValues[6] & 0x0f) | 0x40;\n    randomValues[8] = (randomValues[8] & 0x3f) | 0x80;\n    const bytesToHex = (bytes) => bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\n    return [\n        bytesToHex(randomValues.subarray(0, 4)),\n        bytesToHex(randomValues.subarray(4, 6)),\n        bytesToHex(randomValues.subarray(6, 8)),\n        bytesToHex(randomValues.subarray(8, 10)),\n        bytesToHex(randomValues.subarray(10, 16)),\n    ].join('-');\n}\nexports.uuidv4 = uuidv4;\n//# sourceMappingURL=uuid.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChannelProxy = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst uuid_1 = require(\"../../../utils/uuid\");\n/**\n * Used to send messages from realm to BiDi user.\n */\nclass ChannelProxy {\n    #properties;\n    #id = (0, uuid_1.uuidv4)();\n    constructor(channel) {\n        if (![0, null, undefined].includes(channel.serializationOptions?.maxDomDepth)) {\n            throw new Error('serializationOptions.maxDomDepth other than 0 or null is not supported');\n        }\n        if (![undefined, 'none'].includes(channel.serializationOptions?.includeShadowTree)) {\n            throw new Error('serializationOptions.includeShadowTree other than \"none\" is not supported');\n        }\n        this.#properties = channel;\n    }\n    /**\n     * Creates a channel proxy in the given realm, initialises listener and\n     * returns a handle to `sendMessage` delegate.\n     */\n    async init(realm, eventManager) {\n        const channelHandle = await ChannelProxy.#createAndGetHandleInRealm(realm);\n        const sendMessageHandle = await ChannelProxy.#createSendMessageHandle(realm, channelHandle);\n        void this.#startListener(realm, channelHandle, eventManager);\n        return sendMessageHandle;\n    }\n    /** Gets a ChannelProxy from window and returns its handle. */\n    async startListenerFromWindow(realm, eventManager) {\n        const channelHandle = await this.#getHandleFromWindow(realm);\n        void this.#startListener(realm, channelHandle, eventManager);\n    }\n    /**\n     * Evaluation string which creates a ChannelProxy object on the client side.\n     */\n    static #createChannelProxyEvalStr() {\n        const functionStr = String(() => {\n            const queue = [];\n            let queueNonEmptyResolver = null;\n            return {\n                /**\n                 * Gets a promise, which is resolved as soon as a message occurs\n                 * in the queue.\n                 */\n                async getMessage() {\n                    const onMessage = queue.length > 0\n                        ? Promise.resolve()\n                        : new Promise((resolve) => {\n                            queueNonEmptyResolver = resolve;\n                        });\n                    await onMessage;\n                    return queue.shift();\n                },\n                /**\n                 * Adds a message to the queue.\n                 * Resolves the pending promise if needed.\n                 */\n                sendMessage(message) {\n                    queue.push(message);\n                    if (queueNonEmptyResolver !== null) {\n                        queueNonEmptyResolver();\n                        queueNonEmptyResolver = null;\n                    }\n                },\n            };\n        });\n        return `(${functionStr})()`;\n    }\n    /** Creates a ChannelProxy in the given realm. */\n    static async #createAndGetHandleInRealm(realm) {\n        const createChannelHandleResult = await realm.cdpClient.sendCommand('Runtime.evaluate', {\n            expression: this.#createChannelProxyEvalStr(),\n            contextId: realm.executionContextId,\n            serializationOptions: {\n                serialization: 'idOnly',\n            },\n        });\n        if (createChannelHandleResult.exceptionDetails ||\n            createChannelHandleResult.result.objectId === undefined) {\n            throw new Error(`Cannot create channel`);\n        }\n        return createChannelHandleResult.result.objectId;\n    }\n    /** Gets a handle to `sendMessage` delegate from the ChannelProxy handle. */\n    static async #createSendMessageHandle(realm, channelHandle) {\n        const sendMessageArgResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((channelHandle) => {\n                return channelHandle.sendMessage;\n            }),\n            arguments: [{ objectId: channelHandle }],\n            executionContextId: realm.executionContextId,\n            serializationOptions: {\n                serialization: 'idOnly',\n            },\n        });\n        // TODO: check for exceptionDetails.\n        return sendMessageArgResult.result.objectId;\n    }\n    /** Starts listening for the channel events of the provided ChannelProxy. */\n    async #startListener(realm, channelHandle, eventManager) {\n        // TODO(#294): Remove this loop after the realm is destroyed.\n        // Rely on the CDP throwing exception in such a case.\n        // noinspection InfiniteLoopJS\n        for (;;) {\n            const message = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                functionDeclaration: String(async (channelHandle) => channelHandle.getMessage()),\n                arguments: [\n                    {\n                        objectId: channelHandle,\n                    },\n                ],\n                awaitPromise: true,\n                executionContextId: realm.executionContextId,\n                serializationOptions: {\n                    serialization: 'deep',\n                    ...(this.#properties.serializationOptions?.maxObjectDepth ===\n                        undefined ||\n                        this.#properties.serializationOptions.maxObjectDepth === null\n                        ? {}\n                        : {\n                            maxDepth: this.#properties.serializationOptions.maxObjectDepth,\n                        }),\n                },\n            });\n            if (message.exceptionDetails) {\n                // TODO: add logging.\n                // TODO: check if a error should be thrown.\n                return;\n            }\n            eventManager.registerEvent({\n                method: protocol_js_1.Script.EventNames.MessageEvent,\n                params: {\n                    channel: this.#properties.channel,\n                    data: realm.cdpToBidiValue(message, this.#properties.ownership ?? 'none'),\n                    source: {\n                        realm: realm.realmId,\n                        context: realm.browsingContextId,\n                    },\n                },\n            }, realm.browsingContextId);\n        }\n    }\n    /**\n     * Returns a handle of ChannelProxy from window's property which was set there\n     * by `getEvalInWindowStr`. If window property is not set yet, sets a promise\n     * resolver to the window property, so that `getEvalInWindowStr` can resolve\n     * the promise later on with the channel.\n     * This is needed because `getEvalInWindowStr` can be called before or\n     * after this method.\n     */\n    async #getHandleFromWindow(realm) {\n        const channelHandleResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((id) => {\n                const w = window;\n                if (w[id] === undefined) {\n                    // The channelProxy is not created yet. Create a promise, put the\n                    // resolver to window property and return the promise.\n                    // `getEvalInWindowStr` will resolve the promise later.\n                    return new Promise((resolve) => (w[id] = resolve));\n                }\n                // The channelProxy is already created by `getEvalInWindowStr` and\n                // is set into window property. Return it.\n                const channelProxy = w[id];\n                delete w[id];\n                return channelProxy;\n            }),\n            arguments: [{ value: this.#id }],\n            executionContextId: realm.executionContextId,\n            awaitPromise: true,\n            serializationOptions: {\n                serialization: 'idOnly',\n            },\n        });\n        if (channelHandleResult.exceptionDetails !== undefined ||\n            channelHandleResult.result.objectId === undefined) {\n            throw new Error(`ChannelHandle not found in window[\"${this.#id}\"]`);\n        }\n        return channelHandleResult.result.objectId;\n    }\n    /**\n     * String to be evaluated to create a ProxyChannel and put it to window.\n     * Returns the delegate `sendMessage`. Used to provide an argument for preload\n     * script. Does the following:\n     * 1. Creates a ChannelProxy.\n     * 2. Puts the ChannelProxy to window['${this.#id}'] or resolves the promise\n     *    by calling delegate stored in window['${this.#id}'].\n     *    This is needed because `#getHandleFromWindow` can be called before or\n     *    after this method.\n     * 3. Returns the delegate `sendMessage` of the created ChannelProxy.\n     */\n    getEvalInWindowStr() {\n        const delegate = String((id, channelProxy) => {\n            const w = window;\n            if (w[id] === undefined) {\n                // `#getHandleFromWindow` is not initialized yet, and will get the\n                // channelProxy later.\n                w[id] = channelProxy;\n            }\n            else {\n                // `#getHandleFromWindow` is already set a delegate to window property\n                // and is waiting for it to be called with the channelProxy.\n                w[id](channelProxy);\n                delete w[id];\n            }\n            return channelProxy.sendMessage;\n        });\n        const channelProxyEval = ChannelProxy.#createChannelProxyEvalStr();\n        return `(${delegate})('${this.#id}',${channelProxyEval})`;\n    }\n}\nexports.ChannelProxy = ChannelProxy;\n//# sourceMappingURL=channelProxy.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScriptEvaluator = exports.SHARED_ID_DIVIDER = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst channelProxy_js_1 = require(\"./channelProxy.js\");\n// As `script.evaluate` wraps call into serialization script, `lineNumber`\n// should be adjusted.\nconst CALL_FUNCTION_STACKTRACE_LINE_OFFSET = 1;\nconst EVALUATE_STACKTRACE_LINE_OFFSET = 0;\nexports.SHARED_ID_DIVIDER = '_element_';\nclass ScriptEvaluator {\n    #eventManager;\n    constructor(eventManager) {\n        this.#eventManager = eventManager;\n    }\n    /**\n     * Gets the string representation of an object. This is equivalent to\n     * calling toString() on the object value.\n     * @param cdpObject CDP remote object representing an object.\n     * @param realm\n     * @return string The stringified object.\n     */\n    static async stringifyObject(cdpObject, realm) {\n        const stringifyResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((obj) => {\n                return String(obj);\n            }),\n            awaitPromise: false,\n            arguments: [cdpObject],\n            returnByValue: true,\n            executionContextId: realm.executionContextId,\n        });\n        return stringifyResult.result.value;\n    }\n    /**\n     * Serializes a given CDP object into BiDi, keeping references in the\n     * target's `globalThis`.\n     * @param cdpRemoteObject CDP remote object to be serialized.\n     * @param resultOwnership Indicates desired ResultOwnership.\n     * @param realm\n     */\n    async serializeCdpObject(cdpRemoteObject, resultOwnership, realm) {\n        const arg = ScriptEvaluator.#cdpRemoteObjectToCallArgument(cdpRemoteObject);\n        const cdpWebDriverValue = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n            functionDeclaration: String((obj) => obj),\n            awaitPromise: false,\n            arguments: [arg],\n            serializationOptions: {\n                serialization: 'deep',\n            },\n            executionContextId: realm.executionContextId,\n        });\n        return realm.cdpToBidiValue(cdpWebDriverValue, resultOwnership);\n    }\n    async scriptEvaluate(realm, expression, awaitPromise, resultOwnership, serializationOptions) {\n        if (![0, null, undefined].includes(serializationOptions.maxDomDepth))\n            throw new Error('serializationOptions.maxDomDepth other than 0 or null is not supported');\n        const cdpEvaluateResult = await realm.cdpClient.sendCommand('Runtime.evaluate', {\n            contextId: realm.executionContextId,\n            expression,\n            awaitPromise,\n            serializationOptions: {\n                serialization: 'deep',\n                ...(serializationOptions.maxObjectDepth === undefined ||\n                    serializationOptions.maxObjectDepth === null\n                    ? {}\n                    : { maxDepth: serializationOptions.maxObjectDepth }),\n            },\n        });\n        if (cdpEvaluateResult.exceptionDetails) {\n            // Serialize exception details.\n            return {\n                exceptionDetails: await this.#serializeCdpExceptionDetails(cdpEvaluateResult.exceptionDetails, EVALUATE_STACKTRACE_LINE_OFFSET, resultOwnership, realm),\n                type: 'exception',\n                realm: realm.realmId,\n            };\n        }\n        return {\n            type: 'success',\n            result: realm.cdpToBidiValue(cdpEvaluateResult, resultOwnership),\n            realm: realm.realmId,\n        };\n    }\n    async callFunction(realm, functionDeclaration, _this, _arguments, awaitPromise, resultOwnership, serializationOptions) {\n        if (![0, null, undefined].includes(serializationOptions.maxDomDepth))\n            throw new Error('serializationOptions.maxDomDepth other than 0 or null is not supported');\n        const callFunctionAndSerializeScript = `(...args)=>{ return _callFunction((\\n${functionDeclaration}\\n), args);\n      function _callFunction(f, args) {\n        const deserializedThis = args.shift();\n        const deserializedArgs = args;\n        return f.apply(deserializedThis, deserializedArgs);\n      }}`;\n        const thisAndArgumentsList = [\n            await this.#deserializeToCdpArg(_this, realm),\n        ];\n        thisAndArgumentsList.push(...(await Promise.all(_arguments.map(async (a) => {\n            return this.#deserializeToCdpArg(a, realm);\n        }))));\n        let cdpCallFunctionResult;\n        try {\n            cdpCallFunctionResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                functionDeclaration: callFunctionAndSerializeScript,\n                awaitPromise,\n                arguments: thisAndArgumentsList,\n                serializationOptions: {\n                    serialization: 'deep',\n                    ...(serializationOptions.maxObjectDepth === undefined ||\n                        serializationOptions.maxObjectDepth === null\n                        ? {}\n                        : { maxDepth: serializationOptions.maxObjectDepth }),\n                },\n                executionContextId: realm.executionContextId,\n            });\n        }\n        catch (e) {\n            // Heuristic to determine if the problem is in the argument.\n            // The check can be done on the `deserialization` step, but this approach\n            // helps to save round-trips.\n            if (e.code === -32000 &&\n                [\n                    'Could not find object with given id',\n                    'Argument should belong to the same JavaScript world as target object',\n                    'Invalid remote object id',\n                ].includes(e.message)) {\n                throw new protocol_js_1.Message.NoSuchHandleException('Handle was not found.');\n            }\n            throw e;\n        }\n        if (cdpCallFunctionResult.exceptionDetails) {\n            // Serialize exception details.\n            return {\n                exceptionDetails: await this.#serializeCdpExceptionDetails(cdpCallFunctionResult.exceptionDetails, CALL_FUNCTION_STACKTRACE_LINE_OFFSET, resultOwnership, realm),\n                type: 'exception',\n                realm: realm.realmId,\n            };\n        }\n        return {\n            type: 'success',\n            result: realm.cdpToBidiValue(cdpCallFunctionResult, resultOwnership),\n            realm: realm.realmId,\n        };\n    }\n    static #cdpRemoteObjectToCallArgument(cdpRemoteObject) {\n        if (cdpRemoteObject.objectId !== undefined) {\n            return { objectId: cdpRemoteObject.objectId };\n        }\n        if (cdpRemoteObject.unserializableValue !== undefined) {\n            return { unserializableValue: cdpRemoteObject.unserializableValue };\n        }\n        return { value: cdpRemoteObject.value };\n    }\n    async #deserializeToCdpArg(argumentValue, realm) {\n        if ('sharedId' in argumentValue) {\n            const [navigableId, rawBackendNodeId] = argumentValue.sharedId.split(exports.SHARED_ID_DIVIDER);\n            const backendNodeId = parseInt(rawBackendNodeId ?? '');\n            if (isNaN(backendNodeId) ||\n                backendNodeId === undefined ||\n                navigableId === undefined) {\n                throw new protocol_js_1.Message.NoSuchNodeException(`SharedId \"${argumentValue.sharedId}\" was not found.`);\n            }\n            if (realm.navigableId !== navigableId) {\n                throw new protocol_js_1.Message.NoSuchNodeException(`SharedId \"${argumentValue.sharedId}\" belongs to different document. Current document is ${realm.navigableId}.`);\n            }\n            try {\n                const obj = await realm.cdpClient.sendCommand('DOM.resolveNode', {\n                    backendNodeId,\n                    executionContextId: realm.executionContextId,\n                });\n                // TODO(#375): Release `obj.object.objectId` after using.\n                return { objectId: obj.object.objectId };\n            }\n            catch (e) {\n                // Heuristic to detect \"no such node\" exception. Based on the  specific\n                // CDP implementation.\n                if (e.code === -32000 && e.message === 'No node with given id found') {\n                    throw new protocol_js_1.Message.NoSuchNodeException(`SharedId \"${argumentValue.sharedId}\" was not found.`);\n                }\n                throw e;\n            }\n        }\n        if ('handle' in argumentValue) {\n            return { objectId: argumentValue.handle };\n        }\n        switch (argumentValue.type) {\n            // Primitive Protocol Value\n            // https://w3c.github.io/webdriver-bidi/#data-types-protocolValue-primitiveProtocolValue\n            case 'undefined':\n                return { unserializableValue: 'undefined' };\n            case 'null':\n                return { unserializableValue: 'null' };\n            case 'string':\n                return { value: argumentValue.value };\n            case 'number':\n                if (argumentValue.value === 'NaN') {\n                    return { unserializableValue: 'NaN' };\n                }\n                else if (argumentValue.value === '-0') {\n                    return { unserializableValue: '-0' };\n                }\n                else if (argumentValue.value === 'Infinity') {\n                    return { unserializableValue: 'Infinity' };\n                }\n                else if (argumentValue.value === '-Infinity') {\n                    return { unserializableValue: '-Infinity' };\n                }\n                return {\n                    value: argumentValue.value,\n                };\n            case 'boolean':\n                return { value: Boolean(argumentValue.value) };\n            case 'bigint':\n                return {\n                    unserializableValue: `BigInt(${JSON.stringify(argumentValue.value)})`,\n                };\n            case 'date':\n                return {\n                    unserializableValue: `new Date(Date.parse(${JSON.stringify(argumentValue.value)}))`,\n                };\n            case 'regexp':\n                return {\n                    unserializableValue: `new RegExp(${JSON.stringify(argumentValue.value.pattern)}, ${JSON.stringify(argumentValue.value.flags)})`,\n                };\n            case 'map': {\n                // TODO: If none of the nested keys and values has a remote\n                // reference, serialize to `unserializableValue` without CDP roundtrip.\n                const keyValueArray = await this.#flattenKeyValuePairs(argumentValue.value, realm);\n                const argEvalResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => {\n                        const result = new Map();\n                        for (let i = 0; i < args.length; i += 2) {\n                            result.set(args[i], args[i + 1]);\n                        }\n                        return result;\n                    }),\n                    awaitPromise: false,\n                    arguments: keyValueArray,\n                    returnByValue: false,\n                    executionContextId: realm.executionContextId,\n                });\n                // TODO(#375): Release `argEvalResult.result.objectId` after using.\n                return { objectId: argEvalResult.result.objectId };\n            }\n            case 'object': {\n                // TODO: If none of the nested keys and values has a remote\n                //  reference, serialize to `unserializableValue` without CDP roundtrip.\n                const keyValueArray = await this.#flattenKeyValuePairs(argumentValue.value, realm);\n                const argEvalResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => {\n                        const result = {};\n                        for (let i = 0; i < args.length; i += 2) {\n                            // Key should be either `string`, `number`, or `symbol`.\n                            const key = args[i];\n                            result[key] = args[i + 1];\n                        }\n                        return result;\n                    }),\n                    awaitPromise: false,\n                    arguments: keyValueArray,\n                    returnByValue: false,\n                    executionContextId: realm.executionContextId,\n                });\n                // TODO(#375): Release `argEvalResult.result.objectId` after using.\n                return { objectId: argEvalResult.result.objectId };\n            }\n            case 'array': {\n                // TODO: If none of the nested items has a remote reference,\n                // serialize to `unserializableValue` without CDP roundtrip.\n                const args = await this.#flattenValueList(argumentValue.value, realm);\n                const argEvalResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => {\n                        return args;\n                    }),\n                    awaitPromise: false,\n                    arguments: args,\n                    returnByValue: false,\n                    executionContextId: realm.executionContextId,\n                });\n                // TODO(#375): Release `argEvalResult.result.objectId` after using.\n                return { objectId: argEvalResult.result.objectId };\n            }\n            case 'set': {\n                // TODO: if none of the nested items has a remote reference,\n                // serialize to `unserializableValue` without CDP roundtrip.\n                const args = await this.#flattenValueList(argumentValue.value, realm);\n                const argEvalResult = await realm.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                    functionDeclaration: String((...args) => {\n                        return new Set(args);\n                    }),\n                    awaitPromise: false,\n                    arguments: args,\n                    returnByValue: false,\n                    executionContextId: realm.executionContextId,\n                });\n                // TODO(#375): Release `argEvalResult.result.objectId` after using.\n                return { objectId: argEvalResult.result.objectId };\n            }\n            case 'channel': {\n                const channelProxy = new channelProxy_js_1.ChannelProxy(argumentValue.value);\n                const channelProxySendMessageHandle = await channelProxy.init(realm, this.#eventManager);\n                return { objectId: channelProxySendMessageHandle };\n            }\n            // TODO(#375): Dispose of nested objects.\n            default:\n                throw new Error(`Value ${JSON.stringify(argumentValue)} is not deserializable.`);\n        }\n    }\n    async #flattenKeyValuePairs(mapping, realm) {\n        const keyValueArray = [];\n        for (const [key, value] of mapping) {\n            let keyArg;\n            if (typeof key === 'string') {\n                // Key is a string.\n                keyArg = { value: key };\n            }\n            else {\n                // Key is a serialized value.\n                keyArg = await this.#deserializeToCdpArg(key, realm);\n            }\n            const valueArg = await this.#deserializeToCdpArg(value, realm);\n            keyValueArray.push(keyArg);\n            keyValueArray.push(valueArg);\n        }\n        return keyValueArray;\n    }\n    async #flattenValueList(list, realm) {\n        return Promise.all(list.map((value) => this.#deserializeToCdpArg(value, realm)));\n    }\n    async #serializeCdpExceptionDetails(cdpExceptionDetails, lineOffset, resultOwnership, realm) {\n        const callFrames = cdpExceptionDetails.stackTrace?.callFrames.map((frame) => ({\n            url: frame.url,\n            functionName: frame.functionName,\n            // As `script.evaluate` wraps call into serialization script, so\n            // `lineNumber` should be adjusted.\n            lineNumber: frame.lineNumber - lineOffset,\n            columnNumber: frame.columnNumber,\n        }));\n        const exception = await this.serializeCdpObject(\n        // Exception should always be there.\n        cdpExceptionDetails.exception, resultOwnership, realm);\n        const text = await ScriptEvaluator.stringifyObject(cdpExceptionDetails.exception, realm);\n        return {\n            exception,\n            columnNumber: cdpExceptionDetails.columnNumber,\n            // As `script.evaluate` wraps call into serialization script, so\n            // `lineNumber` should be adjusted.\n            lineNumber: cdpExceptionDetails.lineNumber - lineOffset,\n            stackTrace: {\n                callFrames: callFrames ?? [],\n            },\n            text: text || cdpExceptionDetails.text,\n        };\n    }\n}\nexports.ScriptEvaluator = ScriptEvaluator;\n//# sourceMappingURL=scriptEvaluator.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Realm = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst scriptEvaluator_js_1 = require(\"./scriptEvaluator.js\");\nclass Realm {\n    #realmStorage;\n    #browsingContextStorage;\n    #realmId;\n    #browsingContextId;\n    #executionContextId;\n    #origin;\n    #type;\n    #cdpClient;\n    #eventManager;\n    #scriptEvaluator;\n    sandbox;\n    cdpSessionId;\n    #logger;\n    constructor(realmStorage, browsingContextStorage, realmId, browsingContextId, executionContextId, origin, type, sandbox, cdpSessionId, cdpClient, eventManager, logger) {\n        this.#realmId = realmId;\n        this.#browsingContextId = browsingContextId;\n        this.#executionContextId = executionContextId;\n        this.sandbox = sandbox;\n        this.#origin = origin;\n        this.#type = type;\n        this.cdpSessionId = cdpSessionId;\n        this.#cdpClient = cdpClient;\n        this.#realmStorage = realmStorage;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#eventManager = eventManager;\n        this.#scriptEvaluator = new scriptEvaluator_js_1.ScriptEvaluator(this.#eventManager);\n        this.#realmStorage.addRealm(this);\n        this.#logger = logger;\n        this.#eventManager.registerEvent({\n            method: protocol_js_1.Script.EventNames.RealmCreated,\n            params: this.toBiDi(),\n        }, this.browsingContextId);\n    }\n    async #releaseObject(handle) {\n        try {\n            await this.cdpClient.sendCommand('Runtime.releaseObject', {\n                objectId: handle,\n            });\n        }\n        catch (e) {\n            // Heuristic to determine if the problem is in the unknown handler.\n            // Ignore the error if so.\n            if (!(e.code === -32000 && e.message === 'Invalid remote object id')) {\n                throw e;\n            }\n        }\n    }\n    async disown(handle) {\n        // Disowning an object from different realm does nothing.\n        if (this.#realmStorage.knownHandlesToRealm.get(handle) !== this.realmId) {\n            return;\n        }\n        await this.#releaseObject(handle);\n        this.#realmStorage.knownHandlesToRealm.delete(handle);\n    }\n    cdpToBidiValue(cdpValue, resultOwnership) {\n        const deepSerializedValue = cdpValue.result.deepSerializedValue;\n        const bidiValue = this.deepSerializedToBiDi(deepSerializedValue);\n        if (cdpValue.result.objectId) {\n            const objectId = cdpValue.result.objectId;\n            if (resultOwnership === 'root') {\n                // Extend BiDi value with `handle` based on required `resultOwnership`\n                // and  CDP response but not on the actual BiDi type.\n                bidiValue.handle = objectId;\n                // Remember all the handles sent to client.\n                this.#realmStorage.knownHandlesToRealm.set(objectId, this.realmId);\n            }\n            else {\n                // No need in awaiting for the object to be released.\n                void this.#releaseObject(objectId).catch((error) => this.#logger?.(log_js_1.LogType.system, error));\n            }\n        }\n        return bidiValue;\n    }\n    deepSerializedToBiDi(webDriverValue) {\n        // This relies on the CDP to implement proper BiDi serialization, except\n        // backendNodeId/sharedId and `platformobject`.\n        const result = webDriverValue;\n        if (Object.hasOwn(result, 'weakLocalObjectReference')) {\n            result.internalId = `${result.weakLocalObjectReference}`;\n            delete result['weakLocalObjectReference'];\n        }\n        // Platform object is a special case. It should have only `{type: object}`\n        // without `value` field.\n        if (result.type === 'platformobject') {\n            return { type: 'object' };\n        }\n        const bidiValue = result.value;\n        if (bidiValue === undefined) {\n            return result;\n        }\n        if (result.type === 'node') {\n            if (Object.hasOwn(bidiValue, 'backendNodeId')) {\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                result.sharedId = `${this.navigableId}${scriptEvaluator_js_1.SHARED_ID_DIVIDER}${bidiValue.backendNodeId}`;\n                delete bidiValue['backendNodeId'];\n            }\n            if (Object.hasOwn(bidiValue, 'children')) {\n                for (const i in bidiValue.children) {\n                    bidiValue.children[i] = this.deepSerializedToBiDi(bidiValue.children[i]);\n                }\n            }\n        }\n        // Recursively update the nested values.\n        if (['array', 'set'].includes(webDriverValue.type)) {\n            for (const i in bidiValue) {\n                bidiValue[i] = this.deepSerializedToBiDi(bidiValue[i]);\n            }\n        }\n        if (['object', 'map'].includes(webDriverValue.type)) {\n            for (const i in bidiValue) {\n                bidiValue[i] = [\n                    this.deepSerializedToBiDi(bidiValue[i][0]),\n                    this.deepSerializedToBiDi(bidiValue[i][1]),\n                ];\n            }\n        }\n        return result;\n    }\n    toBiDi() {\n        return {\n            realm: this.realmId,\n            origin: this.origin,\n            type: this.type,\n            context: this.browsingContextId,\n            ...(this.sandbox === undefined ? {} : { sandbox: this.sandbox }),\n        };\n    }\n    get realmId() {\n        return this.#realmId;\n    }\n    get navigableId() {\n        return (this.#browsingContextStorage.findContext(this.#browsingContextId)\n            ?.navigableId ?? 'UNKNOWN');\n    }\n    get browsingContextId() {\n        return this.#browsingContextId;\n    }\n    get executionContextId() {\n        return this.#executionContextId;\n    }\n    get origin() {\n        return this.#origin;\n    }\n    get type() {\n        return this.#type;\n    }\n    get cdpClient() {\n        return this.#cdpClient;\n    }\n    async callFunction(functionDeclaration, _this, _arguments, awaitPromise, resultOwnership, serializationOptions) {\n        const context = this.#browsingContextStorage.getContext(this.browsingContextId);\n        await context.awaitUnblocked();\n        return {\n            result: await this.#scriptEvaluator.callFunction(this, functionDeclaration, _this, _arguments, awaitPromise, resultOwnership, serializationOptions),\n        };\n    }\n    async scriptEvaluate(expression, awaitPromise, resultOwnership, serializationOptions) {\n        const context = this.#browsingContextStorage.getContext(this.browsingContextId);\n        await context.awaitUnblocked();\n        return {\n            result: await this.#scriptEvaluator.scriptEvaluate(this, expression, awaitPromise, resultOwnership, serializationOptions),\n        };\n    }\n    /**\n     * Serializes a given CDP object into BiDi, keeping references in the\n     * target's `globalThis`.\n     * @param cdpObject CDP remote object to be serialized.\n     * @param resultOwnership Indicates desired ResultOwnership.\n     */\n    async serializeCdpObject(cdpObject, resultOwnership) {\n        return this.#scriptEvaluator.serializeCdpObject(cdpObject, resultOwnership, this);\n    }\n    /**\n     * Gets the string representation of an object. This is equivalent to\n     * calling toString() on the object value.\n     * @param cdpObject CDP remote object representing an object.\n     * @return string The stringified object.\n     */\n    async stringifyObject(cdpObject) {\n        return scriptEvaluator_js_1.ScriptEvaluator.stringifyObject(cdpObject, this);\n    }\n    delete() {\n        this.#eventManager.registerEvent({\n            method: protocol_js_1.Script.EventNames.RealmDestroyed,\n            params: {\n                realm: this.realmId,\n            },\n        }, this.browsingContextId);\n    }\n}\nexports.Realm = Realm;\n//# sourceMappingURL=realm.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowsingContextImpl = void 0;\nconst unitConversions_js_1 = require(\"../../../utils/unitConversions.js\");\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst deferred_js_1 = require(\"../../../utils/deferred.js\");\nconst realm_js_1 = require(\"../script/realm.js\");\nclass BrowsingContextImpl {\n    /** The ID of this browsing context. */\n    #id;\n    /**\n     * The ID of the parent browsing context.\n     * If null, this is a top-level context.\n     */\n    #parentId;\n    /** Direct children browsing contexts. */\n    #children = new Set();\n    #browsingContextStorage;\n    #deferreds = {\n        documentInitialized: new deferred_js_1.Deferred(),\n        Page: {\n            navigatedWithinDocument: new deferred_js_1.Deferred(),\n            lifecycleEvent: {\n                DOMContentLoaded: new deferred_js_1.Deferred(),\n                load: new deferred_js_1.Deferred(),\n            },\n        },\n    };\n    #url = 'about:blank';\n    #eventManager;\n    #realmStorage;\n    #loaderId;\n    #cdpTarget;\n    #maybeDefaultRealm;\n    #isNavigating = false;\n    #logger;\n    constructor(cdpTarget, realmStorage, id, parentId, eventManager, browsingContextStorage, logger) {\n        this.#cdpTarget = cdpTarget;\n        this.#realmStorage = realmStorage;\n        this.#id = id;\n        this.#parentId = parentId;\n        this.#eventManager = eventManager;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#logger = logger;\n    }\n    static create(cdpTarget, realmStorage, id, parentId, eventManager, browsingContextStorage, logger) {\n        const context = new BrowsingContextImpl(cdpTarget, realmStorage, id, parentId, eventManager, browsingContextStorage, logger);\n        context.#initListeners();\n        browsingContextStorage.addContext(context);\n        if (!context.isTopLevelContext()) {\n            context.parent.addChild(context.id);\n        }\n        eventManager.registerEvent({\n            method: protocol_js_1.BrowsingContext.EventNames.ContextCreatedEvent,\n            params: context.serializeToBidiValue(),\n        }, context.id);\n        return context;\n    }\n    static getTimestamp() {\n        // `timestamp` from the event is MonotonicTime, not real time, so\n        // the best Mapper can do is to set the timestamp to the epoch time\n        // of the event arrived.\n        // https://chromedevtools.github.io/devtools-protocol/tot/Network/#type-MonotonicTime\n        return new Date().getTime();\n    }\n    /**\n     * @see https://html.spec.whatwg.org/multipage/document-sequences.html#navigable\n     */\n    get navigableId() {\n        return this.#loaderId;\n    }\n    delete() {\n        this.#deleteAllChildren();\n        this.#realmStorage.deleteRealms({\n            browsingContextId: this.id,\n        });\n        // Remove context from the parent.\n        if (!this.isTopLevelContext()) {\n            this.parent.#children.delete(this.id);\n        }\n        this.#eventManager.registerEvent({\n            method: protocol_js_1.BrowsingContext.EventNames.ContextDestroyedEvent,\n            params: this.serializeToBidiValue(),\n        }, this.id);\n        this.#browsingContextStorage.deleteContextById(this.id);\n    }\n    /** Returns the ID of this context. */\n    get id() {\n        return this.#id;\n    }\n    /** Returns the parent context ID. */\n    get parentId() {\n        return this.#parentId;\n    }\n    /** Returns the parent context. */\n    get parent() {\n        if (this.parentId === null) {\n            return null;\n        }\n        return this.#browsingContextStorage.getContext(this.parentId);\n    }\n    /** Returns all direct children contexts. */\n    get directChildren() {\n        return [...this.#children].map((id) => this.#browsingContextStorage.getContext(id));\n    }\n    /** Returns all children contexts, flattened. */\n    get allChildren() {\n        const children = this.directChildren;\n        return children.concat(...children.map((child) => child.allChildren));\n    }\n    /**\n     * Returns true if this is a top-level context.\n     * This is the case whenever the parent context ID is null.\n     */\n    isTopLevelContext() {\n        return this.#parentId === null;\n    }\n    get top() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let topContext = this;\n        let parent = topContext.parent;\n        while (parent) {\n            topContext = parent;\n            parent = topContext.parent;\n        }\n        return topContext;\n    }\n    addChild(childId) {\n        this.#children.add(childId);\n    }\n    #deleteAllChildren() {\n        this.directChildren.map((child) => child.delete());\n    }\n    get #defaultRealm() {\n        if (this.#maybeDefaultRealm === undefined) {\n            throw new Error(`No default realm for browsing context ${this.#id}`);\n        }\n        return this.#maybeDefaultRealm;\n    }\n    get cdpTarget() {\n        return this.#cdpTarget;\n    }\n    updateCdpTarget(cdpTarget) {\n        this.#cdpTarget = cdpTarget;\n        this.#initListeners();\n    }\n    get url() {\n        return this.#url;\n    }\n    async awaitLoaded() {\n        await this.#deferreds.Page.lifecycleEvent.load;\n    }\n    awaitUnblocked() {\n        return this.#cdpTarget.targetUnblocked;\n    }\n    async getOrCreateSandbox(sandbox) {\n        if (sandbox === undefined || sandbox === '') {\n            return this.#defaultRealm;\n        }\n        let maybeSandboxes = this.#realmStorage.findRealms({\n            browsingContextId: this.id,\n            sandbox,\n        });\n        if (maybeSandboxes.length === 0) {\n            await this.#cdpTarget.cdpClient.sendCommand('Page.createIsolatedWorld', {\n                frameId: this.id,\n                worldName: sandbox,\n            });\n            // `Runtime.executionContextCreated` should be emitted by the time the\n            // previous command is done.\n            maybeSandboxes = this.#realmStorage.findRealms({\n                browsingContextId: this.id,\n                sandbox,\n            });\n        }\n        if (maybeSandboxes.length !== 1) {\n            throw Error(`Sandbox ${sandbox} wasn't created.`);\n        }\n        return maybeSandboxes[0];\n    }\n    serializeToBidiValue(maxDepth = 0, addParentField = true) {\n        return {\n            context: this.#id,\n            url: this.url,\n            children: maxDepth > 0\n                ? this.directChildren.map((c) => c.serializeToBidiValue(maxDepth - 1, false))\n                : null,\n            ...(addParentField ? { parent: this.#parentId } : {}),\n        };\n    }\n    onTargetInfoChanged(params) {\n        this.#url = params.targetInfo.url;\n        if (this.#isNavigating) {\n            this.#eventManager.registerEvent({\n                method: protocol_js_1.BrowsingContext.EventNames.NavigationStarted,\n                params: {\n                    context: this.id,\n                    // TODO: The network event is send before the CDP Page.frameStartedLoading\n                    // It theory there should be a way to get the data.\n                    navigation: null,\n                    timestamp: BrowsingContextImpl.getTimestamp(),\n                    url: this.#url,\n                },\n            }, this.id);\n            this.#isNavigating = false;\n        }\n    }\n    #initListeners() {\n        this.#cdpTarget.cdpClient.on('Page.frameNavigated', (params) => {\n            if (this.id !== params.frame.id) {\n                return;\n            }\n            const timestamp = BrowsingContextImpl.getTimestamp();\n            this.#url = params.frame.url + (params.frame.urlFragment ?? '');\n            // At the point the page is initialized, all the nested iframes from the\n            // previous page are detached and realms are destroyed.\n            // Remove children from context.\n            this.#deleteAllChildren();\n            this.#eventManager.registerEvent({\n                method: protocol_js_1.BrowsingContext.EventNames.FragmentNavigated,\n                params: {\n                    context: this.id,\n                    navigation: this.#loaderId ?? null,\n                    timestamp,\n                    url: this.#url,\n                },\n            }, this.id);\n        });\n        this.#cdpTarget.cdpClient.on('Page.navigatedWithinDocument', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            const timestamp = BrowsingContextImpl.getTimestamp();\n            this.#url = params.url;\n            this.#deferreds.Page.navigatedWithinDocument.resolve(params);\n            // TODO: Remove this once History event for BiDi are added\n            this.#eventManager.registerEvent({\n                method: protocol_js_1.BrowsingContext.EventNames.FragmentNavigated,\n                params: {\n                    context: this.id,\n                    navigation: null,\n                    timestamp,\n                    url: this.#url,\n                },\n            }, this.id);\n        });\n        this.#cdpTarget.cdpClient.on('Page.frameStartedLoading', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            this.#isNavigating = true;\n        });\n        this.#cdpTarget.cdpClient.on('Page.frameStoppedLoading', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            this.#isNavigating = false;\n        });\n        this.#cdpTarget.cdpClient.on('Page.lifecycleEvent', (params) => {\n            if (this.id !== params.frameId) {\n                return;\n            }\n            if (params.name === 'init') {\n                this.#documentChanged(params.loaderId);\n                this.#deferreds.documentInitialized.resolve();\n                return;\n            }\n            if (params.name === 'commit') {\n                this.#loaderId = params.loaderId;\n                return;\n            }\n            // Ignore event from not current navigation.\n            if (params.loaderId !== this.#loaderId) {\n                return;\n            }\n            const timestamp = BrowsingContextImpl.getTimestamp();\n            switch (params.name) {\n                case 'DOMContentLoaded':\n                    this.#deferreds.Page.lifecycleEvent.DOMContentLoaded.resolve(params);\n                    this.#eventManager.registerEvent({\n                        method: protocol_js_1.BrowsingContext.EventNames.DomContentLoadedEvent,\n                        params: {\n                            context: this.id,\n                            navigation: this.#loaderId ?? null,\n                            timestamp,\n                            url: this.#url,\n                        },\n                    }, this.id);\n                    break;\n                case 'load':\n                    this.#deferreds.Page.lifecycleEvent.load.resolve(params);\n                    this.#eventManager.registerEvent({\n                        method: protocol_js_1.BrowsingContext.EventNames.LoadEvent,\n                        params: {\n                            context: this.id,\n                            navigation: this.#loaderId ?? null,\n                            timestamp,\n                            url: this.#url,\n                        },\n                    }, this.id);\n                    break;\n            }\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.executionContextCreated', (params) => {\n            if (params.context.auxData.frameId !== this.id) {\n                return;\n            }\n            // Only this execution contexts are supported for now.\n            if (!['default', 'isolated'].includes(params.context.auxData.type)) {\n                return;\n            }\n            const realm = new realm_js_1.Realm(this.#realmStorage, this.#browsingContextStorage, params.context.uniqueId, this.id, params.context.id, this.#getOrigin(params), \n            // XXX: differentiate types.\n            'window', \n            // Sandbox name for isolated world.\n            params.context.auxData.type === 'isolated'\n                ? params.context.name\n                : undefined, this.#cdpTarget.cdpSessionId, this.#cdpTarget.cdpClient, this.#eventManager, this.#logger);\n            if (params.context.auxData.isDefault) {\n                this.#maybeDefaultRealm = realm;\n                // Initialize ChannelProxy listeners for all the channels of all the\n                // preload scripts related to this BrowsingContext.\n                // TODO: extend for not default realms by the sandbox name.\n                void Promise.all(this.#cdpTarget\n                    .getChannels(this.id)\n                    .map((channel) => channel.startListenerFromWindow(realm, this.#eventManager)));\n            }\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.executionContextDestroyed', (params) => {\n            this.#realmStorage.deleteRealms({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n                executionContextId: params.executionContextId,\n            });\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.executionContextsCleared', () => {\n            this.#realmStorage.deleteRealms({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n            });\n        });\n    }\n    #getOrigin(params) {\n        if (params.context.auxData.type === 'isolated') {\n            // Sandbox should have the same origin as the context itself, but in CDP\n            // it has an empty one.\n            return this.#defaultRealm.origin;\n        }\n        // https://html.spec.whatwg.org/multipage/origin.html#ascii-serialisation-of-an-origin\n        return ['://', ''].includes(params.context.origin)\n            ? 'null'\n            : params.context.origin;\n    }\n    #documentChanged(loaderId) {\n        // Same document navigation.\n        if (loaderId === undefined || this.#loaderId === loaderId) {\n            if (this.#deferreds.Page.navigatedWithinDocument.isFinished) {\n                this.#deferreds.Page.navigatedWithinDocument =\n                    new deferred_js_1.Deferred();\n            }\n            else {\n                this.#logger?.(log_js_1.LogType.browsingContexts, 'Document changed (navigatedWithinDocument)');\n            }\n            return;\n        }\n        this.#resetDeferredsIfFinished();\n        this.#loaderId = loaderId;\n    }\n    #resetDeferredsIfFinished() {\n        if (this.#deferreds.documentInitialized.isFinished) {\n            this.#deferreds.documentInitialized = new deferred_js_1.Deferred();\n        }\n        else {\n            this.#logger?.(log_js_1.LogType.browsingContexts, 'Document changed (document initialized)');\n        }\n        if (this.#deferreds.Page.lifecycleEvent.DOMContentLoaded.isFinished) {\n            this.#deferreds.Page.lifecycleEvent.DOMContentLoaded =\n                new deferred_js_1.Deferred();\n        }\n        else {\n            this.#logger?.(log_js_1.LogType.browsingContexts, 'Document changed (DOMContentLoaded)');\n        }\n        if (this.#deferreds.Page.lifecycleEvent.load.isFinished) {\n            this.#deferreds.Page.lifecycleEvent.load =\n                new deferred_js_1.Deferred();\n        }\n        else {\n            this.#logger?.(log_js_1.LogType.browsingContexts, 'Document changed (load)');\n        }\n    }\n    async navigate(url, wait) {\n        await this.awaitUnblocked();\n        // TODO: handle loading errors.\n        const cdpNavigateResult = await this.#cdpTarget.cdpClient.sendCommand('Page.navigate', {\n            url,\n            frameId: this.id,\n        });\n        if (cdpNavigateResult.errorText) {\n            throw new protocol_js_1.Message.UnknownErrorException(cdpNavigateResult.errorText);\n        }\n        this.#documentChanged(cdpNavigateResult.loaderId);\n        switch (wait) {\n            case 'none':\n                break;\n            case 'interactive':\n                // No `loaderId` means same-document navigation.\n                if (cdpNavigateResult.loaderId === undefined) {\n                    await this.#deferreds.Page.navigatedWithinDocument;\n                }\n                else {\n                    await this.#deferreds.Page.lifecycleEvent.DOMContentLoaded;\n                }\n                break;\n            case 'complete':\n                // No `loaderId` means same-document navigation.\n                if (cdpNavigateResult.loaderId === undefined) {\n                    await this.#deferreds.Page.navigatedWithinDocument;\n                }\n                else {\n                    await this.awaitLoaded();\n                }\n                break;\n        }\n        return {\n            result: {\n                navigation: cdpNavigateResult.loaderId ?? null,\n                url,\n            },\n        };\n    }\n    async reload(ignoreCache, wait) {\n        await this.awaitUnblocked();\n        await this.#cdpTarget.cdpClient.sendCommand('Page.reload', {\n            ignoreCache,\n        });\n        this.#resetDeferredsIfFinished();\n        switch (wait) {\n            case 'none':\n                break;\n            case 'interactive':\n                await this.#deferreds.Page.lifecycleEvent.DOMContentLoaded;\n                break;\n            case 'complete':\n                await this.awaitLoaded();\n                break;\n        }\n        return { result: {} };\n    }\n    async setViewport(viewport) {\n        if (viewport === null) {\n            await this.#cdpTarget.cdpClient.sendCommand('Emulation.clearDeviceMetricsOverride');\n        }\n        else {\n            try {\n                await this.#cdpTarget.cdpClient.sendCommand('Emulation.setDeviceMetricsOverride', {\n                    width: viewport.width,\n                    height: viewport.height,\n                    deviceScaleFactor: 0,\n                    mobile: false,\n                    dontSetVisibleSize: true,\n                });\n            }\n            catch (err) {\n                if (err.message.startsWith(\n                // https://crsrc.org/c/content/browser/devtools/protocol/emulation_handler.cc;l=257;drc=2f6eee84cf98d4227e7c41718dd71b82f26d90ff\n                'Width and height values must be positive')) {\n                    throw new protocol_js_1.Message.UnsupportedOperationException('Provided viewport dimensions are not supported');\n                }\n                throw err;\n            }\n        }\n    }\n    async captureScreenshot() {\n        // XXX: Focus the original tab after the screenshot is taken.\n        // This is needed because the screenshot gets blocked until the active tab gets focus.\n        await this.#cdpTarget.cdpClient.sendCommand('Page.bringToFront');\n        let clip;\n        if (this.isTopLevelContext()) {\n            const { cssContentSize, cssLayoutViewport } = await this.#cdpTarget.cdpClient.sendCommand('Page.getLayoutMetrics');\n            clip = {\n                x: cssContentSize.x,\n                y: cssContentSize.y,\n                width: cssLayoutViewport.clientWidth,\n                height: cssLayoutViewport.clientHeight,\n            };\n        }\n        else {\n            const { result: { value: iframeDocRect }, } = await this.#cdpTarget.cdpClient.sendCommand('Runtime.callFunctionOn', {\n                functionDeclaration: String(() => {\n                    const docRect = globalThis.document.documentElement.getBoundingClientRect();\n                    return JSON.stringify({\n                        x: docRect.x,\n                        y: docRect.y,\n                        width: docRect.width,\n                        height: docRect.height,\n                    });\n                }),\n                executionContextId: this.#defaultRealm.executionContextId,\n            });\n            clip = JSON.parse(iframeDocRect);\n        }\n        const result = await this.#cdpTarget.cdpClient.sendCommand('Page.captureScreenshot', {\n            clip: {\n                ...clip,\n                scale: 1.0,\n            },\n        });\n        return {\n            result: {\n                data: result.data,\n            },\n        };\n    }\n    async print(params) {\n        const cdpParams = {};\n        if (params.background !== undefined) {\n            cdpParams.printBackground = params.background;\n        }\n        if (params.margin?.bottom !== undefined) {\n            cdpParams.marginBottom = (0, unitConversions_js_1.inchesFromCm)(params.margin.bottom);\n        }\n        if (params.margin?.left !== undefined) {\n            cdpParams.marginLeft = (0, unitConversions_js_1.inchesFromCm)(params.margin.left);\n        }\n        if (params.margin?.right !== undefined) {\n            cdpParams.marginRight = (0, unitConversions_js_1.inchesFromCm)(params.margin.right);\n        }\n        if (params.margin?.top !== undefined) {\n            cdpParams.marginTop = (0, unitConversions_js_1.inchesFromCm)(params.margin.top);\n        }\n        if (params.orientation !== undefined) {\n            cdpParams.landscape = params.orientation === 'landscape';\n        }\n        if (params.page?.height !== undefined) {\n            cdpParams.paperHeight = (0, unitConversions_js_1.inchesFromCm)(params.page.height);\n        }\n        if (params.page?.width !== undefined) {\n            cdpParams.paperWidth = (0, unitConversions_js_1.inchesFromCm)(params.page.width);\n        }\n        if (params.pageRanges !== undefined) {\n            cdpParams.pageRanges = params.pageRanges.join(',');\n        }\n        if (params.scale !== undefined) {\n            cdpParams.scale = params.scale;\n        }\n        if (params.shrinkToFit !== undefined) {\n            cdpParams.preferCSSPageSize = !params.shrinkToFit;\n        }\n        const result = await this.#cdpTarget.cdpClient.sendCommand('Page.printToPDF', cdpParams);\n        return {\n            result: {\n                data: result.data,\n            },\n        };\n    }\n}\nexports.BrowsingContextImpl = BrowsingContextImpl;\n//# sourceMappingURL=browsingContextImpl.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRemoteValuesText = exports.logMessageFormatter = void 0;\nconst specifiers = ['%s', '%d', '%i', '%f', '%o', '%O', '%c'];\nfunction isFormmatSpecifier(str) {\n    return specifiers.some((spec) => str.includes(spec));\n}\n/**\n * @param args input remote values to be format printed\n * @return parsed text of the remote values in specific format\n */\nfunction logMessageFormatter(args) {\n    let output = '';\n    const argFormat = args[0].value.toString();\n    const argValues = args.slice(1, undefined);\n    const tokens = argFormat.split(new RegExp(specifiers.map((spec) => `(${spec})`).join('|'), 'g'));\n    for (const token of tokens) {\n        if (token === undefined || token === '') {\n            continue;\n        }\n        if (isFormmatSpecifier(token)) {\n            const arg = argValues.shift();\n            // raise an exception when less value is provided\n            if (arg === undefined) {\n                throw new Error(`Less value is provided: \"${getRemoteValuesText(args, false)}\"`);\n            }\n            if (token === '%s') {\n                output += stringFromArg(arg);\n            }\n            else if (token === '%d' || token === '%i') {\n                if (arg.type === 'bigint' ||\n                    arg.type === 'number' ||\n                    arg.type === 'string') {\n                    output += parseInt(arg.value.toString(), 10);\n                }\n                else {\n                    output += 'NaN';\n                }\n            }\n            else if (token === '%f') {\n                if (arg.type === 'bigint' ||\n                    arg.type === 'number' ||\n                    arg.type === 'string') {\n                    output += parseFloat(arg.value.toString());\n                }\n                else {\n                    output += 'NaN';\n                }\n            }\n            else {\n                // %o, %O, %c\n                output += toJson(arg);\n            }\n        }\n        else {\n            output += token;\n        }\n    }\n    // raise an exception when more value is provided\n    if (argValues.length > 0) {\n        throw new Error(`More value is provided: \"${getRemoteValuesText(args, false)}\"`);\n    }\n    return output;\n}\nexports.logMessageFormatter = logMessageFormatter;\n/**\n * @param arg input remote value to be parsed\n * @return parsed text of the remote value\n *\n * input: {\"type\": \"number\", \"value\": 1}\n * output: 1\n *\n * input: {\"type\": \"string\", \"value\": \"abc\"}\n * output: \"abc\"\n *\n * input: {\"type\": \"object\",  \"value\": [[\"id\", {\"type\": \"number\", \"value\": 1}]]}\n * output: '{\"id\": 1}'\n *\n * input: {\"type\": \"object\", \"value\": [[\"font-size\", {\"type\": \"string\", \"value\": \"20px\"}]]}\n * output: '{\"font-size\": \"20px\"}'\n */\nfunction toJson(arg) {\n    // arg type validation\n    if (arg.type !== 'array' &&\n        arg.type !== 'bigint' &&\n        arg.type !== 'date' &&\n        arg.type !== 'number' &&\n        arg.type !== 'object' &&\n        arg.type !== 'string') {\n        return stringFromArg(arg);\n    }\n    if (arg.type === 'bigint') {\n        return `${arg.value.toString()}n`;\n    }\n    if (arg.type === 'number') {\n        return arg.value.toString();\n    }\n    if (['date', 'string'].includes(arg.type)) {\n        return JSON.stringify(arg.value);\n    }\n    if (arg.type === 'object') {\n        return `{${arg.value\n            .map((pair) => {\n            return `${JSON.stringify(pair[0])}:${toJson(pair[1])}`;\n        })\n            .join(',')}}`;\n    }\n    if (arg.type === 'array') {\n        return `[${arg.value?.map((val) => toJson(val)).join(',') ?? ''}]`;\n    }\n    throw Error(`Invalid value type: ${arg.toString()}`);\n}\nfunction stringFromArg(arg) {\n    if (!Object.hasOwn(arg, 'value')) {\n        return arg.type;\n    }\n    switch (arg.type) {\n        case 'string':\n        case 'number':\n        case 'boolean':\n        case 'bigint':\n            return String(arg.value);\n        case 'regexp':\n            return `/${arg.value.pattern}/${arg.value.flags ?? ''}`;\n        case 'date':\n            return new Date(arg.value).toString();\n        case 'object':\n            return `Object(${arg.value?.length ?? ''})`;\n        case 'array':\n            return `Array(${arg.value?.length ?? ''})`;\n        case 'map':\n            return `Map(${arg.value.length})`;\n        case 'set':\n            return `Set(${arg.value.length})`;\n        case 'node':\n            return 'node';\n        default:\n            return arg.type;\n    }\n}\nfunction getRemoteValuesText(args, formatText) {\n    const arg = args[0];\n    if (!arg) {\n        return '';\n    }\n    // if args[0] is a format specifier, format the args as output\n    if (arg.type === 'string' &&\n        isFormmatSpecifier(arg.value.toString()) &&\n        formatText) {\n        return logMessageFormatter(args);\n    }\n    // if args[0] is not a format specifier, just join the args with \\u0020 (unicode 'SPACE')\n    return args\n        .map((arg) => {\n        return stringFromArg(arg);\n    })\n        .join('\\u0020');\n}\nexports.getRemoteValuesText = getRemoteValuesText;\n//# sourceMappingURL=logHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogManager = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst logHelper_js_1 = require(\"./logHelper.js\");\n/** Converts CDP StackTrace object to BiDi StackTrace object. */\nfunction getBidiStackTrace(cdpStackTrace) {\n    const stackFrames = cdpStackTrace?.callFrames.map((callFrame) => {\n        return {\n            columnNumber: callFrame.columnNumber,\n            functionName: callFrame.functionName,\n            lineNumber: callFrame.lineNumber,\n            url: callFrame.url,\n        };\n    });\n    return stackFrames ? { callFrames: stackFrames } : undefined;\n}\nfunction getLogLevel(consoleApiType) {\n    if (['assert', 'error'].includes(consoleApiType)) {\n        return 'error';\n    }\n    if (['debug', 'trace'].includes(consoleApiType)) {\n        return 'debug';\n    }\n    if (['warn', 'warning'].includes(consoleApiType)) {\n        return 'warn';\n    }\n    return 'info';\n}\nclass LogManager {\n    #eventManager;\n    #realmStorage;\n    #cdpTarget;\n    constructor(cdpTarget, realmStorage, eventManager) {\n        this.#cdpTarget = cdpTarget;\n        this.#realmStorage = realmStorage;\n        this.#eventManager = eventManager;\n    }\n    static create(cdpTarget, realmStorage, eventManager) {\n        const logManager = new LogManager(cdpTarget, realmStorage, eventManager);\n        logManager.#initialize();\n        return logManager;\n    }\n    #initialize() {\n        this.#initializeLogEntryAddedEventListener();\n    }\n    #initializeLogEntryAddedEventListener() {\n        this.#cdpTarget.cdpClient.on('Runtime.consoleAPICalled', (params) => {\n            // Try to find realm by `cdpSessionId` and `executionContextId`,\n            // if provided.\n            const realm = this.#realmStorage.findRealm({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n                executionContextId: params.executionContextId,\n            });\n            const argsPromise = realm === undefined\n                ? Promise.resolve(params.args)\n                : // Properly serialize arguments if possible.\n                    Promise.all(params.args.map((arg) => {\n                        return realm.serializeCdpObject(arg, 'none');\n                    }));\n            this.#eventManager.registerPromiseEvent(argsPromise.then((args) => ({\n                method: protocol_js_1.Log.EventNames.LogEntryAddedEvent,\n                params: {\n                    level: getLogLevel(params.type),\n                    source: {\n                        realm: realm?.realmId ?? 'UNKNOWN',\n                        context: realm?.browsingContextId ?? 'UNKNOWN',\n                    },\n                    text: (0, logHelper_js_1.getRemoteValuesText)(args, true),\n                    timestamp: Math.round(params.timestamp),\n                    stackTrace: getBidiStackTrace(params.stackTrace),\n                    type: 'console',\n                    // Console method is `warn`, not `warning`.\n                    method: params.type === 'warning' ? 'warn' : params.type,\n                    args,\n                },\n            })), realm?.browsingContextId ?? 'UNKNOWN', protocol_js_1.Log.EventNames.LogEntryAddedEvent);\n        });\n        this.#cdpTarget.cdpClient.on('Runtime.exceptionThrown', (params) => {\n            // Try to find realm by `cdpSessionId` and `executionContextId`,\n            // if provided.\n            const realm = this.#realmStorage.findRealm({\n                cdpSessionId: this.#cdpTarget.cdpSessionId,\n                executionContextId: params.exceptionDetails.executionContextId,\n            });\n            // Try all the best to get the exception text.\n            const textPromise = (async () => {\n                if (!params.exceptionDetails.exception) {\n                    return params.exceptionDetails.text;\n                }\n                if (realm === undefined) {\n                    return JSON.stringify(params.exceptionDetails.exception);\n                }\n                return realm.stringifyObject(params.exceptionDetails.exception);\n            })();\n            this.#eventManager.registerPromiseEvent(textPromise.then((text) => ({\n                method: protocol_js_1.Log.EventNames.LogEntryAddedEvent,\n                params: {\n                    level: 'error',\n                    source: {\n                        realm: realm?.realmId ?? 'UNKNOWN',\n                        context: realm?.browsingContextId ?? 'UNKNOWN',\n                    },\n                    text,\n                    timestamp: Math.round(params.timestamp),\n                    stackTrace: getBidiStackTrace(params.exceptionDetails.stackTrace),\n                    type: 'javascript',\n                },\n            })), realm?.browsingContextId ?? 'UNKNOWN', protocol_js_1.Log.EventNames.LogEntryAddedEvent);\n        });\n    }\n}\nexports.LogManager = LogManager;\n//# sourceMappingURL=logManager.js.map","\"use strict\";\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultMap = void 0;\n/**\n * A subclass of Map whose functionality is almost the same as its parent\n * except for the fact that DefaultMap never returns undefined. It provides a\n * default value for keys that do not exist.\n */\nclass DefaultMap extends Map {\n    /** The default value to return whenever a key is not present in the map. */\n    #getDefaultValue;\n    constructor(getDefaultValue, entries) {\n        super(entries);\n        this.#getDefaultValue = getDefaultValue;\n    }\n    get(key) {\n        if (!this.has(key)) {\n            this.set(key, this.#getDefaultValue(key));\n        }\n        return super.get(key);\n    }\n}\nexports.DefaultMap = DefaultMap;\n//# sourceMappingURL=DefaultMap.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkRequest = void 0;\nconst deferred_js_1 = require(\"../../../utils/deferred.js\");\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nclass NetworkRequest {\n    static #unknown = 'UNKNOWN';\n    /**\n     * Each network request has an associated request id, which is a string\n     * uniquely identifying that request.\n     *\n     * The identifier for a request resulting from a redirect matches that of the\n     * request that initiated it.\n     */\n    requestId;\n    #servedFromCache = false;\n    #redirectCount;\n    #eventManager;\n    #requestWillBeSentEvent;\n    #requestWillBeSentExtraInfoEvent;\n    #responseReceivedEvent;\n    #responseReceivedExtraInfoEvent;\n    #beforeRequestSentDeferred = new deferred_js_1.Deferred();\n    #responseReceivedDeferred = new deferred_js_1.Deferred();\n    constructor(requestId, eventManager) {\n        this.requestId = requestId;\n        this.#redirectCount = 0;\n        this.#eventManager = eventManager;\n    }\n    onRequestWillBeSentEvent(event) {\n        if (this.#requestWillBeSentEvent !== undefined) {\n            // TODO: Handle redirect event, requestId is same for the redirect chain\n            return;\n        }\n        this.#requestWillBeSentEvent = event;\n        if (this.#requestWillBeSentExtraInfoEvent !== undefined) {\n            this.#beforeRequestSentDeferred.resolve();\n        }\n        this.#sendBeforeRequestEvent();\n    }\n    onRequestWillBeSentExtraInfoEvent(event) {\n        if (this.#requestWillBeSentExtraInfoEvent !== undefined) {\n            // TODO: Handle redirect event, requestId is same for the redirect chain\n            return;\n        }\n        this.#requestWillBeSentExtraInfoEvent = event;\n        if (this.#requestWillBeSentEvent !== undefined) {\n            this.#beforeRequestSentDeferred.resolve();\n        }\n    }\n    onResponseReceivedEventExtraInfo(event) {\n        if (this.#responseReceivedExtraInfoEvent !== undefined) {\n            // TODO: Handle redirect event, requestId is same for the redirect chain\n            return;\n        }\n        this.#responseReceivedExtraInfoEvent = event;\n        if (this.#responseReceivedEvent !== undefined) {\n            this.#responseReceivedDeferred.resolve();\n        }\n    }\n    onResponseReceivedEvent(responseReceivedEvent) {\n        if (this.#responseReceivedEvent !== undefined) {\n            // TODO: Handle redirect event, requestId is same for the redirect chain\n            return;\n        }\n        this.#responseReceivedEvent = responseReceivedEvent;\n        if (!responseReceivedEvent.hasExtraInfo &&\n            !this.#beforeRequestSentDeferred.isFinished) {\n            this.#beforeRequestSentDeferred.resolve();\n        }\n        if (!responseReceivedEvent.hasExtraInfo ||\n            this.#responseReceivedExtraInfoEvent !== undefined ||\n            this.#servedFromCache) {\n            this.#responseReceivedDeferred.resolve();\n        }\n        this.#sendResponseReceivedEvent();\n    }\n    onServedFromCache() {\n        if (this.#requestWillBeSentEvent !== undefined) {\n            this.#beforeRequestSentDeferred.resolve();\n        }\n        if (this.#responseReceivedEvent !== undefined) {\n            this.#responseReceivedDeferred.resolve();\n        }\n        this.#servedFromCache = true;\n    }\n    onLoadingFailedEvent(event) {\n        this.#beforeRequestSentDeferred.resolve();\n        this.#responseReceivedDeferred.reject(event);\n        this.#eventManager.registerEvent({\n            method: protocol_js_1.Network.EventNames.FetchErrorEvent,\n            params: {\n                ...this.#getBaseEventParams(),\n                errorText: event.errorText,\n            },\n        }, this.#requestWillBeSentEvent?.frameId ?? null);\n    }\n    #getBaseEventParams() {\n        return {\n            context: this.#requestWillBeSentEvent?.frameId ?? null,\n            navigation: this.#getNavigationId(),\n            // TODO: implement.\n            redirectCount: this.#redirectCount,\n            request: this.#getRequestData(),\n            // Timestamp should be in milliseconds, while CDP provides it in seconds.\n            timestamp: Math.round((this.#requestWillBeSentEvent?.wallTime ?? 0) * 1000),\n        };\n    }\n    #getNavigationId() {\n        if (!this.#requestWillBeSentEvent ||\n            !this.#requestWillBeSentEvent.loaderId ||\n            // When we navigate all CDP network events have `loaderId`\n            // CDP's `loaderId` and `requestId` match when\n            // that request triggered the loading\n            this.#requestWillBeSentEvent.loaderId !==\n                this.#requestWillBeSentEvent.requestId) {\n            return null;\n        }\n        return this.#requestWillBeSentEvent.loaderId;\n    }\n    #getRequestData() {\n        const cookies = this.#requestWillBeSentExtraInfoEvent\n            ? NetworkRequest.#getCookies(this.#requestWillBeSentExtraInfoEvent.associatedCookies)\n            : [];\n        return {\n            request: this.#requestWillBeSentEvent?.requestId ?? NetworkRequest.#unknown,\n            url: this.#requestWillBeSentEvent?.request.url ?? NetworkRequest.#unknown,\n            method: this.#requestWillBeSentEvent?.request.method ?? NetworkRequest.#unknown,\n            headers: NetworkRequest.#getHeaders(this.#requestWillBeSentEvent?.request.headers),\n            cookies,\n            // TODO: implement.\n            headersSize: -1,\n            // TODO: implement.\n            bodySize: 0,\n            timings: {\n                // TODO: implement.\n                timeOrigin: 0,\n                // TODO: implement.\n                requestTime: 0,\n                // TODO: implement.\n                redirectStart: 0,\n                // TODO: implement.\n                redirectEnd: 0,\n                // TODO: implement.\n                fetchStart: 0,\n                // TODO: implement.\n                dnsStart: 0,\n                // TODO: implement.\n                dnsEnd: 0,\n                // TODO: implement.\n                connectStart: 0,\n                // TODO: implement.\n                connectEnd: 0,\n                // TODO: implement.\n                tlsStart: 0,\n                // TODO: implement.\n                requestStart: 0,\n                // TODO: implement.\n                responseStart: 0,\n                // TODO: implement.\n                responseEnd: 0,\n            },\n        };\n    }\n    #sendBeforeRequestEvent() {\n        if (!this.#isIgnoredEvent()) {\n            this.#eventManager.registerPromiseEvent(this.#beforeRequestSentDeferred.then(() => this.#getBeforeRequestEvent()), this.#requestWillBeSentEvent?.frameId ?? null, protocol_js_1.Network.EventNames.BeforeRequestSentEvent);\n        }\n    }\n    #getBeforeRequestEvent() {\n        if (this.#requestWillBeSentEvent === undefined) {\n            throw new Error('RequestWillBeSentEvent is not set');\n        }\n        return {\n            method: protocol_js_1.Network.EventNames.BeforeRequestSentEvent,\n            params: {\n                ...this.#getBaseEventParams(),\n                initiator: {\n                    type: NetworkRequest.#getInitiatorType(this.#requestWillBeSentEvent.initiator.type),\n                },\n            },\n        };\n    }\n    #sendResponseReceivedEvent() {\n        if (!this.#isIgnoredEvent()) {\n            this.#eventManager.registerPromiseEvent(this.#responseReceivedDeferred.then(() => this.#getResponseReceivedEvent()), this.#responseReceivedEvent?.frameId ?? null, protocol_js_1.Network.EventNames.ResponseCompletedEvent);\n        }\n    }\n    #getResponseReceivedEvent() {\n        if (this.#requestWillBeSentEvent === undefined) {\n            throw new Error('RequestWillBeSentEvent is not set');\n        }\n        if (this.#responseReceivedEvent === undefined) {\n            throw new Error('ResponseReceivedEvent is not set');\n        }\n        // Chromium sends wrong extraInfo events for responses served from cache.\n        // See https://github.com/puppeteer/puppeteer/issues/9965 and\n        // https://crbug.com/1340398.\n        if (this.#responseReceivedEvent.response.fromDiskCache) {\n            this.#responseReceivedExtraInfoEvent = undefined;\n        }\n        const headers = NetworkRequest.#getHeaders(this.#responseReceivedEvent.response.headers);\n        return {\n            method: protocol_js_1.Network.EventNames.ResponseCompletedEvent,\n            params: {\n                ...this.#getBaseEventParams(),\n                response: {\n                    url: this.#responseReceivedEvent.response.url,\n                    protocol: this.#responseReceivedEvent.response.protocol ?? '',\n                    status: this.#responseReceivedExtraInfoEvent?.statusCode ??\n                        this.#responseReceivedEvent.response.status,\n                    statusText: this.#responseReceivedEvent.response.statusText,\n                    fromCache: this.#responseReceivedEvent.response.fromDiskCache ||\n                        this.#responseReceivedEvent.response.fromPrefetchCache ||\n                        this.#servedFromCache,\n                    headers,\n                    mimeType: this.#responseReceivedEvent.response.mimeType,\n                    bytesReceived: this.#responseReceivedEvent.response.encodedDataLength,\n                    headersSize: this.#computeResponseHeadersSize(headers),\n                    // TODO: consider removing from spec.\n                    bodySize: 0,\n                    content: {\n                        // TODO: consider removing from spec.\n                        size: 0,\n                    },\n                },\n            },\n        };\n    }\n    #computeResponseHeadersSize(headers) {\n        return headers.reduce((total, header) => {\n            return total + header.name.length + (header.value?.length ?? 0) + 4; // 4 = ': ' + '\\r\\n'\n        }, 0);\n    }\n    #isIgnoredEvent() {\n        return (this.#requestWillBeSentEvent?.request.url.endsWith('/favicon.ico') ??\n            false);\n    }\n    static #getHeaders(headers) {\n        if (!headers) {\n            return [];\n        }\n        return Object.entries(headers).map(([name, value]) => ({\n            name,\n            value,\n        }));\n    }\n    static #getInitiatorType(initiatorType) {\n        switch (initiatorType) {\n            case 'parser':\n            case 'script':\n            case 'preflight':\n                return initiatorType;\n            default:\n                return 'other';\n        }\n    }\n    static #getCookies(associatedCookies) {\n        return associatedCookies.map((cookieInfo) => {\n            return {\n                name: cookieInfo.cookie.name,\n                value: cookieInfo.cookie.value,\n                domain: cookieInfo.cookie.domain,\n                path: cookieInfo.cookie.path,\n                expires: cookieInfo.cookie.expires,\n                size: cookieInfo.cookie.size,\n                httpOnly: cookieInfo.cookie.httpOnly,\n                secure: cookieInfo.cookie.secure,\n                sameSite: NetworkRequest.#getCookiesSameSite(cookieInfo.cookie.sameSite),\n            };\n        });\n    }\n    static #getCookiesSameSite(cdpSameSiteValue) {\n        switch (cdpSameSiteValue) {\n            case 'Strict':\n                return 'strict';\n            case 'Lax':\n                return 'lax';\n            default:\n                return 'none';\n        }\n    }\n}\nexports.NetworkRequest = NetworkRequest;\n//# sourceMappingURL=networkRequest.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkProcessor = void 0;\nconst DefaultMap_js_1 = require(\"../../../utils/DefaultMap.js\");\nconst networkRequest_js_1 = require(\"./networkRequest.js\");\nclass NetworkProcessor {\n    #eventManager;\n    /**\n     * Map of request ID to NetworkRequest objects. Needed as long as information\n     * about requests comes from different events.\n     */\n    #requestMap;\n    constructor(eventManager) {\n        this.#eventManager = eventManager;\n        this.#requestMap = new DefaultMap_js_1.DefaultMap((requestId) => new networkRequest_js_1.NetworkRequest(requestId, this.#eventManager));\n    }\n    static async create(cdpClient, eventManager) {\n        const networkProcessor = new NetworkProcessor(eventManager);\n        cdpClient.on('Network.requestWillBeSent', (params) => {\n            networkProcessor\n                .#getOrCreateNetworkRequest(params.requestId)\n                .onRequestWillBeSentEvent(params);\n        });\n        cdpClient.on('Network.requestWillBeSentExtraInfo', (params) => {\n            networkProcessor\n                .#getOrCreateNetworkRequest(params.requestId)\n                .onRequestWillBeSentExtraInfoEvent(params);\n        });\n        cdpClient.on('Network.responseReceived', (params) => {\n            networkProcessor\n                .#getOrCreateNetworkRequest(params.requestId)\n                .onResponseReceivedEvent(params);\n        });\n        cdpClient.on('Network.responseReceivedExtraInfo', (params) => {\n            networkProcessor\n                .#getOrCreateNetworkRequest(params.requestId)\n                .onResponseReceivedEventExtraInfo(params);\n        });\n        cdpClient.on('Network.loadingFailed', (params) => {\n            networkProcessor\n                .#getOrCreateNetworkRequest(params.requestId)\n                .onLoadingFailedEvent(params);\n        });\n        cdpClient.on('Network.requestServedFromCache', (params) => {\n            networkProcessor\n                .#getOrCreateNetworkRequest(params.requestId)\n                .onServedFromCache();\n        });\n        await cdpClient.sendCommand('Network.enable');\n        return networkProcessor;\n    }\n    #getOrCreateNetworkRequest(requestId) {\n        return this.#requestMap.get(requestId);\n    }\n}\nexports.NetworkProcessor = NetworkProcessor;\n//# sourceMappingURL=networkProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CdpTarget = void 0;\nconst logManager_js_1 = require(\"../log/logManager.js\");\nconst deferred_js_1 = require(\"../../../utils/deferred.js\");\nconst networkProcessor_js_1 = require(\"../network/networkProcessor.js\");\nclass CdpTarget {\n    #targetId;\n    #parentTargetId;\n    #cdpClient;\n    #cdpSessionId;\n    #eventManager;\n    #preloadScriptStorage;\n    #targetUnblocked;\n    #networkDomainActivated;\n    static create(targetId, parentTargetId, cdpClient, cdpSessionId, realmStorage, eventManager, preloadScriptStorage) {\n        const cdpTarget = new CdpTarget(targetId, parentTargetId, cdpClient, cdpSessionId, eventManager, preloadScriptStorage);\n        logManager_js_1.LogManager.create(cdpTarget, realmStorage, eventManager);\n        cdpTarget.#setEventListeners();\n        // No need to await.\n        // Deferred will be resolved when the target is unblocked.\n        void cdpTarget.#unblock();\n        return cdpTarget;\n    }\n    constructor(targetId, parentTargetId, cdpClient, cdpSessionId, eventManager, preloadScriptStorage) {\n        this.#targetId = targetId;\n        this.#parentTargetId = parentTargetId;\n        this.#cdpClient = cdpClient;\n        this.#cdpSessionId = cdpSessionId;\n        this.#eventManager = eventManager;\n        this.#preloadScriptStorage = preloadScriptStorage;\n        this.#networkDomainActivated = false;\n        this.#targetUnblocked = new deferred_js_1.Deferred();\n    }\n    /** Returns a promise that resolves when the target is unblocked. */\n    get targetUnblocked() {\n        return this.#targetUnblocked;\n    }\n    get targetId() {\n        return this.#targetId;\n    }\n    get cdpClient() {\n        return this.#cdpClient;\n    }\n    /**\n     * Needed for CDP escape path.\n     */\n    get cdpSessionId() {\n        return this.#cdpSessionId;\n    }\n    /**\n     * Enables all the required CDP domains and unblocks the target.\n     */\n    async #unblock() {\n        try {\n            // Enable Network domain, if it is enabled globally.\n            // TODO: enable Network domain for OOPiF targets.\n            if (this.#eventManager.isNetworkDomainEnabled) {\n                await this.enableNetworkDomain();\n            }\n            await this.#cdpClient.sendCommand('Runtime.enable');\n            await this.#cdpClient.sendCommand('Page.enable');\n            await this.#cdpClient.sendCommand('Page.setLifecycleEventsEnabled', {\n                enabled: true,\n            });\n            await this.#cdpClient.sendCommand('Target.setAutoAttach', {\n                autoAttach: true,\n                waitForDebuggerOnStart: true,\n                flatten: true,\n            });\n            await this.#initAndEvaluatePreloadScripts();\n            await this.#cdpClient.sendCommand('Runtime.runIfWaitingForDebugger');\n        }\n        catch (error) {\n            // The target might have been closed before the initialization finished.\n            if (!this.#cdpClient.isCloseError(error)) {\n                throw error;\n            }\n        }\n        this.#targetUnblocked.resolve();\n    }\n    /**\n     * Enables the Network domain (creates NetworkProcessor on the target's cdp\n     * client) if it is not enabled yet.\n     */\n    async enableNetworkDomain() {\n        if (!this.#networkDomainActivated) {\n            this.#networkDomainActivated = true;\n            await networkProcessor_js_1.NetworkProcessor.create(this.cdpClient, this.#eventManager);\n        }\n    }\n    #setEventListeners() {\n        this.#cdpClient.on('*', (event, params) => {\n            // We may encounter uses for EventEmitter other than CDP events,\n            // which we want to skip.\n            if (typeof event !== 'string') {\n                return;\n            }\n            this.#eventManager.registerEvent({\n                method: `cdp.${event}`,\n                params: {\n                    event,\n                    params: params,\n                    session: this.#cdpSessionId,\n                },\n            }, null);\n        });\n    }\n    /**\n     * All the ProxyChannels from all the preload scripts of the given\n     * BrowsingContext.\n     */\n    getChannels(contextId) {\n        return this.#preloadScriptStorage\n            .findPreloadScripts({\n            contextIds: [null, contextId],\n        })\n            .flatMap((script) => script.channels);\n    }\n    /** Loads all top-level and parent preload scripts. */\n    async #initAndEvaluatePreloadScripts() {\n        for (const script of this.#preloadScriptStorage.findPreloadScripts({\n            contextIds: [null, this.#parentTargetId],\n        })) {\n            await script.initInTarget(this);\n            // Upon attaching to a new target, schedule running preload scripts right\n            // after `Runtime.runIfWaitingForDebugger`, but don't wait for the result.\n            script.scheduleEvaluateInTarget(this);\n        }\n    }\n}\nexports.CdpTarget = CdpTarget;\n//# sourceMappingURL=cdpTarget.js.map","\"use strict\";\n/*\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BidiPreloadScript = void 0;\nconst uuid_js_1 = require(\"../../../utils/uuid.js\");\nconst channelProxy_js_1 = require(\"../script/channelProxy.js\");\n/**\n * BiDi IDs are generated by the server and are unique within the context.\n *\n * CDP preload script IDs are generated by the client and are unique\n * within the session.\n *\n * The mapping between BiDi and CDP preload script IDs is 1:many.\n * BiDi IDs are needed by the mapper to keep track of potential multiple CDP IDs\n * in the client.\n */\nclass BidiPreloadScript {\n    /** BiDi ID, an automatically generated UUID. */\n    #id = (0, uuid_js_1.uuidv4)();\n    /** CDP preload scripts. */\n    #cdpPreloadScripts = [];\n    /** The script itself, in a format expected by the spec i.e. a function. */\n    #functionDeclaration;\n    /** Browsing context ID. */\n    #contextId;\n    /** Targets, in which the preload script is initialized. */\n    #targetIds = new Set();\n    /** Channels to be added as arguments to functionDeclaration. */\n    #channels;\n    get id() {\n        return this.#id;\n    }\n    get contextId() {\n        return this.#contextId;\n    }\n    get targetIds() {\n        return this.#targetIds;\n    }\n    constructor(params) {\n        if (params.sandbox !== undefined) {\n            // TODO: Handle sandbox.\n            throw new Error('Sandbox is not supported yet');\n        }\n        this.#channels =\n            params.arguments?.map((a) => new channelProxy_js_1.ChannelProxy(a.value)) ?? [];\n        this.#functionDeclaration = params.functionDeclaration;\n        this.#contextId = params.context ?? null;\n    }\n    /** Channels of the preload script. */\n    get channels() {\n        return this.#channels;\n    }\n    /**\n     * Adds the script to the given CDP targets by calling the\n     * `Page.addScriptToEvaluateOnNewDocument` command.\n     */\n    async initInTargets(cdpTargets) {\n        await Promise.all(Array.from(cdpTargets).map((cdpTarget) => this.initInTarget(cdpTarget)));\n    }\n    /**\n     * String to be evaluated. Wraps user-provided function so that the following\n     * steps are run:\n     * 1. Create channels.\n     * 2. Store the created channels in window.\n     * 3. Call the user-provided function with channels as arguments.\n     */\n    #getEvaluateString() {\n        const channelsArgStr = `[${this.channels\n            .map((c) => c.getEvalInWindowStr())\n            .join(', ')}]`;\n        return `(()=>{(${this.#functionDeclaration})(...${channelsArgStr})})()`;\n    }\n    /**\n     * Adds the script to the given CDP target by calling the\n     * `Page.addScriptToEvaluateOnNewDocument` command.\n     */\n    async initInTarget(cdpTarget) {\n        const addCdpPreloadScriptResult = await cdpTarget.cdpClient.sendCommand('Page.addScriptToEvaluateOnNewDocument', {\n            source: this.#getEvaluateString(),\n        });\n        this.#cdpPreloadScripts.push({\n            target: cdpTarget,\n            preloadScriptId: addCdpPreloadScriptResult.identifier,\n        });\n        this.#targetIds.add(cdpTarget.targetId);\n    }\n    /**\n     * Schedules the script to be run right after\n     * `Runtime.runIfWaitingForDebugger`, but does not wait for result.\n     */\n    scheduleEvaluateInTarget(cdpTarget) {\n        void cdpTarget.cdpClient.sendCommand('Runtime.evaluate', {\n            expression: this.#getEvaluateString(),\n        });\n    }\n    /**\n     * Removes this script from all CDP targets.\n     */\n    async remove() {\n        for (const cdpPreloadScript of this.#cdpPreloadScripts) {\n            const cdpTarget = cdpPreloadScript.target;\n            const cdpPreloadScriptId = cdpPreloadScript.preloadScriptId;\n            await cdpTarget.cdpClient.sendCommand('Page.removeScriptToEvaluateOnNewDocument', {\n                identifier: cdpPreloadScriptId,\n            });\n        }\n    }\n    /**\n     * Removes the provided cdp target from the list of cdp preload scripts.\n     */\n    cdpTargetIsGone(cdpTargetId) {\n        this.#cdpPreloadScripts = this.#cdpPreloadScripts.filter((cdpPreloadScript) => cdpPreloadScript.target?.targetId !== cdpTargetId);\n        this.#targetIds.delete(cdpTargetId);\n    }\n}\nexports.BidiPreloadScript = BidiPreloadScript;\n//# sourceMappingURL=bidiPreloadScript.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowsingContextProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst log_js_1 = require(\"../../../utils/log.js\");\nconst InputStateManager_js_1 = require(\"../input/InputStateManager.js\");\nconst ActionDispatcher_js_1 = require(\"../input/ActionDispatcher.js\");\nconst PreloadScriptStorage_js_1 = require(\"./PreloadScriptStorage.js\");\nconst browsingContextImpl_js_1 = require(\"./browsingContextImpl.js\");\nconst cdpTarget_js_1 = require(\"./cdpTarget.js\");\nconst bidiPreloadScript_1 = require(\"./bidiPreloadScript\");\nclass BrowsingContextProcessor {\n    #browsingContextStorage;\n    #cdpConnection;\n    #eventManager;\n    #logger;\n    #realmStorage;\n    #selfTargetId;\n    #preloadScriptStorage = new PreloadScriptStorage_js_1.PreloadScriptStorage();\n    #inputStateManager = new InputStateManager_js_1.InputStateManager();\n    constructor(cdpConnection, selfTargetId, eventManager, browsingContextStorage, realmStorage, logger) {\n        this.#cdpConnection = cdpConnection;\n        this.#selfTargetId = selfTargetId;\n        this.#eventManager = eventManager;\n        this.#browsingContextStorage = browsingContextStorage;\n        this.#realmStorage = realmStorage;\n        this.#logger = logger;\n        this.#setEventListeners(this.#cdpConnection.browserClient());\n    }\n    /**\n     * This method is called for each CDP session, since this class is responsible\n     * for creating and destroying all targets and browsing contexts.\n     */\n    #setEventListeners(cdpClient) {\n        cdpClient.on('Target.attachedToTarget', (params) => {\n            this.#handleAttachedToTargetEvent(params, cdpClient);\n        });\n        cdpClient.on('Target.detachedFromTarget', (params) => {\n            this.#handleDetachedFromTargetEvent(params);\n        });\n        cdpClient.on('Target.targetInfoChanged', (params) => {\n            this.#handleTargetInfoChangedEvent(params);\n        });\n        cdpClient.on('Page.frameAttached', (params) => {\n            this.#handleFrameAttachedEvent(params);\n        });\n        cdpClient.on('Page.frameDetached', (params) => {\n            this.#handleFrameDetachedEvent(params);\n        });\n    }\n    #handleFrameAttachedEvent(params) {\n        const parentBrowsingContext = this.#browsingContextStorage.findContext(params.parentFrameId);\n        if (parentBrowsingContext !== undefined) {\n            browsingContextImpl_js_1.BrowsingContextImpl.create(parentBrowsingContext.cdpTarget, this.#realmStorage, params.frameId, params.parentFrameId, this.#eventManager, this.#browsingContextStorage, this.#logger);\n        }\n    }\n    #handleFrameDetachedEvent(params) {\n        // In case of OOPiF no need in deleting BrowsingContext.\n        if (params.reason === 'swap') {\n            return;\n        }\n        this.#browsingContextStorage.findContext(params.frameId)?.delete();\n    }\n    #handleAttachedToTargetEvent(params, parentSessionCdpClient) {\n        const { sessionId, targetInfo } = params;\n        const targetCdpClient = this.#cdpConnection.getCdpClient(sessionId);\n        if (!this.#isValidTarget(targetInfo)) {\n            // DevTools or some other not supported by BiDi target. Just release\n            // debugger  and ignore them.\n            targetCdpClient\n                .sendCommand('Runtime.runIfWaitingForDebugger')\n                .then(() => parentSessionCdpClient.sendCommand('Target.detachFromTarget', params))\n                .catch((error) => this.#logger?.(log_js_1.LogType.system, error));\n            return;\n        }\n        this.#logger?.(log_js_1.LogType.browsingContexts, 'AttachedToTarget event received:', JSON.stringify(params, null, 2));\n        this.#setEventListeners(targetCdpClient);\n        const maybeContext = this.#browsingContextStorage.findContext(targetInfo.targetId);\n        const cdpTarget = cdpTarget_js_1.CdpTarget.create(targetInfo.targetId, maybeContext?.parentId ?? null, targetCdpClient, sessionId, this.#realmStorage, this.#eventManager, this.#preloadScriptStorage);\n        if (maybeContext) {\n            // OOPiF.\n            maybeContext.updateCdpTarget(cdpTarget);\n        }\n        else {\n            // New context.\n            browsingContextImpl_js_1.BrowsingContextImpl.create(cdpTarget, this.#realmStorage, targetInfo.targetId, null, this.#eventManager, this.#browsingContextStorage, this.#logger);\n        }\n    }\n    #handleDetachedFromTargetEvent(params) {\n        // XXX: params.targetId is deprecated. Update this class to track using\n        // params.sessionId instead.\n        // https://github.com/GoogleChromeLabs/chromium-bidi/issues/60\n        const contextId = params.targetId;\n        this.#browsingContextStorage.findContext(contextId)?.delete();\n        this.#preloadScriptStorage\n            .findPreloadScripts({ targetId: contextId })\n            .map((preloadScript) => preloadScript.cdpTargetIsGone(contextId));\n    }\n    #handleTargetInfoChangedEvent(params) {\n        const contextId = params.targetInfo.targetId;\n        this.#browsingContextStorage\n            .findContext(contextId)\n            ?.onTargetInfoChanged(params);\n    }\n    async #getRealm(target) {\n        if ('realm' in target) {\n            return this.#realmStorage.getRealm({\n                realmId: target.realm,\n            });\n        }\n        const context = this.#browsingContextStorage.getContext(target.context);\n        return context.getOrCreateSandbox(target.sandbox);\n    }\n    process_browsingContext_getTree(params) {\n        const resultContexts = params.root === undefined\n            ? this.#browsingContextStorage.getTopLevelContexts()\n            : [this.#browsingContextStorage.getContext(params.root)];\n        return {\n            result: {\n                contexts: resultContexts.map((c) => c.serializeToBidiValue(params.maxDepth ?? Number.MAX_VALUE)),\n            },\n        };\n    }\n    async process_browsingContext_create(params) {\n        const browserCdpClient = this.#cdpConnection.browserClient();\n        let referenceContext;\n        if (params.referenceContext !== undefined) {\n            referenceContext = this.#browsingContextStorage.getContext(params.referenceContext);\n            if (!referenceContext.isTopLevelContext()) {\n                throw new protocol_js_1.Message.InvalidArgumentException(`referenceContext should be a top-level context`);\n            }\n        }\n        let result;\n        switch (params.type) {\n            case 'tab':\n                result = await browserCdpClient.sendCommand('Target.createTarget', {\n                    url: 'about:blank',\n                    newWindow: false,\n                });\n                break;\n            case 'window':\n                result = await browserCdpClient.sendCommand('Target.createTarget', {\n                    url: 'about:blank',\n                    newWindow: true,\n                });\n                break;\n        }\n        // Wait for the new tab to be loaded to avoid race conditions in the\n        // `browsingContext` events, when the `browsingContext.domContentLoaded` and\n        // `browsingContext.load` events from the initial `about:blank` navigation\n        // are emitted after the next navigation is started.\n        // Details: https://github.com/web-platform-tests/wpt/issues/35846\n        const contextId = result.targetId;\n        const context = this.#browsingContextStorage.getContext(contextId);\n        await context.awaitLoaded();\n        return {\n            result: {\n                context: context.id,\n            },\n        };\n    }\n    process_browsingContext_navigate(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return context.navigate(params.url, params.wait ?? 'none');\n    }\n    process_browsingContext_reload(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return context.reload(params.ignoreCache ?? false, params.wait ?? 'none');\n    }\n    async process_browsingContext_captureScreenshot(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return context.captureScreenshot();\n    }\n    async process_browsingContext_print(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        return context.print(params);\n    }\n    async process_script_addPreloadScript(params) {\n        const preloadScript = new bidiPreloadScript_1.BidiPreloadScript(params);\n        this.#preloadScriptStorage.addPreloadScript(preloadScript);\n        const cdpTargets = new Set(\n        // TODO: The unique target can be in a non-top-level browsing context.\n        // We need all the targets.\n        // To get them, we can walk through all the contexts and collect their targets into the set.\n        params.context === undefined || params.context === null\n            ? this.#browsingContextStorage\n                .getTopLevelContexts()\n                .map((context) => context.cdpTarget)\n            : [this.#browsingContextStorage.getContext(params.context).cdpTarget]);\n        await preloadScript.initInTargets(cdpTargets);\n        return {\n            result: {\n                script: preloadScript.id,\n            },\n        };\n    }\n    async process_script_removePreloadScript(params) {\n        const bidiId = params.script;\n        const scripts = this.#preloadScriptStorage.findPreloadScripts({\n            id: bidiId,\n        });\n        if (scripts.length === 0) {\n            throw new protocol_js_1.Message.NoSuchScriptException(`No preload script with BiDi ID '${bidiId}'`);\n        }\n        await Promise.all(scripts.map((script) => script.remove()));\n        this.#preloadScriptStorage.removeBiDiPreloadScripts({\n            id: bidiId,\n        });\n        return { result: {} };\n    }\n    async process_script_evaluate(params) {\n        const realm = await this.#getRealm(params.target);\n        return realm.scriptEvaluate(params.expression, params.awaitPromise, params.resultOwnership ?? 'none', params.serializationOptions ?? {});\n    }\n    process_script_getRealms(params) {\n        if (params.context !== undefined) {\n            // Make sure the context is known.\n            this.#browsingContextStorage.getContext(params.context);\n        }\n        const realms = this.#realmStorage\n            .findRealms({\n            browsingContextId: params.context,\n            type: params.type,\n        })\n            .map((realm) => realm.toBiDi());\n        return { result: { realms } };\n    }\n    async process_script_callFunction(params) {\n        const realm = await this.#getRealm(params.target);\n        return realm.callFunction(params.functionDeclaration, params.this ?? {\n            type: 'undefined',\n        }, // `this` is `undefined` by default.\n        params.arguments ?? [], // `arguments` is `[]` by default.\n        params.awaitPromise, params.resultOwnership ?? 'none', params.serializationOptions ?? {});\n    }\n    async process_script_disown(params) {\n        const realm = await this.#getRealm(params.target);\n        await Promise.all(params.handles.map(async (h) => realm.disown(h)));\n        return { result: {} };\n    }\n    async process_input_performActions(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        const inputState = this.#inputStateManager.get(context.top);\n        const actionsByTick = this.#getActionsByTick(params, inputState);\n        const dispatcher = new ActionDispatcher_js_1.ActionDispatcher(inputState, context, await ActionDispatcher_js_1.ActionDispatcher.isMacOS(context).catch(() => false));\n        await dispatcher.dispatchActions(actionsByTick);\n        return { result: {} };\n    }\n    #getActionsByTick(params, inputState) {\n        const actionsByTick = [];\n        for (const action of params.actions) {\n            switch (action.type) {\n                case protocol_js_1.Input.SourceActionsType.Pointer: {\n                    action.parameters ??= { pointerType: protocol_js_1.Input.PointerType.Mouse };\n                    action.parameters.pointerType ??= protocol_js_1.Input.PointerType.Mouse;\n                    const source = inputState.getOrCreate(action.id, protocol_js_1.Input.SourceActionsType.Pointer, action.parameters.pointerType);\n                    if (source.subtype !== action.parameters.pointerType) {\n                        throw new protocol_js_1.Message.InvalidArgumentException(`Expected input source ${action.id} to be ${source.subtype}; got ${action.parameters.pointerType}.`);\n                    }\n                    break;\n                }\n                default:\n                    inputState.getOrCreate(action.id, action.type);\n            }\n            const actions = action.actions.map((item) => ({\n                id: action.id,\n                action: item,\n            }));\n            for (let i = 0; i < actions.length; i++) {\n                if (actionsByTick.length === i) {\n                    actionsByTick.push([]);\n                }\n                actionsByTick[i].push(actions[i]);\n            }\n        }\n        return actionsByTick;\n    }\n    async process_input_releaseActions(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        const topContext = context.top;\n        const inputState = this.#inputStateManager.get(topContext);\n        const dispatcher = new ActionDispatcher_js_1.ActionDispatcher(inputState, context, await ActionDispatcher_js_1.ActionDispatcher.isMacOS(context).catch(() => false));\n        await dispatcher.dispatchTickActions(inputState.cancelList.reverse());\n        this.#inputStateManager.delete(topContext);\n        return { result: {} };\n    }\n    async process_browsingContext_setViewport(params) {\n        const context = this.#browsingContextStorage.getContext(params.context);\n        if (!context.isTopLevelContext()) {\n            throw new protocol_js_1.Message.InvalidArgumentException('Emulating viewport is only supported on the top-level context');\n        }\n        await context.setViewport(params.viewport);\n        return { result: {} };\n    }\n    async process_browsingContext_close(commandParams) {\n        const browserCdpClient = this.#cdpConnection.browserClient();\n        const context = this.#browsingContextStorage.getContext(commandParams.context);\n        if (!context.isTopLevelContext()) {\n            throw new protocol_js_1.Message.InvalidArgumentException('A top-level browsing context cannot be closed.');\n        }\n        const detachedFromTargetPromise = new Promise((resolve) => {\n            const onContextDestroyed = (eventParams) => {\n                if (eventParams.targetId === commandParams.context) {\n                    browserCdpClient.off('Target.detachedFromTarget', onContextDestroyed);\n                    resolve();\n                }\n            };\n            browserCdpClient.on('Target.detachedFromTarget', onContextDestroyed);\n        });\n        await browserCdpClient.sendCommand('Target.closeTarget', {\n            targetId: commandParams.context,\n        });\n        // Sometimes CDP command finishes before `detachedFromTarget` event,\n        // sometimes after. Wait for the CDP command to be finished, and then wait\n        // for `detachedFromTarget` if it hasn't emitted.\n        await detachedFromTargetPromise;\n        return { result: {} };\n    }\n    #isValidTarget(target) {\n        if (target.targetId === this.#selfTargetId) {\n            return false;\n        }\n        return ['page', 'iframe'].includes(target.type);\n    }\n    async process_cdp_sendCommand(params) {\n        const client = params.session\n            ? this.#cdpConnection.getCdpClient(params.session)\n            : this.#cdpConnection.browserClient();\n        const sendCdpCommandResult = await client.sendCommand(params.method, params.params);\n        return {\n            result: sendCdpCommandResult,\n            session: params.session,\n        };\n    }\n    process_cdp_getSession(params) {\n        const context = params.context;\n        const sessionId = this.#browsingContextStorage.getContext(context).cdpTarget.cdpSessionId;\n        if (sessionId === undefined) {\n            return { result: { session: null } };\n        }\n        return { result: { session: sessionId } };\n    }\n}\nexports.BrowsingContextProcessor = BrowsingContextProcessor;\n//# sourceMappingURL=browsingContextProcessor.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingBidiMessage = void 0;\nclass OutgoingBidiMessage {\n    #message;\n    #channel;\n    constructor(message, channel) {\n        this.#message = message;\n        this.#channel = channel;\n    }\n    static async createFromPromise(messagePromise, channel) {\n        return messagePromise.then((message) => new OutgoingBidiMessage(message, channel));\n    }\n    static createResolved(message, channel) {\n        return Promise.resolve(new OutgoingBidiMessage(message, channel));\n    }\n    get message() {\n        return this.#message;\n    }\n    get channel() {\n        return this.#channel;\n    }\n}\nexports.OutgoingBidiMessage = OutgoingBidiMessage;\n//# sourceMappingURL=OutgoingBidiMessage.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CommandProcessor = void 0;\nconst protocol_js_1 = require(\"../protocol/protocol.js\");\nconst log_js_1 = require(\"../utils/log.js\");\nconst EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nconst browsingContextProcessor_js_1 = require(\"./domains/context/browsingContextProcessor.js\");\nconst OutgoingBidiMessage_js_1 = require(\"./OutgoingBidiMessage.js\");\nclass BidiNoOpParser {\n    parseAddPreloadScriptParams(params) {\n        return params;\n    }\n    parseRemovePreloadScriptParams(params) {\n        return params;\n    }\n    parseGetRealmsParams(params) {\n        return params;\n    }\n    parseCallFunctionParams(params) {\n        return params;\n    }\n    parseEvaluateParams(params) {\n        return params;\n    }\n    parseDisownParams(params) {\n        return params;\n    }\n    parseSendCommandParams(params) {\n        return params;\n    }\n    parseGetSessionParams(params) {\n        return params;\n    }\n    parseSubscribeParams(params) {\n        return params;\n    }\n    parseNavigateParams(params) {\n        return params;\n    }\n    parseReloadParams(params) {\n        return params;\n    }\n    parseGetTreeParams(params) {\n        return params;\n    }\n    parseCreateParams(params) {\n        return params;\n    }\n    parseCloseParams(params) {\n        return params;\n    }\n    parseCaptureScreenshotParams(params) {\n        return params;\n    }\n    parsePrintParams(params) {\n        return params;\n    }\n    parsePerformActionsParams(params) {\n        return params;\n    }\n    parseReleaseActionsParams(params) {\n        return params;\n    }\n    parseSetViewportParams(params) {\n        return params;\n    }\n}\nclass CommandProcessor extends EventEmitter_js_1.EventEmitter {\n    #contextProcessor;\n    #eventManager;\n    #parser;\n    #logger;\n    constructor(cdpConnection, eventManager, selfTargetId, parser = new BidiNoOpParser(), browsingContextStorage, realmStorage, logger) {\n        super();\n        this.#eventManager = eventManager;\n        this.#logger = logger;\n        this.#contextProcessor = new browsingContextProcessor_js_1.BrowsingContextProcessor(cdpConnection, selfTargetId, eventManager, browsingContextStorage, realmStorage, logger);\n        this.#parser = parser;\n    }\n    static #process_session_status() {\n        return { result: { ready: false, message: 'already connected' } };\n    }\n    async #process_session_subscribe(params, channel) {\n        await this.#eventManager.subscribe(params.events, params.contexts ?? [null], channel);\n        return { result: {} };\n    }\n    async #process_session_unsubscribe(params, channel) {\n        await this.#eventManager.unsubscribe(params.events, params.contexts ?? [null], channel);\n        return { result: {} };\n    }\n    async #processCommand(commandData) {\n        switch (commandData.method) {\n            case 'session.status':\n                return CommandProcessor.#process_session_status();\n            case 'session.subscribe':\n                return this.#process_session_subscribe(this.#parser.parseSubscribeParams(commandData.params), commandData.channel ?? null);\n            case 'session.unsubscribe':\n                return this.#process_session_unsubscribe(this.#parser.parseSubscribeParams(commandData.params), commandData.channel ?? null);\n            case 'browsingContext.create':\n                return this.#contextProcessor.process_browsingContext_create(this.#parser.parseCreateParams(commandData.params));\n            case 'browsingContext.close':\n                return this.#contextProcessor.process_browsingContext_close(this.#parser.parseCloseParams(commandData.params));\n            case 'browsingContext.getTree':\n                return this.#contextProcessor.process_browsingContext_getTree(this.#parser.parseGetTreeParams(commandData.params));\n            case 'browsingContext.navigate':\n                return this.#contextProcessor.process_browsingContext_navigate(this.#parser.parseNavigateParams(commandData.params));\n            case 'browsingContext.captureScreenshot':\n                return this.#contextProcessor.process_browsingContext_captureScreenshot(this.#parser.parseCaptureScreenshotParams(commandData.params));\n            case 'browsingContext.print':\n                return this.#contextProcessor.process_browsingContext_print(this.#parser.parsePrintParams(commandData.params));\n            case 'browsingContext.reload':\n                return this.#contextProcessor.process_browsingContext_reload(this.#parser.parseReloadParams(commandData.params));\n            case 'browsingContext.setViewport':\n                return this.#contextProcessor.process_browsingContext_setViewport(this.#parser.parseSetViewportParams(commandData.params));\n            case 'script.addPreloadScript':\n                return this.#contextProcessor.process_script_addPreloadScript(this.#parser.parseAddPreloadScriptParams(commandData.params));\n            case 'script.removePreloadScript':\n                return this.#contextProcessor.process_script_removePreloadScript(this.#parser.parseRemovePreloadScriptParams(commandData.params));\n            case 'script.getRealms':\n                return this.#contextProcessor.process_script_getRealms(this.#parser.parseGetRealmsParams(commandData.params));\n            case 'script.callFunction':\n                return this.#contextProcessor.process_script_callFunction(this.#parser.parseCallFunctionParams(commandData.params));\n            case 'script.evaluate':\n                return this.#contextProcessor.process_script_evaluate(this.#parser.parseEvaluateParams(commandData.params));\n            case 'script.disown':\n                return this.#contextProcessor.process_script_disown(this.#parser.parseDisownParams(commandData.params));\n            case 'input.performActions':\n                return this.#contextProcessor.process_input_performActions(this.#parser.parsePerformActionsParams(commandData.params));\n            case 'input.releaseActions':\n                return this.#contextProcessor.process_input_releaseActions(this.#parser.parseReleaseActionsParams(commandData.params));\n            case 'cdp.sendCommand':\n                return this.#contextProcessor.process_cdp_sendCommand(this.#parser.parseSendCommandParams(commandData.params));\n            case 'cdp.getSession':\n                return this.#contextProcessor.process_cdp_getSession(this.#parser.parseGetSessionParams(commandData.params));\n        }\n        // Intentionally kept outside of the switch statement to ensure that\n        // ESLint @typescript-eslint/switch-exhaustiveness-check triggers if a new\n        // command is added.\n        throw new protocol_js_1.Message.UnknownCommandException(`Unknown command '${commandData.method}'.`);\n    }\n    async processCommand(command) {\n        try {\n            const result = await this.#processCommand(command);\n            const response = {\n                id: command.id,\n                ...result,\n            };\n            this.emit('response', OutgoingBidiMessage_js_1.OutgoingBidiMessage.createResolved(response, command.channel ?? null));\n        }\n        catch (e) {\n            if (e instanceof protocol_js_1.Message.ErrorResponse) {\n                const errorResponse = e;\n                this.emit('response', OutgoingBidiMessage_js_1.OutgoingBidiMessage.createResolved(errorResponse.toErrorResponse(command.id), command.channel ?? null));\n            }\n            else {\n                const error = e;\n                this.#logger?.(log_js_1.LogType.bidi, error);\n                this.emit('response', OutgoingBidiMessage_js_1.OutgoingBidiMessage.createResolved(new protocol_js_1.Message.UnknownErrorException(error.message).toErrorResponse(command.id), command.channel ?? null));\n            }\n        }\n    }\n}\nexports.CommandProcessor = CommandProcessor;\n//# sourceMappingURL=CommandProcessor.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowsingContextStorage = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\n/** Container class for browsing contexts. */\nclass BrowsingContextStorage {\n    /** Map from context ID to context implementation. */\n    #contexts = new Map();\n    /** Gets all top-level contexts, i.e. those with no parent. */\n    getTopLevelContexts() {\n        return this.getAllContexts().filter((context) => context.isTopLevelContext());\n    }\n    /** Gets all contexts. */\n    getAllContexts() {\n        return Array.from(this.#contexts.values());\n    }\n    /** Deletes the context with the given ID. */\n    deleteContextById(id) {\n        this.#contexts.delete(id);\n    }\n    /** Deletes the given context. */\n    deleteContext(context) {\n        this.#contexts.delete(context.id);\n    }\n    /** Tracks the given context. */\n    addContext(context) {\n        this.#contexts.set(context.id, context);\n    }\n    /** Returns true whether there is an existing context with the given ID. */\n    hasContext(id) {\n        return this.#contexts.has(id);\n    }\n    /** Gets the context with the given ID, if any. */\n    findContext(id) {\n        return this.#contexts.get(id);\n    }\n    /** Returns the top-level context ID of the given context, if any. */\n    findTopLevelContextId(id) {\n        if (id === null) {\n            return null;\n        }\n        const maybeContext = this.findContext(id);\n        const parentId = maybeContext?.parentId ?? null;\n        if (parentId === null) {\n            return id;\n        }\n        return this.findTopLevelContextId(parentId);\n    }\n    /** Gets the context with the given ID, if any, otherwise throws. */\n    getContext(id) {\n        const result = this.findContext(id);\n        if (result === undefined) {\n            throw new protocol_js_1.Message.NoSuchFrameException(`Context ${id} not found`);\n        }\n        return result;\n    }\n}\nexports.BrowsingContextStorage = BrowsingContextStorage;\n//# sourceMappingURL=browsingContextStorage.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Buffer = void 0;\n/**\n * Implements a FIFO buffer with a fixed size.\n */\nclass Buffer {\n    #capacity;\n    #entries = [];\n    #onItemRemoved;\n    /**\n     * @param capacity\n     * @param onItemRemoved optional delegate called for each removed element.\n     */\n    constructor(capacity, onItemRemoved) {\n        this.#capacity = capacity;\n        this.#onItemRemoved = onItemRemoved;\n    }\n    get() {\n        return this.#entries;\n    }\n    add(value) {\n        this.#entries.push(value);\n        while (this.#entries.length > this.#capacity) {\n            const item = this.#entries.shift();\n            if (item !== undefined) {\n                this.#onItemRemoved?.(item);\n            }\n        }\n    }\n}\nexports.Buffer = Buffer;\n//# sourceMappingURL=buffer.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IdWrapper = void 0;\n/**\n * Creates an object with a positive unique incrementing id.\n */\nclass IdWrapper {\n    static #counter = 0;\n    #id;\n    constructor() {\n        this.#id = ++IdWrapper.#counter;\n    }\n    get id() {\n        return this.#id;\n    }\n}\nexports.IdWrapper = IdWrapper;\n//# sourceMappingURL=idWrapper.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SubscriptionManager = exports.unrollEvents = exports.cartesianProduct = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\n/**\n * Returns the cartesian product of the given arrays.\n *\n * Example:\n *   cartesian([1, 2], ['a', 'b']); => [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]\n */\nfunction cartesianProduct(...a) {\n    return a.reduce((a, b) => a.flatMap((d) => b.map((e) => [d, e].flat())));\n}\nexports.cartesianProduct = cartesianProduct;\n/** Expands \"AllEvents\" events into atomic events. */\nfunction unrollEvents(events) {\n    const allEvents = new Set();\n    function addEvents(events) {\n        for (const event of events) {\n            allEvents.add(event);\n        }\n    }\n    for (const event of events) {\n        switch (event) {\n            case protocol_js_1.BrowsingContext.AllEvents:\n                addEvents(Object.values(protocol_js_1.BrowsingContext.EventNames));\n                break;\n            case protocol_js_1.Log.AllEvents:\n                addEvents(Object.values(protocol_js_1.Log.EventNames));\n                break;\n            case protocol_js_1.Network.AllEvents:\n                addEvents(Object.values(protocol_js_1.Network.EventNames));\n                break;\n            case protocol_js_1.Script.AllEvents:\n                addEvents(Object.values(protocol_js_1.Script.EventNames));\n                break;\n            default:\n                allEvents.add(event);\n        }\n    }\n    return [...allEvents.values()];\n}\nexports.unrollEvents = unrollEvents;\nclass SubscriptionManager {\n    #subscriptionPriority = 0;\n    // BrowsingContext `null` means the event has subscription across all the\n    // browsing contexts.\n    // Channel `null` means no `channel` should be added.\n    #channelToContextToEventMap = new Map();\n    #browsingContextStorage;\n    constructor(browsingContextStorage) {\n        this.#browsingContextStorage = browsingContextStorage;\n    }\n    getChannelsSubscribedToEvent(eventMethod, contextId) {\n        const prioritiesAndChannels = Array.from(this.#channelToContextToEventMap.keys())\n            .map((channel) => ({\n            priority: this.#getEventSubscriptionPriorityForChannel(eventMethod, contextId, channel),\n            channel,\n        }))\n            .filter(({ priority }) => priority !== null);\n        // Sort channels by priority.\n        return prioritiesAndChannels\n            .sort((a, b) => a.priority - b.priority)\n            .map(({ channel }) => channel);\n    }\n    #getEventSubscriptionPriorityForChannel(eventMethod, contextId, channel) {\n        const contextToEventMap = this.#channelToContextToEventMap.get(channel);\n        if (contextToEventMap === undefined) {\n            return null;\n        }\n        const maybeTopLevelContextId = this.#browsingContextStorage.findTopLevelContextId(contextId);\n        // `null` covers global subscription.\n        const relevantContexts = [...new Set([null, maybeTopLevelContextId])];\n        // Get all the subscription priorities.\n        const priorities = relevantContexts\n            .map((c) => contextToEventMap.get(c)?.get(eventMethod))\n            .filter((p) => p !== undefined);\n        if (priorities.length === 0) {\n            // Not subscribed, return null.\n            return null;\n        }\n        // Return minimal priority.\n        return Math.min(...priorities);\n    }\n    subscribe(event, contextId, channel) {\n        // All the subscriptions are handled on the top-level contexts.\n        contextId = this.#browsingContextStorage.findTopLevelContextId(contextId);\n        if (event === protocol_js_1.BrowsingContext.AllEvents) {\n            Object.values(protocol_js_1.BrowsingContext.EventNames).map((specificEvent) => this.subscribe(specificEvent, contextId, channel));\n            return;\n        }\n        if (event === protocol_js_1.Log.AllEvents) {\n            Object.values(protocol_js_1.Log.EventNames).map((specificEvent) => this.subscribe(specificEvent, contextId, channel));\n            return;\n        }\n        if (event === protocol_js_1.Network.AllEvents) {\n            Object.values(protocol_js_1.Network.EventNames).map((specificEvent) => this.subscribe(specificEvent, contextId, channel));\n            return;\n        }\n        if (event === protocol_js_1.Script.AllEvents) {\n            Object.values(protocol_js_1.Script.EventNames).map((specificEvent) => this.subscribe(specificEvent, contextId, channel));\n            return;\n        }\n        if (!this.#channelToContextToEventMap.has(channel)) {\n            this.#channelToContextToEventMap.set(channel, new Map());\n        }\n        const contextToEventMap = this.#channelToContextToEventMap.get(channel);\n        if (!contextToEventMap.has(contextId)) {\n            contextToEventMap.set(contextId, new Map());\n        }\n        const eventMap = contextToEventMap.get(contextId);\n        // Do not re-subscribe to events to keep the priority.\n        if (eventMap.has(event)) {\n            return;\n        }\n        eventMap.set(event, this.#subscriptionPriority++);\n    }\n    /**\n     * Unsubscribes atomically from all events in the given contexts and channel.\n     */\n    unsubscribeAll(events, contextIds, channel) {\n        // Assert all contexts are known.\n        for (const contextId of contextIds) {\n            if (contextId !== null) {\n                this.#browsingContextStorage.getContext(contextId);\n            }\n        }\n        const eventContextPairs = cartesianProduct(unrollEvents(events), contextIds);\n        // Assert all unsubscriptions are valid.\n        // If any of the unsubscriptions are invalid, do not unsubscribe from anything.\n        eventContextPairs\n            .map(([event, contextId]) => this.#checkUnsubscribe(event, contextId, channel))\n            .forEach((unsubscribe) => unsubscribe());\n    }\n    /**\n     * Unsubscribes from the event in the given context and channel.\n     * Syntactic sugar for \"unsubscribeAll\".\n     */\n    unsubscribe(eventName, contextId, channel) {\n        this.unsubscribeAll([eventName], [contextId], channel);\n    }\n    #checkUnsubscribe(event, contextId, channel) {\n        // All the subscriptions are handled on the top-level contexts.\n        contextId = this.#browsingContextStorage.findTopLevelContextId(contextId);\n        if (!this.#channelToContextToEventMap.has(channel)) {\n            throw new protocol_js_1.Message.InvalidArgumentException(`Cannot unsubscribe from ${event}, ${contextId === null ? 'null' : contextId}. No subscription found.`);\n        }\n        const contextToEventMap = this.#channelToContextToEventMap.get(channel);\n        if (!contextToEventMap.has(contextId)) {\n            throw new protocol_js_1.Message.InvalidArgumentException(`Cannot unsubscribe from ${event}, ${contextId === null ? 'null' : contextId}. No subscription found.`);\n        }\n        const eventMap = contextToEventMap.get(contextId);\n        if (!eventMap.has(event)) {\n            throw new protocol_js_1.Message.InvalidArgumentException(`Cannot unsubscribe from ${event}, ${contextId === null ? 'null' : contextId}. No subscription found.`);\n        }\n        return () => {\n            eventMap.delete(event);\n            // Clean up maps if empty.\n            if (eventMap.size === 0) {\n                contextToEventMap.delete(event);\n            }\n            if (contextToEventMap.size === 0) {\n                this.#channelToContextToEventMap.delete(channel);\n            }\n        };\n    }\n}\nexports.SubscriptionManager = SubscriptionManager;\n//# sourceMappingURL=SubscriptionManager.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventManager = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nconst buffer_js_1 = require(\"../../../utils/buffer.js\");\nconst idWrapper_js_1 = require(\"../../../utils/idWrapper.js\");\nconst OutgoingBidiMessage_js_1 = require(\"../../OutgoingBidiMessage.js\");\nconst DefaultMap_js_1 = require(\"../../../utils/DefaultMap.js\");\nconst SubscriptionManager_js_1 = require(\"./SubscriptionManager.js\");\nclass EventWrapper {\n    #idWrapper = new idWrapper_js_1.IdWrapper();\n    #contextId;\n    #event;\n    constructor(event, contextId) {\n        this.#event = event;\n        this.#contextId = contextId;\n    }\n    get id() {\n        return this.#idWrapper.id;\n    }\n    get contextId() {\n        return this.#contextId;\n    }\n    get event() {\n        return this.#event;\n    }\n}\n/**\n * Maps event name to a desired buffer length.\n */\nconst eventBufferLength = new Map([\n    [protocol_js_1.Log.EventNames.LogEntryAddedEvent, 100],\n]);\nclass EventManager {\n    static #NETWORK_DOMAIN_PREFIX = 'network';\n    /**\n     * Maps event name to a set of contexts where this event already happened.\n     * Needed for getting buffered events from all the contexts in case of\n     * subscripting to all contexts.\n     */\n    #eventToContextsMap = new DefaultMap_js_1.DefaultMap(() => new Set());\n    /**\n     * Maps `eventName` + `browsingContext` to buffer. Used to get buffered events\n     * during subscription. Channel-agnostic.\n     */\n    #eventBuffers = new Map();\n    /**\n     * Maps `eventName` + `browsingContext` + `channel` to last sent event id.\n     * Used to avoid sending duplicated events when user\n     * subscribes -> unsubscribes -> subscribes.\n     */\n    #lastMessageSent = new Map();\n    #subscriptionManager;\n    #bidiServer;\n    #isNetworkDomainEnabled;\n    constructor(bidiServer) {\n        this.#bidiServer = bidiServer;\n        this.#subscriptionManager = new SubscriptionManager_js_1.SubscriptionManager(bidiServer.getBrowsingContextStorage());\n        this.#isNetworkDomainEnabled = false;\n    }\n    get isNetworkDomainEnabled() {\n        return this.#isNetworkDomainEnabled;\n    }\n    /**\n     * Returns consistent key to be used to access value maps.\n     */\n    static #getMapKey(eventName, browsingContext, channel) {\n        return JSON.stringify({ eventName, browsingContext, channel });\n    }\n    registerEvent(event, contextId) {\n        this.registerPromiseEvent(Promise.resolve(event), contextId, event.method);\n    }\n    registerPromiseEvent(event, contextId, eventName) {\n        const eventWrapper = new EventWrapper(event, contextId);\n        const sortedChannels = this.#subscriptionManager.getChannelsSubscribedToEvent(eventName, contextId);\n        this.#bufferEvent(eventWrapper, eventName);\n        // Send events to channels in the subscription priority.\n        for (const channel of sortedChannels) {\n            this.#bidiServer.emitOutgoingMessage(OutgoingBidiMessage_js_1.OutgoingBidiMessage.createFromPromise(event, channel));\n            this.#markEventSent(eventWrapper, channel, eventName);\n        }\n    }\n    async subscribe(eventNames, contextIds, channel) {\n        // First check if all the contexts are known.\n        for (const contextId of contextIds) {\n            if (contextId !== null) {\n                // Assert the context is known. Throw exception otherwise.\n                this.#bidiServer.getBrowsingContextStorage().getContext(contextId);\n            }\n        }\n        for (const eventName of eventNames) {\n            for (const contextId of contextIds) {\n                await this.#handleDomains(eventName, contextId);\n                this.#subscriptionManager.subscribe(eventName, contextId, channel);\n                for (const eventWrapper of this.#getBufferedEvents(eventName, contextId, channel)) {\n                    // The order of the events is important.\n                    this.#bidiServer.emitOutgoingMessage(OutgoingBidiMessage_js_1.OutgoingBidiMessage.createFromPromise(eventWrapper.event, channel));\n                    this.#markEventSent(eventWrapper, channel, eventName);\n                }\n            }\n        }\n    }\n    /**\n     * Enables domains for the subscribed event in the required contexts or\n     * globally.\n     */\n    async #handleDomains(eventName, contextId) {\n        // Enable network domain if user subscribed to any of network events.\n        if (eventName.startsWith(EventManager.#NETWORK_DOMAIN_PREFIX)) {\n            // Enable for all the contexts.\n            if (contextId === null) {\n                this.#isNetworkDomainEnabled = true;\n                await Promise.all(this.#bidiServer\n                    .getBrowsingContextStorage()\n                    .getAllContexts()\n                    .map((context) => context.cdpTarget.enableNetworkDomain()));\n            }\n            else {\n                await this.#bidiServer\n                    .getBrowsingContextStorage()\n                    .getContext(contextId)\n                    .cdpTarget.enableNetworkDomain();\n            }\n        }\n    }\n    unsubscribe(eventNames, contextIds, channel) {\n        this.#subscriptionManager.unsubscribeAll(eventNames, contextIds, channel);\n    }\n    /**\n     * If the event is buffer-able, put it in the buffer.\n     */\n    #bufferEvent(eventWrapper, eventName) {\n        if (!eventBufferLength.has(eventName)) {\n            // Do nothing if the event is no buffer-able.\n            return;\n        }\n        const bufferMapKey = EventManager.#getMapKey(eventName, eventWrapper.contextId);\n        if (!this.#eventBuffers.has(bufferMapKey)) {\n            this.#eventBuffers.set(bufferMapKey, new buffer_js_1.Buffer(eventBufferLength.get(eventName)));\n        }\n        this.#eventBuffers.get(bufferMapKey).add(eventWrapper);\n        // Add the context to the list of contexts having `eventName` events.\n        this.#eventToContextsMap.get(eventName).add(eventWrapper.contextId);\n    }\n    /**\n     * If the event is buffer-able, mark it as sent to the given contextId and channel.\n     */\n    #markEventSent(eventWrapper, channel, eventName) {\n        if (!eventBufferLength.has(eventName)) {\n            // Do nothing if the event is no buffer-able.\n            return;\n        }\n        const lastSentMapKey = EventManager.#getMapKey(eventName, eventWrapper.contextId, channel);\n        this.#lastMessageSent.set(lastSentMapKey, Math.max(this.#lastMessageSent.get(lastSentMapKey) ?? 0, eventWrapper.id));\n    }\n    /**\n     * Returns events which are buffered and not yet sent to the given channel events.\n     */\n    #getBufferedEvents(eventName, contextId, channel) {\n        const bufferMapKey = EventManager.#getMapKey(eventName, contextId);\n        const lastSentMapKey = EventManager.#getMapKey(eventName, contextId, channel);\n        const lastSentMessageId = this.#lastMessageSent.get(lastSentMapKey) ?? -Infinity;\n        const result = this.#eventBuffers\n            .get(bufferMapKey)\n            ?.get()\n            .filter((wrapper) => wrapper.id > lastSentMessageId) ?? [];\n        if (contextId === null) {\n            // For global subscriptions, events buffered in each context should be sent back.\n            Array.from(this.#eventToContextsMap.get(eventName).keys())\n                .filter((_contextId) => \n            // Events without context are already in the result.\n            _contextId !== null &&\n                // Events from deleted contexts should not be sent.\n                this.#bidiServer.getBrowsingContextStorage().hasContext(_contextId))\n                .map((_contextId) => this.#getBufferedEvents(eventName, _contextId, channel))\n                .forEach((events) => result.push(...events));\n        }\n        return result.sort((e1, e2) => e1.id - e2.id);\n    }\n}\nexports.EventManager = EventManager;\n//# sourceMappingURL=EventManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RealmStorage = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\n/** Container class for browsing realms. */\nclass RealmStorage {\n    /** Tracks handles and their realms sent to the client. */\n    #knownHandlesToRealm = new Map();\n    /** Map from realm ID to Realm. */\n    #realmMap = new Map();\n    get knownHandlesToRealm() {\n        return this.#knownHandlesToRealm;\n    }\n    addRealm(realm) {\n        this.#realmMap.set(realm.realmId, realm);\n    }\n    /** Finds all realms that match the given filter. */\n    findRealms(filter) {\n        return Array.from(this.#realmMap.values()).filter((realm) => {\n            if (filter.realmId !== undefined && filter.realmId !== realm.realmId) {\n                return false;\n            }\n            if (filter.browsingContextId !== undefined &&\n                filter.browsingContextId !== realm.browsingContextId) {\n                return false;\n            }\n            if (filter.navigableId !== undefined &&\n                filter.navigableId !== realm.navigableId) {\n                return false;\n            }\n            if (filter.executionContextId !== undefined &&\n                filter.executionContextId !== realm.executionContextId) {\n                return false;\n            }\n            if (filter.origin !== undefined && filter.origin !== realm.origin) {\n                return false;\n            }\n            if (filter.type !== undefined && filter.type !== realm.type) {\n                return false;\n            }\n            if (filter.sandbox !== undefined && filter.sandbox !== realm.sandbox) {\n                return false;\n            }\n            if (filter.cdpSessionId !== undefined &&\n                filter.cdpSessionId !== realm.cdpSessionId) {\n                return false;\n            }\n            return true;\n        });\n    }\n    findRealm(filter) {\n        const maybeRealms = this.findRealms(filter);\n        if (maybeRealms.length !== 1) {\n            return undefined;\n        }\n        return maybeRealms[0];\n    }\n    /** Gets the only realm that matches the given filter, if any, otherwise throws. */\n    getRealm(filter) {\n        const maybeRealm = this.findRealm(filter);\n        if (maybeRealm === undefined) {\n            throw new protocol_js_1.Message.NoSuchFrameException(`Realm ${JSON.stringify(filter)} not found`);\n        }\n        return maybeRealm;\n    }\n    /** Deletes all realms that match the given filter. */\n    deleteRealms(filter) {\n        this.findRealms(filter).map((realm) => {\n            realm.delete();\n            this.#realmMap.delete(realm.realmId);\n            Array.from(this.knownHandlesToRealm.entries())\n                .filter(([, r]) => r === realm.realmId)\n                .map(([handle]) => this.knownHandlesToRealm.delete(handle));\n        });\n    }\n}\nexports.RealmStorage = RealmStorage;\n//# sourceMappingURL=realmStorage.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BidiServer = void 0;\nconst EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nconst log_js_1 = require(\"../utils/log.js\");\nconst processingQueue_js_1 = require(\"../utils/processingQueue.js\");\nconst CommandProcessor_js_1 = require(\"./CommandProcessor.js\");\nconst browsingContextStorage_js_1 = require(\"./domains/context/browsingContextStorage.js\");\nconst EventManager_js_1 = require(\"./domains/events/EventManager.js\");\nconst realmStorage_js_1 = require(\"./domains/script/realmStorage.js\");\nclass BidiServer extends EventEmitter_js_1.EventEmitter {\n    #messageQueue;\n    #transport;\n    #commandProcessor;\n    #browsingContextStorage = new browsingContextStorage_js_1.BrowsingContextStorage();\n    #realmStorage = new realmStorage_js_1.RealmStorage();\n    #logger;\n    #handleIncomingMessage = (message) => {\n        void this.#commandProcessor.processCommand(message).catch((error) => {\n            this.#logger?.(log_js_1.LogType.system, error);\n        });\n    };\n    #processOutgoingMessage = async (messageEntry) => {\n        const message = messageEntry.message;\n        if (messageEntry.channel !== null) {\n            message['channel'] = messageEntry.channel;\n        }\n        await this.#transport.sendMessage(message);\n    };\n    constructor(bidiTransport, cdpConnection, selfTargetId, parser, logger) {\n        super();\n        this.#logger = logger;\n        this.#messageQueue = new processingQueue_js_1.ProcessingQueue(this.#processOutgoingMessage, this.#logger);\n        this.#transport = bidiTransport;\n        this.#transport.setOnMessage(this.#handleIncomingMessage);\n        this.#commandProcessor = new CommandProcessor_js_1.CommandProcessor(cdpConnection, new EventManager_js_1.EventManager(this), selfTargetId, parser, this.#browsingContextStorage, this.#realmStorage, this.#logger);\n        this.#commandProcessor.on('response', (response) => {\n            this.emitOutgoingMessage(response);\n        });\n    }\n    static async createAndStart(bidiTransport, cdpConnection, selfTargetId, parser, logger) {\n        const server = new BidiServer(bidiTransport, cdpConnection, selfTargetId, parser, logger);\n        const cdpClient = cdpConnection.browserClient();\n        // Needed to get events about new targets.\n        await cdpClient.sendCommand('Target.setDiscoverTargets', { discover: true });\n        // Needed to automatically attach to new targets.\n        await cdpClient.sendCommand('Target.setAutoAttach', {\n            autoAttach: true,\n            waitForDebuggerOnStart: true,\n            flatten: true,\n        });\n        await server.topLevelContextsLoaded();\n        return server;\n    }\n    async topLevelContextsLoaded() {\n        await Promise.all(this.#browsingContextStorage\n            .getTopLevelContexts()\n            .map((c) => c.awaitLoaded()));\n    }\n    /**\n     * Sends BiDi message.\n     */\n    emitOutgoingMessage(messageEntry) {\n        this.#messageQueue.add(messageEntry);\n    }\n    close() {\n        this.#transport.close();\n    }\n    getBrowsingContextStorage() {\n        return this.#browsingContextStorage;\n    }\n}\nexports.BidiServer = BidiServer;\n//# sourceMappingURL=BidiServer.js.map","\"use strict\";\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OutgoingBidiMessage = exports.EventEmitter = exports.BidiServer = void 0;\n/**\n * @fileoverview The entry point to the BiDi Mapper namespace.\n * Other modules should only access exports defined in this file.\n * XXX: Add ESlint rule for this (https://github.com/import-js/eslint-plugin-import/blob/main/docs/rules/no-restricted-paths.md)\n */\nvar BidiServer_js_1 = require(\"./BidiServer.js\");\nObject.defineProperty(exports, \"BidiServer\", { enumerable: true, get: function () { return BidiServer_js_1.BidiServer; } });\nvar EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\nObject.defineProperty(exports, \"EventEmitter\", { enumerable: true, get: function () { return EventEmitter_js_1.EventEmitter; } });\nvar OutgoingBidiMessage_js_1 = require(\"./OutgoingBidiMessage.js\");\nObject.defineProperty(exports, \"OutgoingBidiMessage\", { enumerable: true, get: function () { return OutgoingBidiMessage_js_1.OutgoingBidiMessage; } });\n//# sourceMappingURL=bidiMapper.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CdpClient = exports.CloseError = void 0;\nconst EventEmitter_js_1 = require(\"../utils/EventEmitter.js\");\n/** A error that will be thrown if/when the connection is closed. */\nclass CloseError extends Error {\n}\nexports.CloseError = CloseError;\n/** Represents a high-level CDP connection to the browser. */\nclass CdpClient extends EventEmitter_js_1.EventEmitter {\n    #cdpConnection;\n    #sessionId;\n    constructor(cdpConnection, sessionId) {\n        super();\n        this.#cdpConnection = cdpConnection;\n        this.#sessionId = sessionId;\n    }\n    sendCommand(method, ...params) {\n        return this.#cdpConnection.sendCommand(method, params[0], this.#sessionId);\n    }\n    isCloseError(error) {\n        return error instanceof CloseError;\n    }\n}\nexports.CdpClient = CdpClient;\n//# sourceMappingURL=cdpClient.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CdpConnection = void 0;\nconst log_js_1 = require(\"../utils/log.js\");\nconst cdpClient_js_1 = require(\"./cdpClient.js\");\n/**\n * Represents a high-level CDP connection to the browser backend.\n * Manages a CdpClient instance for each active CDP session.\n */\nclass CdpConnection {\n    #transport;\n    /** The CdpClient object attached to the root browser session. */\n    #browserCdpClient;\n    /** Map from session ID to CdpClient. */\n    #sessionCdpClients = new Map();\n    #commandCallbacks = new Map();\n    #logger;\n    #nextId = 0;\n    constructor(transport, logger) {\n        this.#transport = transport;\n        this.#logger = logger;\n        this.#transport.setOnMessage(this.#onMessage);\n        this.#browserCdpClient = new cdpClient_js_1.CdpClient(this, undefined);\n    }\n    /** Closes the connection to the browser. */\n    close() {\n        this.#transport.close();\n        for (const [, { reject, error }] of this.#commandCallbacks) {\n            reject(error);\n        }\n        this.#commandCallbacks.clear();\n        this.#sessionCdpClients.clear();\n    }\n    /** The CdpClient object attached to the root browser session. */\n    browserClient() {\n        return this.#browserCdpClient;\n    }\n    /**\n     * Gets a CdpClient instance attached to the given session ID,\n     * or null if the session is not attached.\n     */\n    getCdpClient(sessionId) {\n        const cdpClient = this.#sessionCdpClients.get(sessionId);\n        if (!cdpClient) {\n            throw new Error('Unknown CDP session ID');\n        }\n        return cdpClient;\n    }\n    sendCommand(method, params, sessionId) {\n        return new Promise((resolve, reject) => {\n            const id = this.#nextId++;\n            this.#commandCallbacks.set(id, {\n                resolve,\n                reject,\n                error: new cdpClient_js_1.CloseError(`${method} ${JSON.stringify(params)} ${sessionId ?? ''} call rejected because the connection has been closed.`),\n            });\n            const cdpMessage = { id, method, params };\n            if (sessionId) {\n                cdpMessage.sessionId = sessionId;\n            }\n            const cdpMessageStr = JSON.stringify(cdpMessage);\n            void this.#transport.sendMessage(cdpMessageStr)?.catch((error) => {\n                this.#logger?.(`${log_js_1.LogType.cdp}:ERROR`, error);\n                this.#transport.close();\n            });\n            this.#logger?.(`${log_js_1.LogType.cdp}:SEND ▸`, JSON.stringify(cdpMessage, null, 2));\n        });\n    }\n    #onMessage = (message) => {\n        const messageParsed = JSON.parse(message);\n        const messagePretty = JSON.stringify(messageParsed, null, 2);\n        this.#logger?.(`${log_js_1.LogType.cdp}:RECV ◂`, messagePretty);\n        // Update client map if a session is attached or detached.\n        // Listen for these events on every session.\n        if (messageParsed.method === 'Target.attachedToTarget') {\n            const { sessionId } = messageParsed.params;\n            this.#sessionCdpClients.set(sessionId, new cdpClient_js_1.CdpClient(this, sessionId));\n        }\n        else if (messageParsed.method === 'Target.detachedFromTarget') {\n            const { sessionId } = messageParsed.params;\n            const client = this.#sessionCdpClients.get(sessionId);\n            if (client) {\n                this.#sessionCdpClients.delete(sessionId);\n            }\n        }\n        if (messageParsed.id !== undefined) {\n            // Handle command response.\n            const callbacks = this.#commandCallbacks.get(messageParsed.id);\n            this.#commandCallbacks.delete(messageParsed.id);\n            if (callbacks) {\n                if (messageParsed.result) {\n                    callbacks.resolve(messageParsed.result);\n                }\n                else if (messageParsed.error) {\n                    callbacks.reject(messageParsed.error);\n                }\n            }\n        }\n        else if (messageParsed.method) {\n            const client = messageParsed.sessionId\n                ? this.#sessionCdpClients.get(messageParsed.sessionId)\n                : this.#browserCdpClient;\n            client?.emit(messageParsed.method, messageParsed.params || {});\n        }\n    };\n}\nexports.CdpConnection = CdpConnection;\n//# sourceMappingURL=cdpConnection.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.log = exports.generatePage = void 0;\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst log_js_1 = require(\"../utils/log.js\");\n/** HTML source code for the user-facing Mapper tab. */\nconst mapperPageSource = '<!DOCTYPE html><title>BiDi-CDP Mapper</title><style>body{font-family: Roboto, serif; font-size: 13px; color: #202124;}.log{padding: 12px; font-family: Menlo, Consolas, Monaco, Liberation Mono, Lucida Console, monospace; font-size: 11px; line-height: 180%; background: #f1f3f4; border-radius: 4px;}.pre{overflow-wrap: break-word; padding: 10px;}.card{margin: 60px auto; padding: 2px 0; max-width: 900px; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15), 0 1px 6px rgba(0, 0, 0, 0.2); border-radius: 8px;}.divider{height: 1px; background: #f0f0f0;}.item{padding: 16px 20px;}</style><div class=\"card\"><div class=\"item\"><h1>BiDi-CDP Mapper is controlling this tab</h1><p>Closing or reloading it will stop the BiDi process. <a target=\"_blank\" title=\"BiDi-CDP Mapper GitHub Repository\" href=\"https://github.com/GoogleChromeLabs/chromium-bidi\">Details.</a></p></div><div class=\"divider\"></div><details id=\"details\"><summary class=\"item\">Debug information</summary></details></div>';\n/**\n * The following piece of HTML should be added to the `debug` element:\n *\n * <div class=\"divider\"></div>\n * <div class=\"item\">\n * <h3>${name}</h3>\n * <div id=\"${name}_log\" class=\"log\">\n */\nfunction findOrCreateTypeLogContainer(logType) {\n    const containerId = `${logType}_log`;\n    const existingContainer = document.getElementById(containerId);\n    if (existingContainer) {\n        return existingContainer;\n    }\n    const debugElement = document.getElementById('details');\n    const divider = document.createElement('div');\n    divider.className = 'divider';\n    debugElement.appendChild(divider);\n    const htmlItem = document.createElement('div');\n    htmlItem.className = 'item';\n    htmlItem.innerHTML = `<h3>${logType}</h3><div id=\"${containerId}\" class=\"log\"></div>`;\n    debugElement.appendChild(htmlItem);\n    return document.getElementById(containerId);\n}\nfunction generatePage() {\n    // If run not in browser (e.g. unit test), do nothing.\n    if (!globalThis.document.documentElement) {\n        return;\n    }\n    globalThis.document.documentElement.innerHTML = mapperPageSource;\n    // Create main log containers in proper order.\n    findOrCreateTypeLogContainer(log_js_1.LogType.system);\n    findOrCreateTypeLogContainer(log_js_1.LogType.bidi);\n    findOrCreateTypeLogContainer(log_js_1.LogType.browsingContexts);\n    findOrCreateTypeLogContainer(log_js_1.LogType.cdp);\n}\nexports.generatePage = generatePage;\nfunction log(logType, ...messages) {\n    // If run not in browser (e.g. unit test), do nothing.\n    if (!globalThis.document.documentElement) {\n        return;\n    }\n    // If `sendDebugMessage` is defined, send the log message there.\n    global.window?.sendDebugMessage?.(JSON.stringify({ logType, messages }));\n    const typeLogContainer = findOrCreateTypeLogContainer(logType);\n    // This piece of HTML should be added:\n    // <div class=\"pre\">...log message...</div>\n    const lineElement = document.createElement('div');\n    lineElement.className = 'pre';\n    lineElement.textContent = messages.join(' ');\n    typeLogContainer.appendChild(lineElement);\n}\nexports.log = log;\n//# sourceMappingURL=mapperTabPage.js.map","\"use strict\";\n/**\n * Copyright 2021 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @license\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Parser = __importStar(require(\"../protocol-parser/protocol-parser.js\"));\nconst protocol_1 = require(\"../protocol/protocol\");\nconst bidiMapper_js_1 = require(\"../bidiMapper/bidiMapper.js\");\nconst cdpConnection_js_1 = require(\"../cdp/cdpConnection.js\");\nconst log_js_1 = require(\"../utils/log.js\");\nconst mapperTabPage_js_1 = require(\"./mapperTabPage.js\");\n// Initiate `setSelfTargetId` as soon as possible to prevent race condition.\nconst waitSelfTargetIdPromise = waitSelfTargetId();\nvoid (async () => {\n    (0, mapperTabPage_js_1.generatePage)();\n    // Needed to filter out info related to BiDi target.\n    const selfTargetId = await waitSelfTargetIdPromise;\n    const bidiServer = await createBidiServer(selfTargetId);\n    (0, mapperTabPage_js_1.log)(log_js_1.LogType.system, 'Launched');\n    bidiServer.emitOutgoingMessage(bidiMapper_js_1.OutgoingBidiMessage.createResolved({ launched: true }, null));\n})();\nfunction createCdpConnection() {\n    /**\n     * A CdpTransport implementation that uses the window.cdp bindings\n     * injected by Target.exposeDevToolsProtocol.\n     */\n    class WindowCdpTransport {\n        #onMessage = null;\n        constructor() {\n            window.cdp.onmessage = (message) => {\n                this.#onMessage?.call(null, message);\n            };\n        }\n        setOnMessage(onMessage) {\n            this.#onMessage = onMessage;\n        }\n        sendMessage(message) {\n            window.cdp.send(message);\n        }\n        close() {\n            this.#onMessage = null;\n            window.cdp.onmessage = null;\n        }\n    }\n    return new cdpConnection_js_1.CdpConnection(new WindowCdpTransport(), mapperTabPage_js_1.log);\n}\nfunction createBidiServer(selfTargetId) {\n    class WindowBidiTransport {\n        #onMessage = null;\n        constructor() {\n            window.onBidiMessage = (messageStr) => {\n                (0, mapperTabPage_js_1.log)(`${log_js_1.LogType.bidi}:RECV ◂`, messageStr);\n                let messageObject;\n                try {\n                    messageObject = WindowBidiTransport.#parseBidiMessage(messageStr);\n                }\n                catch (e) {\n                    // Transport-level error does not provide channel.\n                    this.#respondWithError(messageStr, protocol_1.Message.ErrorCode.InvalidArgument, e.message, null);\n                    return;\n                }\n                this.#onMessage?.call(null, messageObject);\n            };\n        }\n        setOnMessage(onMessage) {\n            this.#onMessage = onMessage;\n        }\n        sendMessage(message) {\n            const messageStr = JSON.stringify(message);\n            window.sendBidiResponse(messageStr);\n            (0, mapperTabPage_js_1.log)(`${log_js_1.LogType.bidi}:SEND ▸`, messageStr);\n        }\n        close() {\n            this.#onMessage = null;\n            window.onBidiMessage = null;\n        }\n        #respondWithError(plainCommandData, errorCode, errorMessage, channel) {\n            const errorResponse = WindowBidiTransport.#getErrorResponse(plainCommandData, errorCode, errorMessage);\n            if (channel) {\n                // XXX: get rid of any, same code existed in BidiServer.\n                this.sendMessage({\n                    ...errorResponse,\n                    channel,\n                });\n            }\n            else {\n                this.sendMessage(errorResponse);\n            }\n        }\n        static #getJsonType(value) {\n            if (value === null) {\n                return 'null';\n            }\n            if (Array.isArray(value)) {\n                return 'array';\n            }\n            return typeof value;\n        }\n        static #getErrorResponse(messageStr, errorCode, errorMessage) {\n            // XXX: this is bizarre per spec. We reparse the payload and\n            // extract the ID, regardless of what kind of value it was.\n            let messageId;\n            try {\n                const messageObj = JSON.parse(messageStr);\n                if (WindowBidiTransport.#getJsonType(messageObj) === 'object' &&\n                    'id' in messageObj) {\n                    messageId = messageObj.id;\n                }\n            }\n            catch { }\n            return {\n                id: messageId,\n                error: errorCode,\n                message: errorMessage,\n                // XXX: optional stacktrace field.\n            };\n        }\n        static #parseBidiMessage(messageStr) {\n            let messageObject;\n            try {\n                messageObject = JSON.parse(messageStr);\n            }\n            catch {\n                throw new Error('Cannot parse data as JSON');\n            }\n            const parsedType = WindowBidiTransport.#getJsonType(messageObject);\n            if (parsedType !== 'object') {\n                throw new Error(`Expected JSON object but got ${parsedType}`);\n            }\n            // Extract and validate id, method and params.\n            const { id, method, params } = messageObject;\n            const idType = WindowBidiTransport.#getJsonType(id);\n            if (idType !== 'number' || !Number.isInteger(id) || id < 0) {\n                // TODO: should uint64_t be the upper limit?\n                // https://tools.ietf.org/html/rfc7049#section-2.1\n                throw new Error(`Expected unsigned integer but got ${idType}`);\n            }\n            const methodType = WindowBidiTransport.#getJsonType(method);\n            if (methodType !== 'string') {\n                throw new Error(`Expected string method but got ${methodType}`);\n            }\n            const paramsType = WindowBidiTransport.#getJsonType(params);\n            if (paramsType !== 'object') {\n                throw new Error(`Expected object params but got ${paramsType}`);\n            }\n            let channel = messageObject.channel;\n            if (channel !== undefined) {\n                const channelType = WindowBidiTransport.#getJsonType(channel);\n                if (channelType !== 'string') {\n                    throw new Error(`Expected string channel but got ${channelType}`);\n                }\n                // Empty string channel is considered as no channel provided.\n                if (channel === '') {\n                    channel = undefined;\n                }\n            }\n            return { id, method, params, channel };\n        }\n    }\n    return bidiMapper_js_1.BidiServer.createAndStart(new WindowBidiTransport(), createCdpConnection(), selfTargetId, new BidiParserImpl(), mapperTabPage_js_1.log);\n}\nclass BidiParserImpl {\n    parseAddPreloadScriptParams(params) {\n        return Parser.Script.parseAddPreloadScriptParams(params);\n    }\n    parseRemovePreloadScriptParams(params) {\n        return Parser.Script.parseRemovePreloadScriptParams(params);\n    }\n    parseGetRealmsParams(params) {\n        return Parser.Script.parseGetRealmsParams(params);\n    }\n    parseCallFunctionParams(params) {\n        return Parser.Script.parseCallFunctionParams(params);\n    }\n    parseEvaluateParams(params) {\n        return Parser.Script.parseEvaluateParams(params);\n    }\n    parseDisownParams(params) {\n        return Parser.Script.parseDisownParams(params);\n    }\n    parseSendCommandParams(params) {\n        return Parser.Cdp.parseSendCommandParams(params);\n    }\n    parseGetSessionParams(params) {\n        return Parser.Cdp.parseGetSessionParams(params);\n    }\n    parseSubscribeParams(params) {\n        return Parser.Session.parseSubscribeParams(params);\n    }\n    parseNavigateParams(params) {\n        return Parser.BrowsingContext.parseNavigateParams(params);\n    }\n    parseReloadParams(params) {\n        return Parser.BrowsingContext.parseReloadParams(params);\n    }\n    parseGetTreeParams(params) {\n        return Parser.BrowsingContext.parseGetTreeParams(params);\n    }\n    parseCreateParams(params) {\n        return Parser.BrowsingContext.parseCreateParams(params);\n    }\n    parseCloseParams(params) {\n        return Parser.BrowsingContext.parseCloseParams(params);\n    }\n    parseCaptureScreenshotParams(params) {\n        return Parser.BrowsingContext.parseCaptureScreenshotParams(params);\n    }\n    parsePrintParams(params) {\n        return Parser.BrowsingContext.parsePrintParams(params);\n    }\n    parsePerformActionsParams(params) {\n        return Parser.Input.parsePerformActionsParams(params);\n    }\n    parseReleaseActionsParams(params) {\n        return Parser.Input.parseReleaseActionsParams(params);\n    }\n    parseSetViewportParams(params) {\n        return Parser.BrowsingContext.parseSetViewportParams(params);\n    }\n}\n// Needed to filter out info related to BiDi target.\nasync function waitSelfTargetId() {\n    return new Promise((resolve) => {\n        window.setSelfTargetId = (targetId) => {\n            (0, mapperTabPage_js_1.log)(log_js_1.LogType.system, 'Current target ID:', targetId);\n            resolve(targetId);\n        };\n    });\n}\n//# sourceMappingURL=bidiTab.js.map"],"names":["util","Object","defineProperty","exports","value","getParsedType","ZodParsedType","objectUtil","assertEqual","val","assertIs","_arg","assertNever","_x","Error","arrayToEnum","items","obj","item","getValidEnumValues","validKeys","objectKeys","filter","k","filtered","objectValues","map","e","keys","object","key","prototype","hasOwnProperty","call","push","find","arr","checker","isInteger","Number","isFinite","Math","floor","joinValues","array","separator","join","jsonStringifyReplacer","_","toString","mergeShapes","first","second","data","undefined","string","isNaN","nan","number","boolean","function","bigint","symbol","Array","isArray","null","then","catch","promise","Map","Set","set","Date","date","unknown","ZodError_1","ZodError","quotelessJson","util_1","require$$0","ZodError$1","ZodIssueCode","JSON","stringify","replace","constructor","issues","super","this","addIssue","sub","addIssues","subs","actualProto","setPrototypeOf","__proto__","name","errors","format","_mapper","mapper","issue","message","fieldErrors","_errors","processError","error","code","unionErrors","returnTypeError","argumentsError","path","length","curr","i","el","isEmpty","flatten","formErrors","create","en","require$$1","default","_ctx","invalid_type","received","expected","invalid_literal","unrecognized_keys","invalid_union","invalid_union_discriminator","options","invalid_enum_value","invalid_arguments","invalid_return_type","invalid_date","invalid_string","validation","includes","position","startsWith","endsWith","too_small","type","exact","inclusive","minimum","too_big","maximum","custom","invalid_intersection_types","not_multiple_of","multipleOf","not_finite","defaultError","__importDefault","mod","__esModule","getErrorMap","setErrorMap","en_1","defaultErrorMap","overrideErrorMap","isAsync","isValid","isDirty","isAborted","OK","DIRTY","INVALID","ParseStatus","addIssueToContext","EMPTY_PATH","makeIssue","errors_1","params","errorMaps","issueData","fullPath","fullIssue","errorMessage","maps","m","slice","reverse","ctx","common","contextualErrorMap","schemaErrorMap","x","dirty","abort","static","status","results","arrayValue","s","pairs","syncPairs","pair","mergeObjectSync","finalObject","alwaysSet","freeze","Promise","typeAliases","errorUtil","errToObj","discriminatedUnion","coerce","ZodFirstPartyTypeKind","late","ZodSchema","Schema","ZodBranded","BRAND","ZodNaN","ZodCatch","ZodDefault","ZodNullable","ZodTransformer","ZodEffects","ZodPromise","ZodNativeEnum","ZodEnum","ZodLiteral","ZodFunction","ZodSet","ZodMap","ZodRecord","ZodTuple","ZodIntersection","ZodUnion","ZodObject","ZodArray","ZodVoid","ZodNever","ZodUnknown","ZodNull","ZodUndefined","ZodSymbol","ZodDate","ZodBoolean","ZodBigInt","ZodString","ZodType","NEVER","void","union","transformer","strictObject","record","preprocess","pipeline","optional","onumber","oboolean","nullable","never","nativeEnum","literal","lazy","intersection","enum","effect","errorUtil_1","parseUtil_1","require$$2","require$$3","require$$4","ParseInputLazyPath","parent","_cachedPath","_path","_key","handleResult","result","success","_error","processCreateParams","errorMap","invalid_type_error","required_error","description","iss","def","spa","safeParseAsync","_def","parse","bind","safeParse","parseAsync","refine","refinement","superRefine","nullish","or","and","transform","brand","describe","pipe","isNullable","isOptional","_getType","input","_getOrReturnCtx","parsedType","_processInputParams","_parseSync","_parse","_parseAsync","resolve","_a","async","maybeAsyncResult","check","getIssueProperties","_refinement","setError","refinementData","schema","typeName","ZodOptional","option","incoming","defaultValueFunc","innerType","defaultValue","catchValueFunc","catchValue","This","target","ZodPipeline","cuidRegex","cuid2Regex","ulidRegex","uuidRegex","emailRegex","emojiRegex","ipv4Regex","ipv6Regex","arguments","_regex","regex","test","nonempty","min","trim","checks","kind","toLowerCase","toUpperCase","String","tooBig","tooSmall","URL","lastIndex","args","precision","offset","RegExp","ip","version","_addCheck","email","url","emoji","uuid","cuid","cuid2","ulid","datetime","minLength","max","maxLength","len","isDatetime","ch","isEmail","isURL","isEmoji","isUUID","isCUID","isCUID2","isULID","isIP","floatSafeRemainder","step","valDecCount","split","stepDecCount","decCount","parseInt","toFixed","pow","ZodNumber","gte","lte","setLimit","gt","lt","int","positive","negative","nonpositive","nonnegative","finite","safe","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","minValue","maxValue","isInt","BigInt","Boolean","getTime","minDate","maxDate","ZodAny","_any","_unknown","exactLength","all","mergeArray","element","deepPartialify","newShape","shape","fieldSchema","unwrap","_cached","nonstrict","passthrough","augment","extend","_getCached","shapeKeys","extraKeys","catchall","unknownKeys","keyValidator","strict","_b","_c","_d","strip","augmentation","merge","merging","setKey","index","pick","mask","forEach","omit","deepPartial","partial","required","newField","keyof","createZodEnum","strictCreate","lazycreate","childCtx","types","getDiscriminator","ZodLazy","ZodDiscriminatedUnion","discriminator","discriminatorValue","optionsMap","get","from","discriminatorValues","has","mergeValues","a","b","aType","bType","valid","bKeys","sharedKeys","indexOf","newObj","sharedValue","newArray","handleParsed","parsedLeft","parsedRight","merged","left","right","rest","itemIndex","schemas","keySchema","keyType","valueSchema","valueType","mergeObjectAsync","third","entries","finalMap","minSize","size","maxSize","finalizeSet","elements","parsedSet","add","values","validate","implement","makeArgsIssue","makeReturnsIssue","returns","fn","parsedArgs","parsedReturns","parameters","returnType","func","strictImplement","getter","expectedValues","enumValues","Values","Enum","extract","exclude","opt","nativeEnumValues","promisified","sourceType","processed","checkCtx","arg","fatal","executeRefinement","acc","inner","base","createWithPreprocess","removeDefault","newCtx","removeCatch","Symbol","inResult","in","out","handleAsync","p","_fatal","p2","instanceof","cls","stringType","numberType","nanType","bigIntType","booleanType","dateType","symbolType","undefinedType","nullType","anyType","any","unknownType","neverType","voidType","arrayType","objectType","strictObjectType","unionType","discriminatedUnionType","intersectionType","tupleType","tuple","recordType","mapType","setType","functionType","lazyType","literalType","enumType","nativeEnumType","promiseType","effectsType","optionalType","nullableType","preprocessType","pipelineType","ostring","__createBinding","o","k2","enumerable","__exportStar","require$$5","__setModuleDefault","v","__importStar","z","Script","EventNames","BrowsingContext","Log","Network","Input","SourceActionsType","PointerType","ActionType","Message","ErrorCode","ErrorResponse","stacktrace","toErrorResponse","commandId","id","InvalidArgumentException","InvalidArgument","MoveTargetOutOfBoundsException","MoveTargetOutOfBounds","NoSuchHandleException","NoSuchHandle","InvalidSessionIdException","InvalidSessionId","NoSuchAlertException","NoSuchAlert","NoSuchFrameException","NoSuchFrame","NoSuchNodeException","NoSuchNode","NoSuchElementException","NoSuchElement","NoSuchScriptException","NoSuchScript","SessionNotCreatedException","SessionNotCreated","UnknownCommandException","UnknownCommand","UnknownErrorException","UnknownError","UnsupportedOperationException","UnsupportedOperation","AllEvents","Session","parseObject","zod_1","protocol_js_1","MAX_INT","parseResult","UnicodeCharacterSchema","CommonDataTypes","SharedReferenceSchema","sharedId","handle","RemoteReferenceSchema","UndefinedValueSchema","NullValueSchema","StringValueSchema","SpecialNumberSchema","NumberValueSchema","BooleanValueSchema","BigIntValueSchema","PrimitiveProtocolValueSchema","LocalValueSchema","ArrayLocalValueSchema","DateLocalValueSchema","MapLocalValueSchema","ObjectLocalValueSchema","RegExpLocalValueSchema","SetLocalValueSchema","LocalOrRemoteValueSchema","ListLocalValueSchema","MappingLocalValueSchema","pattern","flags","BrowsingContextSchema","MaxDepthSchema","RealmTypeSchema","GetRealmsParametersSchema","context","parseGetRealmsParams","ContextTargetSchema","sandbox","RealmTargetSchema","realm","TargetSchema","ResultOwnershipSchema","SerializationOptionsSchema","maxDomDepth","maxObjectDepth","includeShadowTree","EvaluateParametersSchema","expression","awaitPromise","resultOwnership","serializationOptions","parseEvaluateParams","DisownParametersSchema","handles","parseDisownParams","ChannelSchema","ChannelPropertiesSchema","channel","ownership","ChannelValueSchema","PreloadScriptSchema","AddPreloadScriptParametersSchema","functionDeclaration","parseAddPreloadScriptParams","RemovePreloadScriptParametersSchema","script","parseRemovePreloadScriptParams","ArgumentValueSchema","CallFunctionParametersSchema","parseCallFunctionParams","GetTreeParametersSchema","maxDepth","root","parseGetTreeParams","ReadinessStateSchema","NavigateParametersSchema","wait","parseNavigateParams","ReloadParametersSchema","ignoreCache","parseReloadParams","CreateParametersSchema","referenceContext","parseCreateParams","CloseParametersSchema","parseCloseParams","CaptureScreenshotParametersSchema","parseCaptureScreenshotParams","PrintPageParametersSchema","height","width","PrintMarginParametersSchema","bottom","top","PrintPageRangesSchema","pageRanges","every","pageRange","match","start","end","groups","PrintParametersSchema","background","margin","orientation","page","scale","shrinkToFit","parsePrintParams","ViewportSchema","SetViewportActionSchema","viewport","parseSetViewportParams","Cdp","SendCommandParamsSchema","method","session","parseSendCommandParams","GetSessionParamsSchema","parseGetSessionParams","BiDiSubscriptionRequestParametersEventsSchema","CdpSubscriptionRequestParametersEventsSchema","SubscriptionRequestParametersEventsSchema","SubscriptionRequestParametersSchema","events","contexts","parseSubscribeParams","ElementOriginSchema","OriginSchema","PauseActionSchema","Pause","duration","KeyDownActionSchema","KeyDown","KeyUpActionSchema","KeyUp","TiltPropertiesSchema","tiltX","tiltY","AnglePropertiesSchema","altitudeAngle","PI","azimuthAngle","PointerCommonPropertiesSchema","pressure","tangentialPressure","twist","PointerUpActionSchema","PointerUp","button","PointerDownActionSchema","PointerDown","PointerMoveActionSchema","PointerMove","y","origin","WheelScrollActionSchema","Scroll","deltaX","deltaY","WheelSourceActionSchema","WheelSourceActionsSchema","Wheel","actions","PointerSourceActionSchema","PointerTypeSchema","PointerParametersSchema","pointerType","Mouse","PointerSourceActionsSchema","Pointer","KeySourceActionSchema","KeySourceActionsSchema","Key","NoneSourceActionSchema","NoneSourceActionsSchema","None","SourceActionsSchema","PerformActionsParametersSchema","parsePerformActionsParams","ReleaseActionsParametersSchema","parseReleaseActionsParams","EventEmitter_1","EventEmitter","mitt_1","n","on","t","off","splice","emit","EventEmitter$1","emitter","handler","once","event","onceHandler","eventData","LogType","processingQueue","ProcessingQueue","log_js_1","logger","processor","queue","isProcessing","entry","processIfNeeded","entryPromise","shift","system","assert_1","assert","assert$1","predicate","Mutex_1","Mutex","Mutex$1","locked","acquirers","acquire","state","resolved","release","action","WheelSource","KeySource","NoneSource","SourceType","pressed","modifiers","alt","setModifier","ctrl","meta","bit","PointerSource","subtype","pointerId","buttons","clickCount","lastClick","setClickCount","timeStamp","DOUBLE_CLICK_TIME_MS","abs","MAX_DOUBLE_CLICK_RADIUS","InputState_1","InputState","Mutex_js_1","InputSource_js_1","InputState$1","cancelList","sources","mutex","getOrCreate","source","pointerIds","getGlobalKeyState","InputStateManager_1","InputStateManager","assert_js_1","InputState_js_1","InputStateManager$1","states","WeakMap","isTopLevelContext","delete","USKeyboardLayout","KeyToKeyCode","Abort","Help","Backspace","Tab","Numpad5","NumpadEnter","Enter","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","CapsLock","Escape","Convert","NonConvert","Space","Numpad9","PageUp","Numpad3","PageDown","End","Numpad1","Home","Numpad7","ArrowLeft","Numpad4","Numpad8","ArrowUp","ArrowRight","Numpad6","Numpad2","ArrowDown","Select","Open","PrintScreen","Insert","Numpad0","Delete","NumpadDecimal","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","MetaLeft","MetaRight","ContextMenu","NumpadMultiply","NumpadAdd","NumpadSubtract","NumpadDivide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","NumLock","ScrollLock","AudioVolumeMute","AudioVolumeDown","AudioVolumeUp","MediaTrackNext","MediaTrackPrevious","MediaStop","MediaPlayPause","Semicolon","Equal","NumpadEqual","Comma","Minus","Period","Slash","Backquote","BracketLeft","Backslash","BracketRight","Quote","AltGraph","Props","Cancel","Clear","Shift","Control","Alt","Accept","ModeChange","Print","Execute","c","d","f","g","h","j","l","q","r","u","w","Meta","Attn","CrSel","ExSel","EraseEof","Play","ZoomOut","$","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Camera","EndCall","VolumeDown","VolumeUp","keyUtils","getKeyLocation","getKeyCode","getNormalizedKey","ActionDispatcher_1","ActionDispatcher","USKeyboardLayout_js_1","keyUtils_js_1","CALCULATE_IN_VIEW_CENTER_PT_DECL","getClientRects","window","innerWidth","innerHeight","IS_MAC_DECL","navigator","platform","getOrCreateSandbox","callFunction","tickStart","tickDuration","inputState","isMacOS","optionsByTick","run","dispatchTickActions","performance","now","promises","setTimeout","dispatchAction","keyState","dispatchKeyDownAction","dispatchKeyUpAction","dispatchPointerDownAction","dispatchPointerMoveAction","dispatchPointerUpAction","dispatchScrollAction","Pen","cdpTarget","cdpClient","sendCommand","force","Touch","touchPoints","radiusX","radiusY","startX","startY","offsetX","offsetY","targetX","targetY","getCoordinateFromOrigin","last","ratio","round","posX","posY","getElementCenter","_source","targetDeltaX","targetDeltaY","currentDeltaX","currentDeltaY","rawKey","repeat","location","unmodifiedText","getKeyEventUnmodifiedText","text","getKeyEventText","command","windowsVirtualKeyCode","autoRepeat","isSystemKey","isKeypad","commands","toLocaleUpperCase","PreloadScriptStorage_1","PreloadScriptStorage","PreloadScriptStorage$1","scripts","findPreloadScripts","contextId","contextIds","targetId","targetIds","addPreloadScript","preloadScript","removeBiDiPreloadScripts","unitConversions","inchesFromCm","cm","deferred","Deferred","isFinished","reject","onFulfilled","onRejected","reason","finally","onFinally","toStringTag","uuidv4","globalThis","crypto","randomUUID","randomValues","Uint8Array","getRandomValues","require","webcrypto","bytesToHex","bytes","reduce","str","byte","padStart","subarray","channelProxy","ChannelProxy","uuid_1","properties","eventManager","channelHandle","createAndGetHandleInRealm","sendMessageHandle","createSendMessageHandle","startListener","getHandleFromWindow","queueNonEmptyResolver","onMessage","sendMessage","createChannelHandleResult","createChannelProxyEvalStr","executionContextId","serialization","exceptionDetails","objectId","getMessage","registerEvent","MessageEvent","cdpToBidiValue","realmId","browsingContextId","channelHandleResult","getEvalInWindowStr","delegate","channelProxyEval","ScriptEvaluator","SHARED_ID_DIVIDER","channelProxy_js_1","cdpObject","returnByValue","cdpRemoteObject","cdpRemoteObjectToCallArgument","cdpWebDriverValue","cdpEvaluateResult","serializeCdpExceptionDetails","_this","_arguments","callFunctionAndSerializeScript","thisAndArgumentsList","deserializeToCdpArg","cdpCallFunctionResult","unserializableValue","argumentValue","navigableId","rawBackendNodeId","backendNodeId","keyValueArray","flattenKeyValuePairs","flattenValueList","init","mapping","keyArg","valueArg","list","cdpExceptionDetails","lineOffset","callFrames","stackTrace","frame","functionName","lineNumber","columnNumber","exception","serializeCdpObject","stringifyObject","Realm","scriptEvaluator_js_1","realmStorage","browsingContextStorage","scriptEvaluator","cdpSessionId","addRealm","RealmCreated","toBiDi","knownHandlesToRealm","releaseObject","cdpValue","deepSerializedValue","bidiValue","deepSerializedToBiDi","webDriverValue","hasOwn","internalId","weakLocalObjectReference","children","findContext","getContext","awaitUnblocked","scriptEvaluate","RealmDestroyed","browsingContextImpl","BrowsingContextImpl","unitConversions_js_1","deferred_js_1","realm_js_1","parentId","deferreds","documentInitialized","Page","navigatedWithinDocument","lifecycleEvent","DOMContentLoaded","load","loaderId","maybeDefaultRealm","isNavigating","initListeners","addContext","addChild","ContextCreatedEvent","serializeToBidiValue","deleteAllChildren","deleteRealms","ContextDestroyedEvent","deleteContextById","directChildren","allChildren","concat","child","topContext","childId","defaultRealm","updateCdpTarget","targetUnblocked","maybeSandboxes","findRealms","frameId","worldName","addParentField","onTargetInfoChanged","targetInfo","NavigationStarted","navigation","timestamp","getTimestamp","urlFragment","FragmentNavigated","documentChanged","DomContentLoadedEvent","LoadEvent","auxData","uniqueId","getOrigin","isDefault","getChannels","startListenerFromWindow","resetDeferredsIfFinished","browsingContexts","cdpNavigateResult","errorText","awaitLoaded","deviceScaleFactor","mobile","dontSetVisibleSize","err","clip","cssContentSize","cssLayoutViewport","clientWidth","clientHeight","iframeDocRect","docRect","document","documentElement","getBoundingClientRect","cdpParams","printBackground","marginBottom","marginLeft","marginRight","marginTop","landscape","paperHeight","paperWidth","preferCSSPageSize","logHelper","getRemoteValuesText","logMessageFormatter","specifiers","isFormmatSpecifier","some","spec","output","argFormat","argValues","tokens","token","stringFromArg","parseFloat","toJson","formatText","logManager","LogManager","logHelper_js_1","getBidiStackTrace","cdpStackTrace","stackFrames","callFrame","initialize","initializeLogEntryAddedEventListener","findRealm","argsPromise","registerPromiseEvent","LogEntryAddedEvent","level","consoleApiType","textPromise","DefaultMap_1","DefaultMap","getDefaultValue","DefaultMap$1","networkRequest","NetworkRequest","requestId","servedFromCache","redirectCount","requestWillBeSentEvent","requestWillBeSentExtraInfoEvent","responseReceivedEvent","responseReceivedExtraInfoEvent","beforeRequestSentDeferred","responseReceivedDeferred","onRequestWillBeSentEvent","sendBeforeRequestEvent","onRequestWillBeSentExtraInfoEvent","onResponseReceivedEventExtraInfo","onResponseReceivedEvent","hasExtraInfo","sendResponseReceivedEvent","onServedFromCache","onLoadingFailedEvent","FetchErrorEvent","getBaseEventParams","getNavigationId","request","getRequestData","wallTime","cookies","getCookies","associatedCookies","headers","getHeaders","headersSize","bodySize","timings","timeOrigin","requestTime","redirectStart","redirectEnd","fetchStart","dnsStart","dnsEnd","connectStart","connectEnd","tlsStart","requestStart","responseStart","responseEnd","isIgnoredEvent","getBeforeRequestEvent","BeforeRequestSentEvent","initiator","getInitiatorType","getResponseReceivedEvent","ResponseCompletedEvent","response","fromDiskCache","protocol","statusCode","statusText","fromCache","fromPrefetchCache","mimeType","bytesReceived","encodedDataLength","computeResponseHeadersSize","content","total","header","initiatorType","cookieInfo","cookie","domain","expires","httpOnly","secure","sameSite","getCookiesSameSite","cdpSameSiteValue","networkProcessor","NetworkProcessor","DefaultMap_js_1","networkRequest_js_1","requestMap","getOrCreateNetworkRequest","CdpTarget","logManager_js_1","networkProcessor_js_1","parentTargetId","preloadScriptStorage","networkDomainActivated","setEventListeners","unblock","isNetworkDomainEnabled","enableNetworkDomain","enabled","autoAttach","waitForDebuggerOnStart","initAndEvaluatePreloadScripts","isCloseError","flatMap","channels","initInTarget","scheduleEvaluateInTarget","bidiPreloadScript","BidiPreloadScript","uuid_js_1","cdpPreloadScripts","cdpTargets","getEvaluateString","channelsArgStr","addCdpPreloadScriptResult","preloadScriptId","identifier","cdpPreloadScript","cdpPreloadScriptId","cdpTargetIsGone","cdpTargetId","browsingContextProcessor","BrowsingContextProcessor","InputStateManager_js_1","ActionDispatcher_js_1","PreloadScriptStorage_js_1","browsingContextImpl_js_1","cdpTarget_js_1","require$$6","bidiPreloadScript_1","require$$7","cdpConnection","selfTargetId","inputStateManager","browserClient","handleAttachedToTargetEvent","handleDetachedFromTargetEvent","handleTargetInfoChangedEvent","handleFrameAttachedEvent","handleFrameDetachedEvent","parentBrowsingContext","parentFrameId","parentSessionCdpClient","sessionId","targetCdpClient","getCdpClient","isValidTarget","maybeContext","getRealm","process_browsingContext_getTree","getTopLevelContexts","MAX_VALUE","browserCdpClient","newWindow","process_browsingContext_navigate","navigate","process_browsingContext_reload","reload","captureScreenshot","print","initInTargets","bidiId","remove","process_script_getRealms","realms","disown","actionsByTick","getActionsByTick","dispatcher","dispatchActions","setViewport","commandParams","detachedFromTargetPromise","onContextDestroyed","eventParams","client","process_cdp_getSession","OutgoingBidiMessage_1","OutgoingBidiMessage","messagePromise","OutgoingBidiMessage$1","CommandProcessor_1","CommandProcessor","EventEmitter_js_1","browsingContextProcessor_js_1","OutgoingBidiMessage_js_1","BidiNoOpParser","contextProcessor","parser","ready","subscribe","unsubscribe","commandData","process_session_status","process_session_subscribe","process_session_unsubscribe","process_browsingContext_create","process_browsingContext_close","process_browsingContext_captureScreenshot","process_browsingContext_print","process_browsingContext_setViewport","process_script_addPreloadScript","process_script_removePreloadScript","process_script_callFunction","process_script_evaluate","process_script_disown","process_input_performActions","process_input_releaseActions","process_cdp_sendCommand","processCommand","createResolved","errorResponse","bidi","CommandProcessor$1","BrowsingContextStorage","getAllContexts","deleteContext","hasContext","findTopLevelContextId","buffer","Buffer","capacity","onItemRemoved","idWrapper","IdWrapper","counter","SubscriptionManager_1","SubscriptionManager","unrollEvents","cartesianProduct","flat","allEvents","addEvents","SubscriptionManager$1","subscriptionPriority","channelToContextToEventMap","getChannelsSubscribedToEvent","eventMethod","priority","getEventSubscriptionPriorityForChannel","sort","contextToEventMap","maybeTopLevelContextId","priorities","specificEvent","eventMap","unsubscribeAll","checkUnsubscribe","eventName","EventManager_1","EventManager","buffer_js_1","idWrapper_js_1","SubscriptionManager_js_1","EventWrapper","eventBufferLength","eventToContextsMap","eventBuffers","lastMessageSent","subscriptionManager","bidiServer","getBrowsingContextStorage","browsingContext","eventWrapper","sortedChannels","bufferEvent","emitOutgoingMessage","createFromPromise","markEventSent","eventNames","handleDomains","getBufferedEvents","NETWORK_DOMAIN_PREFIX","bufferMapKey","getMapKey","lastSentMapKey","lastSentMessageId","Infinity","wrapper","_contextId","e1","e2","EventManager$1","RealmStorage","realmMap","maybeRealms","maybeRealm","BidiServer_1","BidiServer","processingQueue_js_1","CommandProcessor_js_1","browsingContextStorage_js_1","EventManager_js_1","realmStorage_js_1","messageQueue","transport","commandProcessor","handleIncomingMessage","processOutgoingMessage","messageEntry","bidiTransport","setOnMessage","server","discover","topLevelContextsLoaded","close","BidiServer$1","BidiServer_js_1","CdpClient","CloseError","CdpConnection","cdpClient_js_1","sessionCdpClients","commandCallbacks","nextId","clear","cdpMessage","cdpMessageStr","cdp","messageParsed","messagePretty","callbacks","mapperTabPage","log","generatePage","findOrCreateTypeLogContainer","logType","containerId","existingContainer","getElementById","debugElement","divider","createElement","className","appendChild","htmlItem","innerHTML","messages","global","sendDebugMessage","typeLogContainer","lineElement","textContent","desc","getOwnPropertyDescriptor","writable","configurable","bidiTab","Parser","protocol_1","bidiMapper_js_1","cdpConnection_js_1","mapperTabPage_js_1","waitSelfTargetIdPromise","setSelfTargetId","waitSelfTargetId","WindowBidiTransport","onBidiMessage","messageStr","messageObject","parseBidiMessage","respondWithError","sendBidiResponse","plainCommandData","errorCode","getErrorResponse","messageId","messageObj","getJsonType","idType","methodType","paramsType","channelType","createAndStart","WindowCdpTransport","onmessage","send","createCdpConnection","BidiParserImpl","createBidiServer","launched"],"mappings":"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,SACD,MAAO,IACX,IAAK,SACD,MAAO,IACX,IAAK,SACD,MAAO,IACX,IAAK,SACD,MAAO,IACX,IAAK,SACD,MAAO,IACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,MACX,IAAK,SACD,MAAO,MACX,IAAK,SACD,MAAO,MACX,IAAK,SAUL,IAAK,SACD,MAAO,OATX,IAAK,SACD,MAAO,iBA6BX,QACI,OAAOA,EAEnB,EAyQkBmlC,EAAAE,WAvQlB,SAAoB3jC,GAChB,OAAQA,GACJ,IAAK,IACL,IAAK,IACD,MAAO,YACX,IAAK,KACL,IAAK,IACD,MAAO,YACX,IAAK,SACD,MAAO,YACX,IAAK,IACL,IAAK,IACD,MAAO,cACX,IAAK,IACL,IAAK,IACD,MAAO,eACX,IAAK,IACL,IAAK,IACD,MAAO,QACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,QACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,OACX,IAAK,IACL,IAAK,IACD,MAAO,QACX,IAAK,IACD,MAAO,SACX,IAAK,IACL,IAAK,IACD,MAAO,QACX,IAAK,IACL,IAAK,IACD,MAAO,YACX,IAAK,IACL,IAAK,IACD,MAAO,QACX,IAAK,SACD,MAAO,UACX,IAAK,SACD,MAAO,WACX,IAAK,SACD,MAAO,cACX,IAAK,SACD,MAAO,eACX,IAAK,SACD,MAAO,QACX,IAAK,SACD,MAAO,WACX,IAAK,SACD,MAAO,YACX,IAAK,SACD,MAAO,YACX,IAAK,SACD,MAAO,aACX,IAAK,IACL,IAAK,SACD,MAAO,QACX,IAAK,SACD,MAAO,MACX,IAAK,SACD,MAAO,SACX,IAAK,SACD,MAAO,MACX,IAAK,SACD,MAAO,OACX,IAAK,SACD,MAAO,OACX,IAAK,SACD,MAAO,SACX,IAAK,SACD,MAAO,WACX,IAAK,SACD,MAAO,SACX,IAAK,SACD,MAAO,YACX,IAAK,SACD,MAAO,YACX,IAAK,SACD,MAAO,aACX,IAAK,SACD,MAAO,UACX,IAAK,SACD,MAAO,SACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,KACX,IAAK,SACD,MAAO,K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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,13]}