{"version":3,"names":["StyleSheet","TouchableOpacity","Text","View","Platform","LongPressGestureHandler","State","Children","cloneElement","useCallback","usePreferredColorScheme","usePreferredColorSchemeStyle","Tooltip","Icon","style","isAndroid","OS","marginBottom","marginLeft","styles","create","container","flex","padding","justifyContent","alignItems","buttonInactive","flexDirection","fixedRatio","aspectRatio","buttonActive","borderRadius","subscriptInactive","color","fontWeight","fontSize","alignSelf","subscriptInactiveDark","subscriptActive","Button","props","children","onClick","onLongPress","disabled","hint","isPressed","ariaDisabled","subscript","testID","icon","iconSize","showTooltip","label","shortcut","tooltipPosition","isActiveStyle","customContainerStyles","hitSlop","preferredColorScheme","isDisabled","containerStyle","buttonActiveColorStyles","buttonViewStyle","opacity","backgroundColor","states","push","newChildren","map","child","colorScheme","shouldShowTooltip","Array","isArray","length","newIcon","createElement","size","longPressHandler","nativeEvent","state","ACTIVE","element","activeOpacity","accessible","accessibilityLabel","accessibilityStates","accessibilityRole","accessibilityHint","onPress","minDurationMs","maxDist","onHandlerStateChange","text","position","visible"],"sources":["@wordpress/components/src/button/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tStyleSheet,\n\tTouchableOpacity,\n\tText,\n\tView,\n\tPlatform,\n} from 'react-native';\nimport { LongPressGestureHandler, State } from 'react-native-gesture-handler';\n\n/**\n * WordPress dependencies\n */\nimport { Children, cloneElement, useCallback } from '@wordpress/element';\nimport {\n\tusePreferredColorScheme,\n\tusePreferredColorSchemeStyle,\n} from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport Tooltip from '../tooltip';\nimport Icon from '../icon';\nimport style from './style.scss';\n\nconst isAndroid = Platform.OS === 'android';\nconst marginBottom = isAndroid ? -0.5 : 0;\nconst marginLeft = -3;\n\nconst styles = StyleSheet.create( {\n\tcontainer: {\n\t\tflex: 1,\n\t\tpadding: 3,\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t},\n\tbuttonInactive: {\n\t\tflex: 1,\n\t\tflexDirection: 'row',\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t},\n\tfixedRatio: {\n\t\taspectRatio: 1,\n\t},\n\tbuttonActive: {\n\t\tflex: 1,\n\t\tflexDirection: 'row',\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t\tborderRadius: 6,\n\t},\n\tsubscriptInactive: {\n\t\tcolor: '#7b9ab1', // $toolbar-button.\n\t\tfontWeight: 'bold',\n\t\tfontSize: 13,\n\t\talignSelf: 'flex-end',\n\t\tmarginLeft,\n\t\tmarginBottom,\n\t},\n\tsubscriptInactiveDark: {\n\t\tcolor: '#a7aaad', // $gray_20.\n\t},\n\tsubscriptActive: {\n\t\tcolor: 'white',\n\t\tfontWeight: 'bold',\n\t\tfontSize: 13,\n\t\talignSelf: 'flex-end',\n\t\tmarginLeft,\n\t\tmarginBottom,\n\t},\n} );\n\nexport function Button( props ) {\n\tconst {\n\t\tchildren,\n\t\tonClick,\n\t\tonLongPress,\n\t\tdisabled,\n\t\thint,\n\t\tfixedRatio = true,\n\t\tisPressed,\n\t\t'aria-disabled': ariaDisabled,\n\t\t'data-subscript': subscript,\n\t\ttestID,\n\t\ticon,\n\t\ticonSize,\n\t\tshowTooltip,\n\t\tlabel,\n\t\tshortcut,\n\t\ttooltipPosition,\n\t\tisActiveStyle,\n\t\tcustomContainerStyles,\n\t\thitSlop,\n\t} = props;\n\tconst preferredColorScheme = usePreferredColorScheme();\n\n\tconst isDisabled = ariaDisabled || disabled;\n\n\tconst containerStyle = [\n\t\tstyles.container,\n\t\tcustomContainerStyles && { ...customContainerStyles },\n\t];\n\n\tconst buttonActiveColorStyles = usePreferredColorSchemeStyle(\n\t\tstyle[ 'components-button-light--active' ],\n\t\tstyle[ 'components-button-dark--active' ]\n\t);\n\n\tconst buttonViewStyle = {\n\t\topacity: isDisabled ? 0.3 : 1,\n\t\t...( fixedRatio && styles.fixedRatio ),\n\t\t...( isPressed ? styles.buttonActive : styles.buttonInactive ),\n\t\t...( isPressed ? buttonActiveColorStyles : {} ),\n\t\t...( isPressed &&\n\t\t\tisActiveStyle?.borderRadius && {\n\t\t\t\tborderRadius: isActiveStyle.borderRadius,\n\t\t\t} ),\n\t\t...( isActiveStyle?.backgroundColor && {\n\t\t\tbackgroundColor: isActiveStyle.backgroundColor,\n\t\t} ),\n\t};\n\n\tconst states = [];\n\tif ( isPressed ) {\n\t\tstates.push( 'selected' );\n\t}\n\n\tif ( isDisabled ) {\n\t\tstates.push( 'disabled' );\n\t}\n\n\tconst subscriptInactive = usePreferredColorSchemeStyle(\n\t\tstyles.subscriptInactive,\n\t\tstyles.subscriptInactiveDark\n\t);\n\n\tconst newChildren = Children.map( children, ( child ) => {\n\t\treturn child\n\t\t\t? cloneElement( child, {\n\t\t\t\t\tcolorScheme: preferredColorScheme,\n\t\t\t\t\tisPressed,\n\t\t\t  } )\n\t\t\t: child;\n\t} );\n\n\t// Should show the tooltip if...\n\tconst shouldShowTooltip =\n\t\t! isDisabled &&\n\t\t// An explicit tooltip is passed or...\n\t\t( ( showTooltip && label ) ||\n\t\t\t// There's a shortcut or...\n\t\t\tshortcut ||\n\t\t\t// There's a label and...\n\t\t\t( !! label &&\n\t\t\t\t// The children are empty and...\n\t\t\t\t( ! children ||\n\t\t\t\t\t( Array.isArray( children ) && ! children.length ) ) &&\n\t\t\t\t// The tooltip is not explicitly disabled.\n\t\t\t\tfalse !== showTooltip ) );\n\n\tconst newIcon = icon\n\t\t? cloneElement( <Icon icon={ icon } size={ iconSize } />, {\n\t\t\t\tisPressed,\n\t\t  } )\n\t\t: null;\n\n\tconst longPressHandler = useCallback(\n\t\t( { nativeEvent } ) => {\n\t\t\tif ( nativeEvent.state === State.ACTIVE && onLongPress ) {\n\t\t\t\tonLongPress();\n\t\t\t}\n\t\t},\n\t\t[ onLongPress ]\n\t);\n\n\tconst element = (\n\t\t<TouchableOpacity\n\t\t\tactiveOpacity={ 0.7 }\n\t\t\taccessible={ true }\n\t\t\taccessibilityLabel={ label }\n\t\t\taccessibilityStates={ states }\n\t\t\taccessibilityRole={ 'button' }\n\t\t\taccessibilityHint={ hint }\n\t\t\tonPress={ onClick }\n\t\t\tstyle={ containerStyle }\n\t\t\tdisabled={ isDisabled }\n\t\t\ttestID={ testID }\n\t\t\thitSlop={ hitSlop }\n\t\t>\n\t\t\t<LongPressGestureHandler\n\t\t\t\tminDurationMs={ 500 }\n\t\t\t\tmaxDist={ 150 }\n\t\t\t\tonHandlerStateChange={ longPressHandler }\n\t\t\t>\n\t\t\t\t<View style={ buttonViewStyle }>\n\t\t\t\t\t<View style={ { flexDirection: 'row' } }>\n\t\t\t\t\t\t{ newIcon }\n\t\t\t\t\t\t{ newChildren }\n\t\t\t\t\t\t{ subscript && (\n\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\tisPressed\n\t\t\t\t\t\t\t\t\t\t? styles.subscriptActive\n\t\t\t\t\t\t\t\t\t\t: subscriptInactive\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ subscript }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t</LongPressGestureHandler>\n\t\t</TouchableOpacity>\n\t);\n\n\tif ( ! shouldShowTooltip ) {\n\t\treturn element;\n\t}\n\n\treturn (\n\t\t<Tooltip\n\t\t\ttext={ label }\n\t\t\tshortcut={ shortcut }\n\t\t\tposition={ tooltipPosition }\n\t\t\tvisible={ showTooltip === true }\n\t\t>\n\t\t\t{ element }\n\t\t</Tooltip>\n\t);\n}\n\nexport default Button;\n"],"mappings":"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"}