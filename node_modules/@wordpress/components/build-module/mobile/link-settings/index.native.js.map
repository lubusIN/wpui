{"version":3,"names":["Platform","Clipboard","compose","withSelect","isURL","prependHTTP","useEffect","useState","useRef","useContext","useCallback","link","external","BottomSheet","BottomSheetContext","PanelBody","TextControl","ToggleControl","FooterMessageControl","PanelActions","LinkRelIcon","styles","NEW_TAB_REL","LinkSettings","isVisible","onClose","setAttributes","onEmptyURL","options","withBottomSheet","actions","editorSidebarOpened","showIcon","onLinkCellPressed","urlValue","url","label","linkTarget","rel","urlInputValue","setUrlInputValue","labelInputValue","setLabelInputValue","linkRelInputValue","setLinkRelInputValue","onCloseSettingsSheetConsumed","prevEditorSidebarOpenedRef","onHandleClosingBottomSheet","onCloseSettingsSheet","current","prevEditorSidebarOpened","isSettingSheetOpen","autoFill","getURLFromClipboard","onSetAttributes","onChangeURL","value","onChangeLabel","newURL","onChangeOpenInNewTab","newLinkTarget","undefined","updatedRel","onChangeLinkRel","clipboardText","getString","getSettings","createElement","Fragment","LinkCell","valueMask","onPress","icon","valuePlaceholder","placeholder","onChange","onSubmit","autoCapitalize","autoCorrect","autoFocus","OS","keyboardType","linkLabel","openInNewTab","checked","linkRel","style","linkSettingsPanel","footer","separatorType","select","isEditorSidebarOpened"],"sources":["@wordpress/components/src/mobile/link-settings/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Platform } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { isURL, prependHTTP } from '@wordpress/url';\nimport {\n\tuseEffect,\n\tuseState,\n\tuseRef,\n\tuseContext,\n\tuseCallback,\n} from '@wordpress/element';\nimport { link, external } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BottomSheet from '../bottom-sheet';\nimport { BottomSheetContext } from '../bottom-sheet/bottom-sheet-context';\nimport PanelBody from '../../panel/body';\nimport TextControl from '../../text-control';\nimport ToggleControl from '../../toggle-control';\nimport FooterMessageControl from '../../footer-message-control';\nimport PanelActions from '../../panel/actions';\nimport LinkRelIcon from './link-rel';\n\nimport styles from './style.scss';\n\nconst NEW_TAB_REL = 'noreferrer noopener';\nfunction LinkSettings( {\n\t// Control link settings `BottomSheet` visibility\n\tisVisible,\n\t// Callback that is called on closing bottom sheet\n\tonClose,\n\t// Function called to set attributes\n\tsetAttributes,\n\t// Callback that is called when url input field is empty\n\tonEmptyURL,\n\t// Object of available options along with specific, customizable properties.\n\t// Available options keys:\n\t//\t* url - uses `TextControl` component to set `attributes.url`\n\t//\t* linkLabel - uses `TextControl` component to set `attributes.label`\n\t//\t* openInNewTab - uses `ToggleControl` component to set `attributes.linkTarget` and `attributes.rel`\n\t//\t* linkRel - uses `TextControl` component to set `attributes.rel`\n\t//\t* footer - uses `FooterMessageControl` component to display message, e.g. about missing functionality\n\t// Available properties:\n\t//\t* label - control component label, e.g. `Button Link URL`\n\t//\t* placeholder - control component placeholder, e.g. `Add URL`\n\t//\t* autoFocus (url only) - whether url input should be focused on sheet opening\n\t//\t* autoFill (url only) - whether url input should be filled with url from clipboard\n\t// Example:\n\t//\tconst options = {\n\t//\t\turl: {\n\t//\t\t\tlabel: __( 'Button Link URL' ),\n\t//\t\t\tplaceholder: __( 'Add URL' ),\n\t//\t\t\tautoFocus: true,\n\t//\t\t\tautoFill: true,\n\t//\t\t}\n\t//\t}\n\toptions,\n\t// Specifies whether settings should be wrapped into `BottomSheet`\n\twithBottomSheet,\n\t// Defines buttons which will be displayed below the all options.\n\t// It's an array of objects with following properties:\n\t//\t* label - button title\n\t//\t* onPress - callback that is called on pressing button\n\t// Example:\n\t// \tconst actions = [\n\t//\t\t{\n\t//\t\t\tlabel: __( 'Remove link' ),\n\t//\t\t\tonPress: () => setAttributes({ url: '' }),\n\t//\t\t},\n\t//\t];\n\tactions,\n\t// Specifies whether general `BottomSheet` is opened\n\teditorSidebarOpened,\n\t// Specifies whether icon should be displayed next to the label\n\tshowIcon,\n\tonLinkCellPressed,\n\turlValue,\n\t// Attributes properties\n\turl,\n\tlabel = '',\n\tlinkTarget,\n\trel = '',\n} ) {\n\tconst [ urlInputValue, setUrlInputValue ] = useState( '' );\n\tconst [ labelInputValue, setLabelInputValue ] = useState( '' );\n\tconst [ linkRelInputValue, setLinkRelInputValue ] = useState( '' );\n\tconst onCloseSettingsSheetConsumed = useRef( false );\n\tconst prevEditorSidebarOpenedRef = useRef();\n\n\tconst { onHandleClosingBottomSheet } = useContext( BottomSheetContext );\n\tuseEffect( () => {\n\t\tif ( onHandleClosingBottomSheet ) {\n\t\t\tonHandleClosingBottomSheet( onCloseSettingsSheet );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ urlInputValue, labelInputValue, linkRelInputValue ] );\n\n\tuseEffect( () => {\n\t\tprevEditorSidebarOpenedRef.current = editorSidebarOpened;\n\t} );\n\tconst prevEditorSidebarOpened = prevEditorSidebarOpenedRef.current;\n\n\tuseEffect( () => {\n\t\tif ( url !== urlInputValue ) {\n\t\t\tsetUrlInputValue( url || '' );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ url ] );\n\n\tuseEffect( () => {\n\t\tsetLabelInputValue( label || '' );\n\t}, [ label ] );\n\n\tuseEffect( () => {\n\t\tsetLinkRelInputValue( rel || '' );\n\t}, [ rel ] );\n\n\tuseEffect( () => {\n\t\tconst isSettingSheetOpen = isVisible || editorSidebarOpened;\n\t\tif ( isSettingSheetOpen ) {\n\t\t\tonCloseSettingsSheetConsumed.current = false;\n\t\t}\n\n\t\tif ( options.url.autoFill && isSettingSheetOpen && ! url ) {\n\t\t\tgetURLFromClipboard();\n\t\t}\n\n\t\tif ( prevEditorSidebarOpened && ! editorSidebarOpened ) {\n\t\t\tonSetAttributes();\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ editorSidebarOpened, isVisible ] );\n\n\tuseEffect( () => {\n\t\tif ( ! urlValue && onEmptyURL ) {\n\t\t\tonEmptyURL();\n\t\t}\n\n\t\tif ( prependHTTP( urlValue ) !== url ) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: prependHTTP( urlValue ),\n\t\t\t} );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ urlValue ] );\n\n\tconst onChangeURL = useCallback(\n\t\t( value ) => {\n\t\t\tif ( ! value && onEmptyURL ) {\n\t\t\t\tonEmptyURL();\n\t\t\t}\n\t\t\tsetUrlInputValue( value );\n\t\t},\n\t\t[ onEmptyURL ]\n\t);\n\n\tconst onChangeLabel = useCallback( ( value ) => {\n\t\tsetLabelInputValue( value );\n\t}, [] );\n\n\tconst onSetAttributes = useCallback( () => {\n\t\tconst newURL = prependHTTP( urlInputValue );\n\t\tif (\n\t\t\turl !== newURL ||\n\t\t\tlabelInputValue !== label ||\n\t\t\tlinkRelInputValue !== rel\n\t\t) {\n\t\t\tsetAttributes( {\n\t\t\t\turl: newURL,\n\t\t\t\tlabel: labelInputValue,\n\t\t\t\trel: linkRelInputValue,\n\t\t\t} );\n\t\t}\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ urlInputValue, labelInputValue, linkRelInputValue, setAttributes ] );\n\n\tconst onCloseSettingsSheet = useCallback( () => {\n\t\tif ( onCloseSettingsSheetConsumed.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tonCloseSettingsSheetConsumed.current = true;\n\n\t\tonSetAttributes();\n\n\t\tif ( onClose ) {\n\t\t\tonClose();\n\t\t}\n\t}, [ onClose, onSetAttributes ] );\n\n\tconst onChangeOpenInNewTab = useCallback(\n\t\t( value ) => {\n\t\t\tconst newLinkTarget = value ? '_blank' : undefined;\n\n\t\t\tlet updatedRel = linkRelInputValue;\n\t\t\tif ( newLinkTarget && ! linkRelInputValue ) {\n\t\t\t\tupdatedRel = NEW_TAB_REL;\n\t\t\t} else if ( ! newLinkTarget && linkRelInputValue === NEW_TAB_REL ) {\n\t\t\t\tupdatedRel = undefined;\n\t\t\t}\n\n\t\t\tsetAttributes( {\n\t\t\t\tlinkTarget: newLinkTarget,\n\t\t\t\trel: updatedRel,\n\t\t\t} );\n\t\t},\n\t\t// Disable reason: deferring this refactor to the native team.\n\t\t// see https://github.com/WordPress/gutenberg/pull/41166\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[ linkRelInputValue ]\n\t);\n\n\tconst onChangeLinkRel = useCallback( ( value ) => {\n\t\tsetLinkRelInputValue( value );\n\t}, [] );\n\n\tasync function getURLFromClipboard() {\n\t\tconst clipboardText = await Clipboard.getString();\n\n\t\tif ( ! clipboardText ) {\n\t\t\treturn;\n\t\t}\n\t\t// Check if pasted text is URL.\n\t\tif ( ! isURL( clipboardText ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetAttributes( { url: clipboardText } );\n\t}\n\n\tfunction getSettings() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ options.url &&\n\t\t\t\t\t( onLinkCellPressed ? (\n\t\t\t\t\t\t<BottomSheet.LinkCell\n\t\t\t\t\t\t\tshowIcon={ showIcon }\n\t\t\t\t\t\t\tvalue={ url }\n\t\t\t\t\t\t\tvalueMask={ options.url.valueMask }\n\t\t\t\t\t\t\tonPress={ onLinkCellPressed }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ticon={ showIcon && link }\n\t\t\t\t\t\t\tlabel={ options.url.label }\n\t\t\t\t\t\t\tvalue={ urlInputValue }\n\t\t\t\t\t\t\tvaluePlaceholder={ options.url.placeholder }\n\t\t\t\t\t\t\tonChange={ onChangeURL }\n\t\t\t\t\t\t\tonSubmit={ onCloseSettingsSheet }\n\t\t\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-autofocus\n\t\t\t\t\t\t\tautoFocus={\n\t\t\t\t\t\t\t\tPlatform.OS === 'ios' && options.url.autoFocus\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkeyboardType=\"url\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t{ options.linkLabel && (\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ options.linkLabel.label }\n\t\t\t\t\t\tvalue={ labelInputValue }\n\t\t\t\t\t\tvaluePlaceholder={ options.linkLabel.placeholder }\n\t\t\t\t\t\tonChange={ onChangeLabel }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ !! urlInputValue && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ options.openInNewTab && (\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\ticon={ showIcon && external }\n\t\t\t\t\t\t\t\tlabel={ options.openInNewTab.label }\n\t\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t\t\tonChange={ onChangeOpenInNewTab }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ options.linkRel && (\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\ticon={ showIcon && LinkRelIcon }\n\t\t\t\t\t\t\t\tlabel={ options.linkRel.label }\n\t\t\t\t\t\t\t\tvalue={ linkRelInputValue }\n\t\t\t\t\t\t\t\tvaluePlaceholder={ options.linkRel.placeholder }\n\t\t\t\t\t\t\t\tonChange={ onChangeLinkRel }\n\t\t\t\t\t\t\t\tonSubmit={ onCloseSettingsSheet }\n\t\t\t\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\t\t\t\tkeyboardType=\"default\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}\n\n\tif ( ! withBottomSheet ) {\n\t\treturn getSettings();\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PanelBody style={ styles.linkSettingsPanel }>\n\t\t\t\t{ getSettings() }\n\t\t\t</PanelBody>\n\t\t\t{ options.footer && (\n\t\t\t\t<PanelBody style={ styles.linkSettingsPanel }>\n\t\t\t\t\t<FooterMessageControl\n\t\t\t\t\t\tlabel={ options.footer.label }\n\t\t\t\t\t\tseparatorType={ options.footer.separatorType }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t) }\n\t\t\t{ actions && <PanelActions actions={ actions } /> }\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\treturn {\n\t\t\teditorSidebarOpened: isEditorSidebarOpened(),\n\t\t};\n\t} ),\n] )( LinkSettings );\n"],"mappings":"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"}