{"version":3,"names":["_element","require","_reactNative","_clipboard","_interopRequireDefault","_i18n","_components","_url","_icons","_compose","_linkPickerResults","_navBar","_styles","createDirectEntry","value","type","protocol","getProtocol","toLowerCase","includes","startsWith","isDirectEntry","title","url","prependHTTP","exports","getURLFromClipboard","text","Clipboard","getString","isURL","LinkPicker","initialValue","onLinkPicked","onCancel","cancel","setValue","useState","clipboardUrl","setClipboardUrl","directEntry","pickLink","onSubmit","clear","omniCellStyle","usePreferredColorSchemeStyle","styles","omniCell","omniCellDark","iconStyle","icon","iconDark","useEffect","then","catch","createElement","SafeAreaView","style","safeArea","default","DismissButton","onPress","Heading","__","ApplyButton","View","contentContainer","BottomSheet","Cell","link","valueStyle","omniInput","placeholder","autoCapitalize","autoCorrect","keyboardType","onChangeValue","autoFocus","separatorType","TouchableOpacity","clearIcon","Icon","cancelCircleFilled","fill","color","size","LinkSuggestionItemCell","accessible","accessibilityLabel","sprintf","suggestion","query"],"sources":["@wordpress/components/src/mobile/link-picker/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { SafeAreaView, TouchableOpacity, View } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { BottomSheet, Icon } from '@wordpress/components';\nimport { getProtocol, isURL, prependHTTP } from '@wordpress/url';\nimport { link, cancelCircleFilled } from '@wordpress/icons';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport LinkPickerResults from './link-picker-results';\nimport NavBar from '../bottom-sheet/nav-bar';\nimport styles from './styles.scss';\n\n// This creates a search suggestion for adding a url directly.\nexport const createDirectEntry = ( value ) => {\n\tlet type = 'URL';\n\n\tconst protocol = getProtocol( value )?.toLowerCase() || '';\n\n\tif ( protocol.includes( 'mailto' ) ) {\n\t\ttype = 'mailto';\n\t}\n\n\tif ( protocol.includes( 'tel' ) ) {\n\t\ttype = 'tel';\n\t}\n\n\tif ( value?.startsWith( '#' ) ) {\n\t\ttype = 'internal';\n\t}\n\n\treturn {\n\t\tisDirectEntry: true,\n\t\ttitle: value,\n\t\turl: type === 'URL' ? prependHTTP( value ) : value,\n\t\ttype,\n\t};\n};\n\nconst getURLFromClipboard = async () => {\n\tconst text = await Clipboard.getString();\n\treturn !! text && isURL( text ) ? text : '';\n};\n\nexport const LinkPicker = ( {\n\tvalue: initialValue,\n\tonLinkPicked,\n\tonCancel: cancel,\n} ) => {\n\tconst [ value, setValue ] = useState( initialValue );\n\tconst [ clipboardUrl, setClipboardUrl ] = useState( '' );\n\tconst directEntry = createDirectEntry( value );\n\n\t// The title of a direct entry is displayed as the raw input value, but if we\n\t// are replacing empty text, we want to use the generated url.\n\tconst pickLink = ( { title, url, isDirectEntry } ) => {\n\t\tonLinkPicked( { title: isDirectEntry ? url : title, url } );\n\t};\n\n\tconst onSubmit = () => {\n\t\tpickLink( directEntry );\n\t};\n\n\tconst clear = () => {\n\t\tsetValue( '' );\n\t\tsetClipboardUrl( '' );\n\t};\n\n\tconst omniCellStyle = usePreferredColorSchemeStyle(\n\t\tstyles.omniCell,\n\t\tstyles.omniCellDark\n\t);\n\n\tconst iconStyle = usePreferredColorSchemeStyle(\n\t\tstyles.icon,\n\t\tstyles.iconDark\n\t);\n\n\tuseEffect( () => {\n\t\tgetURLFromClipboard()\n\t\t\t.then( setClipboardUrl )\n\t\t\t.catch( () => setClipboardUrl( '' ) );\n\t}, [] );\n\n\t// TODO: Localize the accessibility label.\n\t// TODO: Decide on if `LinkSuggestionItemCell` with `isDirectEntry` makes sense.\n\treturn (\n\t\t<SafeAreaView style={ styles.safeArea }>\n\t\t\t<NavBar>\n\t\t\t\t<NavBar.DismissButton onPress={ cancel } />\n\t\t\t\t<NavBar.Heading>{ __( 'Link to' ) }</NavBar.Heading>\n\t\t\t\t<NavBar.ApplyButton onPress={ onSubmit } />\n\t\t\t</NavBar>\n\t\t\t<View style={ styles.contentContainer }>\n\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\ticon={ link }\n\t\t\t\t\tstyle={ omniCellStyle }\n\t\t\t\t\tvalueStyle={ styles.omniInput }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tplaceholder={ __( 'Search or type URL' ) }\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\tautoCorrect={ false }\n\t\t\t\t\tkeyboardType=\"url\"\n\t\t\t\t\tonChangeValue={ setValue }\n\t\t\t\t\tonSubmit={ onSubmit }\n\t\t\t\t\t/* eslint-disable-next-line jsx-a11y/no-autofocus */\n\t\t\t\t\tautoFocus\n\t\t\t\t\tseparatorType=\"none\"\n\t\t\t\t>\n\t\t\t\t\t{ value !== '' && (\n\t\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\t\tonPress={ clear }\n\t\t\t\t\t\t\tstyle={ styles.clearIcon }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ cancelCircleFilled }\n\t\t\t\t\t\t\t\tfill={ iconStyle.color }\n\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t\t) }\n\t\t\t\t</BottomSheet.Cell>\n\t\t\t\t{ !! clipboardUrl && clipboardUrl !== value && (\n\t\t\t\t\t<BottomSheet.LinkSuggestionItemCell\n\t\t\t\t\t\taccessible\n\t\t\t\t\t\taccessibilityLabel={ sprintf(\n\t\t\t\t\t\t\t/* translators: Copy URL from the clipboard, https://sample.url */\n\t\t\t\t\t\t\t__( 'Copy URL from the clipboard, %s' ),\n\t\t\t\t\t\t\tclipboardUrl\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tsuggestion={ {\n\t\t\t\t\t\t\ttype: 'clipboard',\n\t\t\t\t\t\t\turl: clipboardUrl,\n\t\t\t\t\t\t\tisDirectEntry: true,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonLinkPicked={ pickLink }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ !! value && (\n\t\t\t\t\t<LinkPickerResults\n\t\t\t\t\t\tquery={ value }\n\t\t\t\t\t\tonLinkPicked={ pickLink }\n\t\t\t\t\t\tdirectEntry={ directEntry }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t</SafeAreaView>\n\t);\n};\n"],"mappings":"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"}