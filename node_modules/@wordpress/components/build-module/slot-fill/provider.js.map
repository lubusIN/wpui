{"version":3,"names":["Component","SlotFillContext","SlotFillProvider","constructor","arguments","registerSlot","bind","registerFill","unregisterSlot","unregisterFill","getSlot","getFills","subscribe","slots","fills","listeners","contextValue","name","slot","previousSlot","triggerListeners","forceUpdateSlot","forceUpdate","instance","_this$fills$name$filt","filter","fill","slotInstance","forEach","listener","push","l","render","createElement","Provider","value","props","children"],"sources":["@wordpress/components/src/slot-fill/provider.js"],"sourcesContent":["// @ts-nocheck\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport SlotFillContext from './context';\n\nexport default class SlotFillProvider extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.registerSlot = this.registerSlot.bind( this );\n\t\tthis.registerFill = this.registerFill.bind( this );\n\t\tthis.unregisterSlot = this.unregisterSlot.bind( this );\n\t\tthis.unregisterFill = this.unregisterFill.bind( this );\n\t\tthis.getSlot = this.getSlot.bind( this );\n\t\tthis.getFills = this.getFills.bind( this );\n\t\tthis.subscribe = this.subscribe.bind( this );\n\n\t\tthis.slots = {};\n\t\tthis.fills = {};\n\t\tthis.listeners = [];\n\t\tthis.contextValue = {\n\t\t\tregisterSlot: this.registerSlot,\n\t\t\tunregisterSlot: this.unregisterSlot,\n\t\t\tregisterFill: this.registerFill,\n\t\t\tunregisterFill: this.unregisterFill,\n\t\t\tgetSlot: this.getSlot,\n\t\t\tgetFills: this.getFills,\n\t\t\tsubscribe: this.subscribe,\n\t\t};\n\t}\n\n\tregisterSlot( name, slot ) {\n\t\tconst previousSlot = this.slots[ name ];\n\t\tthis.slots[ name ] = slot;\n\t\tthis.triggerListeners();\n\n\t\t// Sometimes the fills are registered after the initial render of slot\n\t\t// But before the registerSlot call, we need to rerender the slot.\n\t\tthis.forceUpdateSlot( name );\n\n\t\t// If a new instance of a slot is being mounted while another with the\n\t\t// same name exists, force its update _after_ the new slot has been\n\t\t// assigned into the instance, such that its own rendering of children\n\t\t// will be empty (the new Slot will subsume all fills for this name).\n\t\tif ( previousSlot ) {\n\t\t\tpreviousSlot.forceUpdate();\n\t\t}\n\t}\n\n\tregisterFill( name, instance ) {\n\t\tthis.fills[ name ] = [ ...( this.fills[ name ] || [] ), instance ];\n\t\tthis.forceUpdateSlot( name );\n\t}\n\n\tunregisterSlot( name, instance ) {\n\t\t// If a previous instance of a Slot by this name unmounts, do nothing,\n\t\t// as the slot and its fills should only be removed for the current\n\t\t// known instance.\n\t\tif ( this.slots[ name ] !== instance ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdelete this.slots[ name ];\n\t\tthis.triggerListeners();\n\t}\n\n\tunregisterFill( name, instance ) {\n\t\tthis.fills[ name ] =\n\t\t\tthis.fills[ name ]?.filter( ( fill ) => fill !== instance ) ?? [];\n\t\tthis.forceUpdateSlot( name );\n\t}\n\n\tgetSlot( name ) {\n\t\treturn this.slots[ name ];\n\t}\n\n\tgetFills( name, slotInstance ) {\n\t\t// Fills should only be returned for the current instance of the slot\n\t\t// in which they occupy.\n\t\tif ( this.slots[ name ] !== slotInstance ) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this.fills[ name ];\n\t}\n\n\tforceUpdateSlot( name ) {\n\t\tconst slot = this.getSlot( name );\n\n\t\tif ( slot ) {\n\t\t\tslot.forceUpdate();\n\t\t}\n\t}\n\n\ttriggerListeners() {\n\t\tthis.listeners.forEach( ( listener ) => listener() );\n\t}\n\n\tsubscribe( listener ) {\n\t\tthis.listeners.push( listener );\n\n\t\treturn () => {\n\t\t\tthis.listeners = this.listeners.filter( ( l ) => l !== listener );\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<SlotFillContext.Provider value={ this.contextValue }>\n\t\t\t\t{ this.props.children }\n\t\t\t</SlotFillContext.Provider>\n\t\t);\n\t}\n}\n"],"mappings":"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"}