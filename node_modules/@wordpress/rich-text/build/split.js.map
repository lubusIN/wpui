{"version":3,"names":["split","formats","replacements","text","start","end","string","splitAtSelection","arguments","nextStart","map","substring","startIndex","value","slice","length","undefined","endIndex","before","after"],"sources":["@wordpress/rich-text/src/split.js"],"sourcesContent":["/**\n * Internal dependencies\n */\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Split a Rich Text value in two at the given `startIndex` and `endIndex`, or\n * split at the given separator. This is similar to `String.prototype.split`.\n * Indices are retrieved from the selection if none are provided.\n *\n * @param {RichTextValue} value\n * @param {number|string} [string] Start index, or string at which to split.\n *\n * @return {Array<RichTextValue>|undefined} An array of new values.\n */\nexport function split( { formats, replacements, text, start, end }, string ) {\n\tif ( typeof string !== 'string' ) {\n\t\treturn splitAtSelection( ...arguments );\n\t}\n\n\tlet nextStart = 0;\n\n\treturn text.split( string ).map( ( substring ) => {\n\t\tconst startIndex = nextStart;\n\t\tconst value = {\n\t\t\tformats: formats.slice( startIndex, startIndex + substring.length ),\n\t\t\treplacements: replacements.slice(\n\t\t\t\tstartIndex,\n\t\t\t\tstartIndex + substring.length\n\t\t\t),\n\t\t\ttext: substring,\n\t\t};\n\n\t\tnextStart += string.length + substring.length;\n\n\t\tif ( start !== undefined && end !== undefined ) {\n\t\t\tif ( start >= startIndex && start < nextStart ) {\n\t\t\t\tvalue.start = start - startIndex;\n\t\t\t} else if ( start < startIndex && end > startIndex ) {\n\t\t\t\tvalue.start = 0;\n\t\t\t}\n\n\t\t\tif ( end >= startIndex && end < nextStart ) {\n\t\t\t\tvalue.end = end - startIndex;\n\t\t\t} else if ( start < nextStart && end > nextStart ) {\n\t\t\t\tvalue.end = substring.length;\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t} );\n}\n\nfunction splitAtSelection(\n\t{ formats, replacements, text, start, end },\n\tstartIndex = start,\n\tendIndex = end\n) {\n\tif ( start === undefined || end === undefined ) {\n\t\treturn;\n\t}\n\n\tconst before = {\n\t\tformats: formats.slice( 0, startIndex ),\n\t\treplacements: replacements.slice( 0, startIndex ),\n\t\ttext: text.slice( 0, startIndex ),\n\t};\n\tconst after = {\n\t\tformats: formats.slice( endIndex ),\n\t\treplacements: replacements.slice( endIndex ),\n\t\ttext: text.slice( endIndex ),\n\t\tstart: 0,\n\t\tend: 0,\n\t};\n\n\treturn [ before, after ];\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,KAAKA,CAAE;EAAEC,OAAO;EAAEC,YAAY;EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAI,CAAC,EAAEC,MAAM,EAAG;EAC5E,IAAK,OAAOA,MAAM,KAAK,QAAQ,EAAG;IACjC,OAAOC,gBAAgB,CAAE,GAAGC,SAAU,CAAC;EACxC;EAEA,IAAIC,SAAS,GAAG,CAAC;EAEjB,OAAON,IAAI,CAACH,KAAK,CAAEM,MAAO,CAAC,CAACI,GAAG,CAAIC,SAAS,IAAM;IACjD,MAAMC,UAAU,GAAGH,SAAS;IAC5B,MAAMI,KAAK,GAAG;MACbZ,OAAO,EAAEA,OAAO,CAACa,KAAK,CAAEF,UAAU,EAAEA,UAAU,GAAGD,SAAS,CAACI,MAAO,CAAC;MACnEb,YAAY,EAAEA,YAAY,CAACY,KAAK,CAC/BF,UAAU,EACVA,UAAU,GAAGD,SAAS,CAACI,MACxB,CAAC;MACDZ,IAAI,EAAEQ;IACP,CAAC;IAEDF,SAAS,IAAIH,MAAM,CAACS,MAAM,GAAGJ,SAAS,CAACI,MAAM;IAE7C,IAAKX,KAAK,KAAKY,SAAS,IAAIX,GAAG,KAAKW,SAAS,EAAG;MAC/C,IAAKZ,KAAK,IAAIQ,UAAU,IAAIR,KAAK,GAAGK,SAAS,EAAG;QAC/CI,KAAK,CAACT,KAAK,GAAGA,KAAK,GAAGQ,UAAU;MACjC,CAAC,MAAM,IAAKR,KAAK,GAAGQ,UAAU,IAAIP,GAAG,GAAGO,UAAU,EAAG;QACpDC,KAAK,CAACT,KAAK,GAAG,CAAC;MAChB;MAEA,IAAKC,GAAG,IAAIO,UAAU,IAAIP,GAAG,GAAGI,SAAS,EAAG;QAC3CI,KAAK,CAACR,GAAG,GAAGA,GAAG,GAAGO,UAAU;MAC7B,CAAC,MAAM,IAAKR,KAAK,GAAGK,SAAS,IAAIJ,GAAG,GAAGI,SAAS,EAAG;QAClDI,KAAK,CAACR,GAAG,GAAGM,SAAS,CAACI,MAAM;MAC7B;IACD;IAEA,OAAOF,KAAK;EACb,CAAE,CAAC;AACJ;AAEA,SAASN,gBAAgBA,CACxB;EAAEN,OAAO;EAAEC,YAAY;EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAI,CAAC,EAC3CO,UAAU,GAAGR,KAAK,EAClBa,QAAQ,GAAGZ,GAAG,EACb;EACD,IAAKD,KAAK,KAAKY,SAAS,IAAIX,GAAG,KAAKW,SAAS,EAAG;IAC/C;EACD;EAEA,MAAME,MAAM,GAAG;IACdjB,OAAO,EAAEA,OAAO,CAACa,KAAK,CAAE,CAAC,EAAEF,UAAW,CAAC;IACvCV,YAAY,EAAEA,YAAY,CAACY,KAAK,CAAE,CAAC,EAAEF,UAAW,CAAC;IACjDT,IAAI,EAAEA,IAAI,CAACW,KAAK,CAAE,CAAC,EAAEF,UAAW;EACjC,CAAC;EACD,MAAMO,KAAK,GAAG;IACblB,OAAO,EAAEA,OAAO,CAACa,KAAK,CAAEG,QAAS,CAAC;IAClCf,YAAY,EAAEA,YAAY,CAACY,KAAK,CAAEG,QAAS,CAAC;IAC5Cd,IAAI,EAAEA,IAAI,CAACW,KAAK,CAAEG,QAAS,CAAC;IAC5Bb,KAAK,EAAE,CAAC;IACRC,GAAG,EAAE;EACN,CAAC;EAED,OAAO,CAAEa,MAAM,EAAEC,KAAK,CAAE;AACzB"}