{"version":3,"names":["_compose","require","_element","useComputeControlledOrUncontrolledValue","valueProp","hasEverBeenUsedInControlledMode","useRef","previousValueProp","usePrevious","useEffect","current","undefined","value","defaultValue"],"sources":["@wordpress/components/src/toggle-group-control/toggle-group-control/utils.ts"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { usePrevious } from '@wordpress/compose';\nimport { useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { ToggleGroupControlProps } from '../types';\n\ntype ValueProp = ToggleGroupControlProps[ 'value' ];\n\n/**\n * Used to determine, via an internal heuristics, whether an `undefined` value\n * received for the `value` prop should be interpreted as the component being\n * used in uncontrolled mode, or as an \"empty\" value for controlled mode.\n *\n * @param valueProp The received `value`\n */\nexport function useComputeControlledOrUncontrolledValue(\n\tvalueProp: ValueProp\n): { value: ValueProp; defaultValue: ValueProp } {\n\tconst hasEverBeenUsedInControlledMode = useRef( false );\n\tconst previousValueProp = usePrevious( valueProp );\n\n\tuseEffect( () => {\n\t\tif ( ! hasEverBeenUsedInControlledMode.current ) {\n\t\t\t// Assume the component is being used in controlled mode if:\n\t\t\t// - the `value` prop is not `undefined`\n\t\t\t// - the `value` prop was not previously `undefined` and was given a new value\n\t\t\thasEverBeenUsedInControlledMode.current =\n\t\t\t\tvalueProp !== undefined &&\n\t\t\t\tpreviousValueProp !== undefined &&\n\t\t\t\tvalueProp !== previousValueProp;\n\t\t}\n\t}, [ valueProp, previousValueProp ] );\n\n\tlet value, defaultValue;\n\n\tif ( hasEverBeenUsedInControlledMode.current ) {\n\t\t// When in controlled mode, use `''` instead of `undefined`\n\t\tvalue = valueProp ?? '';\n\t} else {\n\t\t// When in uncontrolled mode, the `value` should be intended as the initial value\n\t\tdefaultValue = valueProp;\n\t}\n\n\treturn { value, defaultValue };\n}\n"],"mappings":";;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAJA;AACA;AACA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASE,uCAAuCA,CACtDC,SAAoB,EAC4B;EAChD,MAAMC,+BAA+B,GAAG,IAAAC,eAAM,EAAE,KAAM,CAAC;EACvD,MAAMC,iBAAiB,GAAG,IAAAC,oBAAW,EAAEJ,SAAU,CAAC;EAElD,IAAAK,kBAAS,EAAE,MAAM;IAChB,IAAK,CAAEJ,+BAA+B,CAACK,OAAO,EAAG;MAChD;MACA;MACA;MACAL,+BAA+B,CAACK,OAAO,GACtCN,SAAS,KAAKO,SAAS,IACvBJ,iBAAiB,KAAKI,SAAS,IAC/BP,SAAS,KAAKG,iBAAiB;IACjC;EACD,CAAC,EAAE,CAAEH,SAAS,EAAEG,iBAAiB,CAAG,CAAC;EAErC,IAAIK,KAAK,EAAEC,YAAY;EAEvB,IAAKR,+BAA+B,CAACK,OAAO,EAAG;IAC9C;IACAE,KAAK,GAAGR,SAAS,aAATA,SAAS,cAATA,SAAS,GAAI,EAAE;EACxB,CAAC,MAAM;IACN;IACAS,YAAY,GAAGT,SAAS;EACzB;EAEA,OAAO;IAAEQ,KAAK;IAAEC;EAAa,CAAC;AAC/B"}