"use strict";Object.defineProperty(exports, "__esModule", {value: true});

var _KLZID3QOcjs = require('./KLZID3QO.cjs');




var _CWY2PHPRcjs = require('./CWY2PHPR.cjs');


var _5WLTMVVQcjs = require('./5WLTMVVQ.cjs');




var _72I2GWXFcjs = require('./72I2GWXF.cjs');

// src/composite/composite-input.ts




var _dom = require('@ariakit/core/utils/dom');
function getValueLength(element) {
  if (_dom.isTextField.call(void 0, element)) {
    return element.value.length;
  } else if (element.isContentEditable) {
    const range = _dom.getDocument.call(void 0, element).createRange();
    range.selectNodeContents(element);
    return range.toString().length;
  }
  return 0;
}
var useCompositeInput = _CWY2PHPRcjs.createHook.call(void 0, 
  (_a) => {
    var _b = _a, { store } = _b, props = _72I2GWXFcjs.__objRest.call(void 0, _b, ["store"]);
    const onKeyDownCaptureProp = props.onKeyDownCapture;
    const onKeyDownCapture = _5WLTMVVQcjs.useEvent.call(void 0, 
      (event) => {
        onKeyDownCaptureProp == null ? void 0 : onKeyDownCaptureProp(event);
        if (event.defaultPrevented)
          return;
        const element = event.currentTarget;
        if (!element.isContentEditable && !_dom.isTextField.call(void 0, element))
          return;
        const selection = _dom.getTextboxSelection.call(void 0, element);
        if (event.key === "ArrowRight" || event.key === "ArrowDown") {
          if (selection.end !== getValueLength(element)) {
            event.stopPropagation();
          }
        } else if (event.key === "ArrowLeft" || event.key === "ArrowUp") {
          if (selection.start !== 0) {
            event.stopPropagation();
          }
        }
      }
    );
    const onFocusProp = props.onFocus;
    const onFocus = _5WLTMVVQcjs.useEvent.call(void 0, (event) => {
      onFocusProp == null ? void 0 : onFocusProp(event);
      if (event.defaultPrevented)
        return;
      _KLZID3QOcjs.selectTextField.call(void 0, event.currentTarget);
    });
    props = _72I2GWXFcjs.__spreadProps.call(void 0, _72I2GWXFcjs.__spreadValues.call(void 0, {}, props), {
      onKeyDownCapture,
      onFocus
    });
    return props;
  }
);
var CompositeInput = _CWY2PHPRcjs.createComponent.call(void 0, 
  (props) => {
    const htmlProps = useCompositeInput(props);
    return _CWY2PHPRcjs.createElement.call(void 0, "input", htmlProps);
  }
);
if (process.env.NODE_ENV !== "production") {
  CompositeInput.displayName = "CompositeInput";
}




exports.useCompositeInput = useCompositeInput; exports.CompositeInput = CompositeInput;
