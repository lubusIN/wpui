"use strict";Object.defineProperty(exports, "__esModule", {value: true});

var _5VOPA6D3cjs = require('./5VOPA6D3.cjs');




var _CWY2PHPRcjs = require('./CWY2PHPR.cjs');




var _5WLTMVVQcjs = require('./5WLTMVVQ.cjs');




var _72I2GWXFcjs = require('./72I2GWXF.cjs');

// src/composite/composite-hover.ts
var _react = require('react');
var _dom = require('@ariakit/core/utils/dom');
var _focus = require('@ariakit/core/utils/focus');
var _misc = require('@ariakit/core/utils/misc');
function getMouseDestination(event) {
  const relatedTarget = event.relatedTarget;
  if ((relatedTarget == null ? void 0 : relatedTarget.nodeType) === Node.ELEMENT_NODE) {
    return relatedTarget;
  }
  return null;
}
function hoveringInside(event) {
  const nextElement = getMouseDestination(event);
  if (!nextElement)
    return false;
  return _dom.contains.call(void 0, event.currentTarget, nextElement);
}
function movingToAnotherItem(event) {
  const dest = getMouseDestination(event);
  if (!dest)
    return false;
  const item = _dom.closest.call(void 0, dest, "[data-composite-hover]");
  return !!item;
}
var useCompositeHover = _CWY2PHPRcjs.createHook.call(void 0, 
  (_a) => {
    var _b = _a, { store, focusOnHover = true } = _b, props = _72I2GWXFcjs.__objRest.call(void 0, _b, ["store", "focusOnHover"]);
    const context = _react.useContext.call(void 0, _5VOPA6D3cjs.CompositeContext);
    store = store || context;
    _misc.invariant.call(void 0, 
      store,
      process.env.NODE_ENV !== "production" && "CompositeHover must be wrapped in a Composite component"
    );
    const isMouseMoving = _5WLTMVVQcjs.useIsMouseMoving.call(void 0, );
    const onMouseMoveProp = props.onMouseMove;
    const focusOnHoverProp = _5WLTMVVQcjs.useBooleanEvent.call(void 0, focusOnHover);
    const onMouseMove = _5WLTMVVQcjs.useEvent.call(void 0, (event) => {
      onMouseMoveProp == null ? void 0 : onMouseMoveProp(event);
      if (event.defaultPrevented)
        return;
      if (!isMouseMoving())
        return;
      if (!focusOnHoverProp(event))
        return;
      if (!_focus.hasFocusWithin.call(void 0, event.currentTarget)) {
        const baseElement = store == null ? void 0 : store.getState().baseElement;
        if (baseElement && !_focus.hasFocus.call(void 0, baseElement)) {
          baseElement.focus();
        }
      }
      store == null ? void 0 : store.setActiveId(event.currentTarget.id);
    });
    const onMouseLeaveProp = props.onMouseLeave;
    const onMouseLeave = _5WLTMVVQcjs.useEvent.call(void 0, (event) => {
      var _a2;
      onMouseLeaveProp == null ? void 0 : onMouseLeaveProp(event);
      if (event.defaultPrevented)
        return;
      if (!isMouseMoving())
        return;
      if (hoveringInside(event))
        return;
      if (movingToAnotherItem(event))
        return;
      if (!focusOnHoverProp(event))
        return;
      store == null ? void 0 : store.setActiveId(null);
      (_a2 = store == null ? void 0 : store.getState().baseElement) == null ? void 0 : _a2.focus();
    });
    props = _72I2GWXFcjs.__spreadProps.call(void 0, _72I2GWXFcjs.__spreadValues.call(void 0, {
      "data-composite-hover": ""
    }, props), {
      onMouseMove,
      onMouseLeave
    });
    return props;
  }
);
var CompositeHover = _CWY2PHPRcjs.createMemoComponent.call(void 0, 
  (props) => {
    const htmlProps = useCompositeHover(props);
    return _CWY2PHPRcjs.createElement.call(void 0, "div", htmlProps);
  }
);
if (process.env.NODE_ENV !== "production") {
  CompositeHover.displayName = "CompositeHover";
}




exports.useCompositeHover = useCompositeHover; exports.CompositeHover = CompositeHover;
