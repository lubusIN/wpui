{"version":3,"names":["_reactNative","require","_element","useKeyboardOffset","scrollEnabled","shouldPreventAutomaticScroll","keyboardOffset","setKeyboardOffset","useState","timeoutRef","useRef","onKeyboardDidHide","useCallback","clearTimeout","current","setTimeout","onKeyboardDidShow","endCoordinates","height","onKeyboardWillShow","useEffect","willShowSubscription","showSubscription","hideSubscription","Keyboard","addListener","remove"],"sources":["@wordpress/components/src/mobile/keyboard-aware-flat-list/use-keyboard-offset.native.js"],"sourcesContent":["/**\n * External dependencies\n */\n\nimport { Keyboard } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useCallback, useState, useRef } from '@wordpress/element';\n\n/**\n * Hook that adds Keyboard listeners to get the offset space\n * when the keyboard is opened, taking into account focused AztecViews.\n *\n * @param {boolean}  scrollEnabled                Whether the scroll is enabled or not.\n * @param {Function} shouldPreventAutomaticScroll Whether to prevent scrolling when there's a Keyboard offset set.\n * @return {[number]} Keyboard offset.\n */\nexport default function useKeyboardOffset(\n\tscrollEnabled,\n\tshouldPreventAutomaticScroll\n) {\n\tconst [ keyboardOffset, setKeyboardOffset ] = useState( 0 );\n\tconst timeoutRef = useRef();\n\n\tconst onKeyboardDidHide = useCallback( () => {\n\t\tif ( shouldPreventAutomaticScroll() ) {\n\t\t\tclearTimeout( timeoutRef.current );\n\t\t\treturn;\n\t\t}\n\n\t\t// A timeout is being used to delay resetting the offset in cases\n\t\t// where the focus is changed to a different TextInput.\n\t\tclearTimeout( timeoutRef.current );\n\t\ttimeoutRef.current = setTimeout( () => {\n\t\t\tsetKeyboardOffset( 0 );\n\t\t}, 200 );\n\t}, [ shouldPreventAutomaticScroll ] );\n\n\tconst onKeyboardDidShow = useCallback( ( { endCoordinates } ) => {\n\t\tclearTimeout( timeoutRef.current );\n\t\tsetKeyboardOffset( endCoordinates.height );\n\t}, [] );\n\n\tconst onKeyboardWillShow = useCallback( () => {\n\t\tclearTimeout( timeoutRef.current );\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tlet willShowSubscription;\n\t\tlet showSubscription;\n\t\tlet hideSubscription;\n\n\t\tif ( scrollEnabled ) {\n\t\t\twillShowSubscription = Keyboard.addListener(\n\t\t\t\t'keyboardWillShow',\n\t\t\t\tonKeyboardWillShow\n\t\t\t);\n\t\t\tshowSubscription = Keyboard.addListener(\n\t\t\t\t'keyboardDidShow',\n\t\t\t\tonKeyboardDidShow\n\t\t\t);\n\t\t\thideSubscription = Keyboard.addListener(\n\t\t\t\t'keyboardDidHide',\n\t\t\t\tonKeyboardDidHide\n\t\t\t);\n\t\t} else {\n\t\t\twillShowSubscription?.remove();\n\t\t\tshowSubscription?.remove();\n\t\t\thideSubscription?.remove();\n\t\t}\n\n\t\treturn () => {\n\t\t\tclearTimeout( timeoutRef.current );\n\t\t\twillShowSubscription?.remove();\n\t\t\tshowSubscription?.remove();\n\t\t\thideSubscription?.remove();\n\t\t};\n\t}, [\n\t\tonKeyboardDidHide,\n\t\tonKeyboardDidShow,\n\t\tonKeyboardWillShow,\n\t\tscrollEnabled,\n\t] );\n\treturn [ keyboardOffset ];\n}\n"],"mappings":";;;;;;AAIA,IAAAA,YAAA,GAAAC,OAAA;AAKA,IAAAC,QAAA,GAAAD,OAAA;AATA;AACA;AACA;;AAIA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASE,iBAAiBA,CACxCC,aAAa,EACbC,4BAA4B,EAC3B;EACD,MAAM,CAAEC,cAAc,EAAEC,iBAAiB,CAAE,GAAG,IAAAC,iBAAQ,EAAE,CAAE,CAAC;EAC3D,MAAMC,UAAU,GAAG,IAAAC,eAAM,EAAC,CAAC;EAE3B,MAAMC,iBAAiB,GAAG,IAAAC,oBAAW,EAAE,MAAM;IAC5C,IAAKP,4BAA4B,CAAC,CAAC,EAAG;MACrCQ,YAAY,CAAEJ,UAAU,CAACK,OAAQ,CAAC;MAClC;IACD;;IAEA;IACA;IACAD,YAAY,CAAEJ,UAAU,CAACK,OAAQ,CAAC;IAClCL,UAAU,CAACK,OAAO,GAAGC,UAAU,CAAE,MAAM;MACtCR,iBAAiB,CAAE,CAAE,CAAC;IACvB,CAAC,EAAE,GAAI,CAAC;EACT,CAAC,EAAE,CAAEF,4BAA4B,CAAG,CAAC;EAErC,MAAMW,iBAAiB,GAAG,IAAAJ,oBAAW,EAAE,CAAE;IAAEK;EAAe,CAAC,KAAM;IAChEJ,YAAY,CAAEJ,UAAU,CAACK,OAAQ,CAAC;IAClCP,iBAAiB,CAAEU,cAAc,CAACC,MAAO,CAAC;EAC3C,CAAC,EAAE,EAAG,CAAC;EAEP,MAAMC,kBAAkB,GAAG,IAAAP,oBAAW,EAAE,MAAM;IAC7CC,YAAY,CAAEJ,UAAU,CAACK,OAAQ,CAAC;EACnC,CAAC,EAAE,EAAG,CAAC;EAEP,IAAAM,kBAAS,EAAE,MAAM;IAChB,IAAIC,oBAAoB;IACxB,IAAIC,gBAAgB;IACpB,IAAIC,gBAAgB;IAEpB,IAAKnB,aAAa,EAAG;MACpBiB,oBAAoB,GAAGG,qBAAQ,CAACC,WAAW,CAC1C,kBAAkB,EAClBN,kBACD,CAAC;MACDG,gBAAgB,GAAGE,qBAAQ,CAACC,WAAW,CACtC,iBAAiB,EACjBT,iBACD,CAAC;MACDO,gBAAgB,GAAGC,qBAAQ,CAACC,WAAW,CACtC,iBAAiB,EACjBd,iBACD,CAAC;IACF,CAAC,MAAM;MACNU,oBAAoB,EAAEK,MAAM,CAAC,CAAC;MAC9BJ,gBAAgB,EAAEI,MAAM,CAAC,CAAC;MAC1BH,gBAAgB,EAAEG,MAAM,CAAC,CAAC;IAC3B;IAEA,OAAO,MAAM;MACZb,YAAY,CAAEJ,UAAU,CAACK,OAAQ,CAAC;MAClCO,oBAAoB,EAAEK,MAAM,CAAC,CAAC;MAC9BJ,gBAAgB,EAAEI,MAAM,CAAC,CAAC;MAC1BH,gBAAgB,EAAEG,MAAM,CAAC,CAAC;IAC3B,CAAC;EACF,CAAC,EAAE,CACFf,iBAAiB,EACjBK,iBAAiB,EACjBG,kBAAkB,EAClBf,aAAa,CACZ,CAAC;EACH,OAAO,CAAEE,cAAc,CAAE;AAC1B"}